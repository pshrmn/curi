<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>React Router v2/3 Guide | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/prism.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><style data-emotion-css="1vor854">body{font-family:"Zilla Slab",serif;font-weight:300;font-size:24px;line-height:36px;margin:0;box-sizing:border-box;}@media only screen and (min-width:751px){body{font-size:20px;}}@media only screen and (min-width:){body{font-size:20px;}}*,*:before,*:after{box-sizing:inherit;}h1,h2,h3,h4,h5,h6{font-weight:normal;margin:5px 0;overflow:hidden;text-overflow:ellipsis;}p{margin:5px 0;word-break:break-word;}h1{font-size:1.75em;line-height:1.5em;}h2{font-size:1.5em;line-height:1.2em;}h3{font-size:1.25em;line-height:1.1em;}h4{font-size:1.2em;line-height:1.1em;}h5{font-size:1.1em;line-height:1.1em;}h6{font-size:1em;line-height:1.1em;}table,th,td{border:1px solid #c7c7c7;border-collapse:collapse;}table{margin-bottom:10px;}th{text-align:left;}th,td{padding:10px;}pre[class*="language-"]{margin:0;background:#222233;}:not(pre) > code[class*="language-"]{white-space:nowrap;}</style><style data-emotion-css="137i3vd">.css-137i3vd{display:none;}@media only screen and (min-width:751px){.css-137i3vd{display:block;width:100vw;max-width:100%;background:#222233;padding:0;position:fixed;z-index:1;}.css-137i3vd #home-link{font-size:1.5em;color:#ff9800;}}</style><header class="css-137i3vd e132noc00"><style data-emotion-css="1j4n5ho">.css-1j4n5ho{color:#efefef;}.css-1j4n5ho li{margin-right:20px;padding:0;}.css-1j4n5ho li.base > a{color:#efefef;font-size:1.1em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:50px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:3px solid #222233;padding:0 5px;}.css-1j4n5ho li.base > a:hover{color:#ff9800;}.css-1j4n5ho li.base > a.active{color:#ff9800;border-bottom-color:#ff9800;}.css-1j4n5ho li.base > a.activated{color:#2196f3;border-bottom-color:#2196f3;}.css-1j4n5ho a{-webkit-text-decoration:none;text-decoration:none;}</style><nav class="css-1j4n5ho e132noc02"><style data-emotion-css="192aemx">.css-192aemx{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;list-style:none;padding:0;margin:0;max-width:100%;}</style><ul class="css-192aemx e132noc01"><li class="base"><a id="home-link" class=" " href="/">Curi</a></li><li class="base"><a data-hide="false" class="group " href="/packages/">API</a></li><li class="base"><a data-hide="false" class="group active" href="/guides/">Guides</a></li><li class="base"><a data-hide="false" class="group " href="/tutorial/">Tutorials</a></li><li class="base"><a data-hide="false" class="group " href="/examples/">Examples</a></li><li class="base"><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></header><style data-emotion-css="bupcgl">.css-bupcgl{position:fixed;right:15px;bottom:15px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column-reverse;-ms-flex-flow:column-reverse;flex-flow:column-reverse;z-index:9999;}</style><div class="css-bupcgl e18ecyrg1"><style data-emotion-css="8wphu1">.css-8wphu1{width:75px;height:75px;border-radius:40px;border:0;margin-top:10px;font-size:1em;font-family:"Zilla Slab",serif;background:#2196f3;}@media only screen and (min-width:751px){.css-8wphu1{display:none;}}</style><button type="button" class="toggler css-8wphu1 e1105ass0">Menu</button><style data-emotion-css="4pglcz">.css-4pglcz{width:75px;height:75px;border-radius:40px;border:0;margin-top:10px;font-size:1em;font-family:"Zilla Slab",serif;background:#c7c7c7;}@media only screen and (min-width:751px){.css-4pglcz{display:none;}}.css-4pglcz.active{background:#81c784;}</style><button hidden="" class="false active main css-4pglcz e1105ass1">Main</button><button hidden="" class="false false page css-4pglcz e1105ass1">Page</button></div><style data-emotion-css="b9kg8f">.css-b9kg8f{display:none;position:fixed;overflow-y:scroll;width:100vw;height:100vh;background:#efefef;z-index:999;padding:15px;}.css-b9kg8f.visible{display:block;}.css-b9kg8f ul{margin:3px 0;padding-left:0px;list-style:none;}.css-b9kg8f li{margin:3px 0;}.css-b9kg8f a{-webkit-text-decoration:none;text-decoration:none;display:inline-block;color:#222233;}.css-b9kg8f h3{border-bottom:1px solid #333;}.css-b9kg8f .active{font-weight:bold;}.css-b9kg8f .children{display:none;background:#efefef;padding:10px;}.css-b9kg8f .children.visible{display:block;position:fixed;top:0;bottom:0;left:0;right:0;overflow-y:scroll;}@media only screen and (min-width:751px){.css-b9kg8f{display:none;}.css-b9kg8f.visible{display:none;}}</style><div hidden="" class=" css-b9kg8f e18ecyrg0"><nav></nav></div><style data-emotion-css="89bx5e">.css-89bx5e{width:100vw;max-width:100%;padding:10px 10px 0;margin-bottom:20px;}.css-89bx5e a{color:#222233;}@media only screen and (min-width:751px){.css-89bx5e{padding:50px 0 0;margin-bottom:0;}}</style><main tabindex="-1" style="outline:none" class="css-89bx5e e1fl12nk0"><style data-emotion-css="csv88t">.css-csv88t{position:relative;}@media only screen and (min-width:751px){.css-csv88t{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;}}@media only screen and (min-width:751px){.css-csv88t{max-width:100vw;}}</style><div class="css-csv88t e1hcridg0"><style data-emotion-css="q1fc1d">@media only screen and (min-width:751px){.css-q1fc1d{margin-left:275px;}}</style><div class="css-q1fc1d e1hcridg1"><style data-emotion-css="1l1nc79">.css-1l1nc79{margin-top:15px;}.css-1l1nc79 p{margin:0 0 25px;font-size:0.8em;}.css-1l1nc79 .aside{padding:5px 10px;border-left:2px solid $border-green;background:#e8f5e9;margin-top:15px;}.css-1l1nc79 .aside .inline-code{background:#81c784 !important;}@media only screen and (min-width:751px){.css-1l1nc79{max-width:751px;}.css-1l1nc79 p{font-size:1em;}.css-1l1nc79.centered{margin:0 auto;}}</style><div class="section css-1l1nc79"><h1>React Router v2/3</h1><p>Curi is mostly conceptually similar to React Router versions 2 and 3.</p><ol><li>Both use a centralized router.</li><li>Both routers are made up of route objects (although with React Router some of these are disguised as JSX with <style data-emotion-css="jo5c25">.css-jo5c25{padding:0.1em;border-radius:0.3em;white-space:normal;background:#fff;color:#222233;text-shadow:none;white-space:wrap;}.css-jo5c25 .token{color:#222233;}</style><code class="inline-code css-jo5c25 eutm4hs0">Route</code> <!-- -->components).</li><li>With both Reaft Router and Curi, routes can be nested. This can be used to specify child routes that build off of the paths from their parent routes.</li></ol><p>Migration from React Router v2/3 to Curi should not require a complete reworking of your application, but there are some key differences.</p><ol><li>Curi&#x27;s routing is handled entirely outside of React; there are no<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">Route</code> components.</li><li>With Curi, when a nested route matches, only that route renders. Any ancestor routes that also (partially) match are not rendered. This is different from React Router, where ancestors of the best matched route also render.</li></ol></div><style data-emotion-css="1kr8jn0">.css-1kr8jn0{margin-top:15px;}.css-1kr8jn0 p{margin:0 0 25px;font-size:0.8em;}.css-1kr8jn0 .aside{padding:5px 10px;border-left:2px solid $border-green;background:#e8f5e9;margin-top:15px;}.css-1kr8jn0 .aside .inline-code{background:#81c784 !important;}@media only screen and (min-width:751px){.css-1kr8jn0{max-width:751px;}.css-1kr8jn0 p{font-size:1em;}.css-1kr8jn0.centered{margin:0 auto;}}.css-1kr8jn0 .header-link{-webkit-text-decoration:none;text-decoration:none;}.css-1kr8jn0 .header-link::after{content:"#";color:#333;margin-left:5px;}@media only screen and (min-width:751px){.css-1kr8jn0:before{content:"";display:block;margin-top:-50px;height:50px;visibility:hidden;}.css-1kr8jn0 p{font-size:1em;}.css-1kr8jn0 .header-link::after{display:none;}.css-1kr8jn0 .header-link:hover::after{display:inline-block;}}</style><div class="section css-1kr8jn0" id="routes"><h2><a class="header-link" href="#routes">Routes</a></h2><p>Letâ€™s get started with setting up our routes.</p><div class="section css-1kr8jn0" id="routes-with-react-router"><h3><a class="header-link" href="#routes-with-react-router">With React Router</a></h3><p>In React Router v2/3, there are two ways to define routes. You can either use JavaScript objects or JSX <code class="inline-code css-jo5c25 eutm4hs0">Route</code>s (which React Router converts to JavaScript objects).</p><p>Both styles described above define the same route structure for three routes: <code class="inline-code css-jo5c25 eutm4hs0">/</code>, <code class="inline-code css-jo5c25 eutm4hs0">/inbox</code>, and<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">/inbox/:message</code>. Each one of these has a component that will be rendered when it matches. The <code class="inline-code css-jo5c25 eutm4hs0">/inbox/:message</code> <!-- -->route has some methods defined to describe its behavior when the route enters, updates, and leaves.</p><style data-emotion-css="xg7t84">.css-xg7t84{width:100%;margin:0 0 25px;font-size:0.8em;}.css-xg7t84 pre{white-space:pre-wrap;height:100%;vertical-align:top;}@media only screen and (min-width:751px){.css-xg7t84{font-size:1em;}.css-xg7t84 code{min-width:200px;white-space:pre-wrap;}}</style><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">// JavaScript objects
{
  path: &#x27;/&#x27;,
  component: App,
  indexRoute: Home,
  childRoutes: [
    {
      path: &#x27;inbox&#x27;,
      component: Inbox,
      childRoutes: [
        {
          path: &#x27;:message&#x27;,
          component: Message,
          onEnter: (next) =&gt; {...},
          onChange: (prev, next) =&gt; {...},
          onLeave: (prev) =&gt; {...}
        }
      ]
    }
  ]
// JSX
&lt;Route path=&#x27;/&#x27; component={App}&gt;
  &lt;IndexRoute component={Home} /&gt;
  &lt;Route path=&#x27;inbox&#x27; component={Inbox}&gt;
    &lt;Route
      path=&#x27;:message&#x27;
      component={Message}
      onEnter={next =&gt; {...}}
      onChange={(prev, next) =&gt; {...}}
      onLeave={prev =&gt; {...}}
    /&gt;
  &lt;/Route&gt;
&lt;/Route&gt;</code></pre></div></div><div class="section css-1kr8jn0" id="routes-with-curi"><h3><a class="header-link" href="#routes-with-curi">With Curi</a></h3><p>Routes in Curi are always JavaScript objects. Like React Router, each route object has a path property that describes the path segments that the route matches. React Router v2/3 uses a custom path matcher, but Curi uses <code class="inline-code css-jo5c25 eutm4hs0">path-to-regexp</code>. You can read learn how to format paths from the<!-- --> <a href="https://github.com/pillarjs/path-to-regexp"><code class="inline-code css-jo5c25 eutm4hs0">path-to-regexp</code> repo</a>.</p><p>First, we will define the names and paths for our routes.</p><p>Each route must also have a unique name. A route&#x27;s name will be used for interacting with it. For example, to navigate to a route, you only have to know its name, not its URL.</p><p>The biggest difference between the Curi paths and the React Router paths is that with Curi, you never include a forward slash at the beginning of the path. This means that while the root path for React Router is <code class="inline-code css-jo5c25 eutm4hs0">&#x27;/&#x27;</code>, the root path for Curi is <code class="inline-code css-jo5c25 eutm4hs0">&#x27;&#x27;</code>.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">const routes = prepareRoutes({
  routes: [
    {
      name: &#x27;Home&#x27;,
      path: &#x27;&#x27;
    },
    {
      name: &#x27;Inbox&#x27;,
      path: &#x27;inbox&#x27;,
      children: [
        {
          name: &#x27;Message&#x27;,
          path: &#x27;:message&#x27;
        }
      ]
    }
  ]
});</code></pre></div><p>Next, we should add our components to each route. We will ignore the<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">App</code> component that is used in the React Router routes. That is not route specific and will be rendered by our application (assuming we actually need it).</p><p>With Curi, the router creates a &quot;response&quot; object when it matches locations. Some of the properties of the response are automatically set based on the location and the matching route. Others can be set by a route. This is done using the <code class="inline-code css-jo5c25 eutm4hs0">response</code> property, which is a function that returns an object whose properties will be added to the response. For this React application, we want a response&#x27;s <code class="inline-code css-jo5c25 eutm4hs0">body</code> property to be the React component associated with each route.</p><style data-emotion-css="o0tph9">.css-o0tph9{padding:10px 5px;margin:5px 0;border:1px solid #c7c7c7;background:#eeeeee;}.css-o0tph9 p:last-child{margin-bottom:0;}.aside .css-o0tph9{background:#fff;}.css-o0tph9 .inline-code{background:#fff !important;}</style><div class="css-o0tph9 e1bjkffy0"><strong>Note:</strong> <p>Only known properties will be merged onto the response.</p></div><div class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">import { prepareRoutes } from &quot;@curi/router&quot;;

import Home from &#x27;./pages/Home&#x27;;
import Inbox from &#x27;./pages/Inbox&#x27;;
import Mesage from &#x27;./pages/Message&#x27;;

const routes = prepareRoutes({
  routes: [
    {
      name: &#x27;Home&#x27;,
      path: &#x27;&#x27;,
      response: () =&gt; {
        return {
          body: Home
        };
      }
    },
    {
      name: &#x27;Inbox&#x27;,
      path: &#x27;inbox&#x27;,
      response: () =&gt; {
        return {
          body: Inbox
        };
      },
      children: [
        {
          name: &#x27;Message&#x27;,
          path: &#x27;:message&#x27;,
          response: () =&gt; {
            return {
              body: Message
            };
          }
        }
      ]
    }
  ]
});</code></pre></div><p>We are close to replicating our React Router routes, but we still need to implement the <code class="inline-code css-jo5c25 eutm4hs0">on___</code> methods for ourÂ <code class="inline-code css-jo5c25 eutm4hs0">:message</code> route. With Curi, routes can have a<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">resolve</code> function that is called when the route matches the new location.</p><p>With React Router, <code class="inline-code css-jo5c25 eutm4hs0">onEnter</code> is called when the route first matches, while <code class="inline-code css-jo5c25 eutm4hs0">onChange</code> is called when the same route matches a new location (e.g. with new path parameters).<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">onEnter</code> and <code class="inline-code css-jo5c25 eutm4hs0">onChange</code> are nearly the same; the big difference between the two is that <code class="inline-code css-jo5c25 eutm4hs0">onChange</code> will receive the previous props, which could be used to determine which props changed. The functionality for both <code class="inline-code css-jo5c25 eutm4hs0">onEnter</code> and<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">onChange</code> can be covered using a <code class="inline-code css-jo5c25 eutm4hs0">resolve</code> <!-- -->function.</p><p>There is no equivalent to <code class="inline-code css-jo5c25 eutm4hs0">onLeave</code> with Curi. If you have something you need this functionality for, please open up an issue in the GitHub repo.</p><p>The<!-- --> <a href="/packages/@curi/router/v2/#route-objects"><code class="inline-code css-jo5c25 eutm4hs0">@curi/router</code> route API documentation</a> <!-- -->covers all of the route properties.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">const routes = prepareRoutes({
  routes: [
    {
      name: &#x27;Home&#x27;,
      path: &#x27;&#x27;,
      response: () =&gt; {
        return {
          body: Home
        };
      }
    },
    {
      name: &#x27;Inbox&#x27;,
      path: &#x27;inbox&#x27;,
      response: () =&gt; {
        return {
          body: Inbox
        };
      },
      children: [
        {
          name: &#x27;Message&#x27;,
          path: &#x27;:message&#x27;,
          response: () =&gt; {
            return {
              body: Message
            };
          },
          resolve(match) { return ... },
        }
      ]
    }
  ]
});</code></pre></div></div><p>Once your routes have been defined, you can move on to creating your Curi router.</p></div><div class="section css-1kr8jn0" id="creating-the-router"><h2><a class="header-link" href="#creating-the-router">Creating the router</a></h2><p>With React Router, you create your router by rendering a<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">Router</code>. That either takes the <code class="inline-code css-jo5c25 eutm4hs0">Route</code> components as props or the route objects through its <code class="inline-code css-jo5c25 eutm4hs0">routes</code> prop. The<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">Router</code> also takes a <code class="inline-code css-jo5c25 eutm4hs0">history</code> prop, which is either one of the pre-routerured objects (<code class="inline-code css-jo5c25 eutm4hs0">browserHistory</code> or<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">hashHistory</code>) or one that you create yourself.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">import { Router, browserHistory } from &#x27;react-router&#x27;;
const routes = prepareRoutes({ routes: [...] });
ReactDOM.render((
  &lt;Router history={browserHistory} routes={routes} /&gt;
), holder);</code></pre></div><p>With Curi, the router is created prior to rendering. It takes a Hickory history function, your routes array, and possibly an options object.Â <a href="https://github.com/pshrmn/hickory">Hickory</a> is similar to the <code class="inline-code css-jo5c25 eutm4hs0">history</code> package used by React Router, but has an API tailored for asynchronous applications.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">import { curi, prepareRoutes } from &#x27;@curi/router&#x27;;
import { browser } from &#x27;@hickory/browser&#x27;;
const routes = prepareRoutes({ routes: [...] });
const router = createRouter(browser, routes);</code></pre></div></div><div class="section css-1kr8jn0" id="rendering"><h2><a class="header-link" href="#rendering">Rendering</a></h2><p>We will walk through the rendering differences between React Router and Curi by looking at what happens in each when we navigate to the URI <code class="inline-code css-jo5c25 eutm4hs0">/inbox/test</code>.</p><div class="section css-1kr8jn0" id="rendering-react-router"><h3><a class="header-link" href="#rendering-react-router">React Router v2/3</a></h3><p>React Router uses the <code class="inline-code css-jo5c25 eutm4hs0">Router</code> component to subscribe to location changes. Each time that the location changes, it walks over its routes and determines which route(s!) match.</p><p>React Router starts by rendering the root component. In the above router, that is the <code class="inline-code css-jo5c25 eutm4hs0">App</code>. Next, our <code class="inline-code css-jo5c25 eutm4hs0">inbox</code> route also matches, so React Router also renders our <code class="inline-code css-jo5c25 eutm4hs0">Inbox</code> <!-- -->component. Finally, the URI <code class="inline-code css-jo5c25 eutm4hs0">/inbox/test</code> also matches ourÂ <code class="inline-code css-jo5c25 eutm4hs0">:message</code> route (which is concatenated with its parents to form the path <code class="inline-code css-jo5c25 eutm4hs0">/inbox/:message</code>), so <code class="inline-code css-jo5c25 eutm4hs0">Message</code> is rendered as well. Each child component is rendered by its parent, so we end up with a component tree that looks something like this:</p><p>With this structure, any routes with children will be rendered when one of the children matches. That means that those routes need to know how to render based on what type of match they have. For example, <code class="inline-code css-jo5c25 eutm4hs0">Inbox</code> needs to know how to render for an exact match (the URI is <code class="inline-code css-jo5c25 eutm4hs0">/inbox</code>) and for a partial match (<code class="inline-code css-jo5c25 eutm4hs0">/inbox/test</code>). Also, if the <code class="inline-code css-jo5c25 eutm4hs0">Inbox</code> needs to pass any props to <code class="inline-code css-jo5c25 eutm4hs0">Message</code>, it has to use<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">React.cloneElement</code>, which works but is not the cleanest looking code.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">&lt;App&gt;
  &lt;Inbox&gt;
    &lt;Message&gt;
  &lt;/Inbox&gt;
&lt;/App&gt;</code></pre></div></div><div class="section css-1kr8jn0" id="rendering-with-curi"><h3><a class="header-link" href="#rendering-with-curi">Curi</a></h3><p>With Curi, we also need to re-render our application every time that the location changes. We will do this by creating a root Curi component by calling the <code class="inline-code css-jo5c25 eutm4hs0">createRouterComponent</code> function, which comes from the <code class="inline-code css-jo5c25 eutm4hs0">@curi/react-dom</code> package, and passing it our Curi router. While the name of this component is entirely up to you, we will refer to it as the <code class="inline-code css-jo5c25 eutm4hs0">Router</code> here.</p><p>The <code class="inline-code css-jo5c25 eutm4hs0">Router</code> will setup an observer on the provided router so that it can re-render your application whenever there is a new<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">response</code>. The <code class="inline-code css-jo5c25 eutm4hs0">Router</code> expects a function as its<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">children</code> prop (a render-invoked function). This function renders the application using the <code class="inline-code css-jo5c25 eutm4hs0">response</code>.</p><p>When the <code class="inline-code css-jo5c25 eutm4hs0">Router</code>&#x27;s <code class="inline-code css-jo5c25 eutm4hs0">children</code> function is called, it will receive an object with three properties:</p><ol><li><code class="inline-code css-jo5c25 eutm4hs0">response</code> is the new response object</li><li><code class="inline-code css-jo5c25 eutm4hs0">navigation</code> is an object with additional information about the navigation</li><li><code class="inline-code css-jo5c25 eutm4hs0">router</code> is your Curi router (mostly useful if the function is defined in a separate file)</li></ol><p>Above, we added <code class="inline-code css-jo5c25 eutm4hs0">response</code> functions to each route. The functions set React components as the <code class="inline-code css-jo5c25 eutm4hs0">body</code> property of responses. We can now use <code class="inline-code css-jo5c25 eutm4hs0">response.body</code> to render those components.</p><p>In the React Router section, we had three components that were rendered: <code class="inline-code css-jo5c25 eutm4hs0">App</code>,<code class="inline-code css-jo5c25 eutm4hs0">Inbox</code>, and <code class="inline-code css-jo5c25 eutm4hs0">Message</code>. With Curi, only the most accurately matched route actually matches. That means that for the URL <code class="inline-code css-jo5c25 eutm4hs0">/inbox/test</code>, the<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&quot;Message&quot;</code> route will match, but its parent route,<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&quot;Inbox&quot;</code> will not, so <code class="inline-code css-jo5c25 eutm4hs0">response.body</code> will be the<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">Message</code> component. Unlike React Router, we donâ€™t render<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">Inbox</code> because we did not match the <code class="inline-code css-jo5c25 eutm4hs0">inbox</code> <!-- -->route.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">import { createRouterComponent, useResponse } from &quot;@curi/react-dom&quot;;

const router = createRouter(browser, routes);
const Router = createRouterComponent(router);

function App() {
  const { response } = useResponse();
  const { body:Body } = response;
  return &lt;Body response={response} /&gt;;
}

ReactDOM.render((
  &lt;Router&gt;
    &lt;App /&gt;
  &lt;/Router&gt;
), holder);

/*
&lt;Router&gt;
  &lt;App&gt;
    &lt;Message /&gt;
  &lt;/App&gt;
&lt;/Router&gt;
*/</code></pre></div><div class="css-o0tph9 e1bjkffy0"><strong>Note:</strong> <p>Wildcard routes (<code class="inline-code css-jo5c25 eutm4hs0">{ path: &#x27;(.*)&#x27; }</code>) can be used to easily display a not found page for any location not matched by other routes.</p></div><div class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">const routes = prepareRoutes({
  routes: [
    // ...,
    {
      name: &quot;Not Found&quot;,
      path: &quot;(.*)&quot;,
      response() {
        return { body: NotFound };
      }
    }
  ]
});</code></pre></div><p>It was mentioned above that there is no need for the <code class="inline-code css-jo5c25 eutm4hs0">App</code> <!-- -->component with Curi. If you want to have an <code class="inline-code css-jo5c25 eutm4hs0">App</code> <!-- -->component, you can render it either inside of the<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">children</code> function or as a parent of your<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">Router</code>. This can be useful for rendering content that is unrelated to specific routes, like a page header or menu.</p><p>Rendering the <code class="inline-code css-jo5c25 eutm4hs0">App</code> inside of the <code class="inline-code css-jo5c25 eutm4hs0">children</code> <!-- -->function is necessary if any of the components rendered by the<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">App</code> are location aware components, since they need to access the Curi router (through Reactâ€™s context, which the<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">Router</code> provides)</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">function render({ response }) {
  const { body:Body } = response;
  return (
    &lt;App&gt;
      &lt;Body /&gt;
    &lt;/App&gt;
  );
}
// or
function render({ response }) {
  const { body:Body } = response;
  return (
    &lt;div&gt;
      &lt;Header /&gt;
      &lt;Body /&gt;
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
}</code></pre></div><p>What about props that you want to send to your route components? Pass them to the <code class="inline-code css-jo5c25 eutm4hs0">Body</code> component that you render. Props can be passed individually, but passing the whole<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">response</code> object is recommended.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">function render({ response }) {
  const { body:Body } = response;
  return &lt;Body response={response} /&gt;;
}</code></pre></div></div></div><div class="section css-1kr8jn0" id="links"><h2><a class="header-link" href="#links">Links</a></h2><p>You will want to be able to navigate between routes in your application. React Router provides a <code class="inline-code css-jo5c25 eutm4hs0">Link</code> component to do this, and so does Curi (through the <code class="inline-code css-jo5c25 eutm4hs0">@curi/react-dom</code> <!-- -->package). There are a few differences to note between these two components:</p><ul><li><p>React Router expects you to generate the pathname yourself, while Curi expects you to pass the name of the route that you want to navigate to. Any path parameters are passed to Curiâ€™s<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">Link</code> using the <code class="inline-code css-jo5c25 eutm4hs0">params</code> prop.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">// React Router
&lt;Link to=&#x27;/&#x27;&gt;Home&lt;/Link&gt;
&lt;Link to={`/inbox/${message}`}&gt;Hello&lt;/Link&gt;

// Curi
&lt;Link name=&#x27;Home&#x27;&gt;Home&lt;/Link&gt;
&lt;Link name=&#x27;Message&#x27; params={{ message }}&gt;Hello&lt;/Link&gt;</code></pre></div></li><li><p>With React Router, any additional location properties are passed to the <code class="inline-code css-jo5c25 eutm4hs0">Link</code> using the <code class="inline-code css-jo5c25 eutm4hs0">to</code> object. With Curi, these properties are passed using the prop name (<code class="inline-code css-jo5c25 eutm4hs0">hash</code>,<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">query</code> &amp;<code class="inline-code css-jo5c25 eutm4hs0">state</code>).</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">// React Router
&lt;Link to={{ pathname: &#x27;/inbox&#x27;, hash: &#x27;#test&#x27; }}&gt;
  Inbox
&lt;/Link&gt;

// Curi
&lt;Link name=&#x27;Inbox&#x27; hash=&#x27;test&#x27;&gt;Inbox&lt;/Link&gt;</code></pre></div></li><li><p>Active detection with Curi is done using the <code class="inline-code css-jo5c25 eutm4hs0">useActive</code> <!-- -->hook. The hook takes the name of the route (and any required params) and returns a boolean to indicate if the route is active. You can also use its <code class="inline-code css-jo5c25 eutm4hs0">partial</code> option to detect when ancestor routes are active (the opposite of React Router&#x27;s<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">onlyActiveOnIndex</code>).</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">// React Router
&lt;Link
  to=&#x27;/&#x27;
  onlyActiveOnIndex
  activeClassName=&#x27;active&#x27;
&gt;
  Home
&lt;/Link&gt;

// Curi

// The useActive hook returns a boolean indicating
// if a route is active
const active = useActive(&quot;Home&quot;);
const className = active ? &quot;active&quot; : &quot;&quot;;
&lt;Link name=&#x27;Home&#x27; forward={{ className }}&gt;
  Home
&lt;/Link&gt;</code></pre></div></li></ul></div><div class="section css-1kr8jn0" id="router-props"><h2><a class="header-link" href="#router-props">Accessing router props from nested components</a></h2><p>React Router provides a <code class="inline-code css-jo5c25 eutm4hs0">withRouter</code> higher-order component that will inject router props into the wrapped component.</p><p>The best way to get router data with Curi is to use the<!-- --> <a href="/packages/@curi/react-dom/v2/#useResponse"><code class="inline-code css-jo5c25 eutm4hs0">useResponse</code> hook</a>.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">// React Router
export default withRouter(SomeComponent);

// Curi
function SomeComponent() {
  const { response } = useResponse();
  return ...
}</code></pre></div></div><div class="section css-1l1nc79"><p>At this point, hopefully you are comfortable with migrating from React Router v2/3 to Curi. If there are any concepts not covered here that you think should be, please feel free to open up an issue<!-- --> <a href="https://github.com/pshrmn/curi/issues">on GitHub</a>.</p></div></div><style data-emotion-css="64fwtw">.css-64fwtw{display:none;}@media only screen and (min-width:751px){.css-64fwtw{background:#efefef;display:block;position:fixed;top:50px;bottom:0px;overflow:auto;-webkit-flex:0 0;-ms-flex:0 0;flex:0 0;-webkit-order:-1;-ms-flex-order:-1;order:-1;padding:25px;margin-right:25px;}}</style><div class="css-64fwtw e1hcridg2"><style data-emotion-css="1eimyfs">.css-1eimyfs{width:200px;}.css-1eimyfs p{margin:0;}.css-1eimyfs a{-webkit-text-decoration:none;text-decoration:none;display:block;}.css-1eimyfs ol{padding-left:0;margin-top:0;list-style-type:none;}.css-1eimyfs ol ol{padding-left:15px;font-size:0.9em;}</style><div class="css-1eimyfs e1evhjzy0"><ol><li><a href="#routes">Routes</a><ol><li><a href="#routes-with-react-router">With React Router</a></li><li><a href="#routes-with-curi">With Curi</a></li></ol></li><li><a href="#creating-the-router">Creating the router</a></li><li><a href="#rendering">Rendering</a><ol><li><a href="#rendering-react-router">React Router v2/3</a></li><li><a href="#rendering-with-curi">Curi</a></li></ol></li><li><a href="#links">Links</a></li><li><a href="#router-props">Accessing router props from nested components</a></li></ol></div></div></div></main></div>
    <script src="https://cdn.polyfill.io/v2/polyfill.js?features=Object.assign"></script>
    <script src="https://unpkg.com/react@16.8.6/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.8.6/umd/react-dom.production.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
