<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="An introduction to Curi response objects">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Responses Guide | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/prism.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><style data-emotion-css="w4dmsu">body{font-family:"Zilla Slab",serif;font-weight:300;font-size:24px;line-height:36px;margin:0;box-sizing:border-box;}@media only screen and (min-width:751px){body{font-size:20px;}}*,*:before,*:after{box-sizing:inherit;}h1,h2,h3,h4,h5,h6{font-weight:normal;margin:5px 0;overflow:hidden;text-overflow:ellipsis;}p{margin:5px 0;word-break:break-word;}h1{font-size:1.75em;line-height:1.5em;}h2{font-size:1.5em;line-height:1.2em;}h3{font-size:1.35em;line-height:1.1em;}h4{font-size:1.2em;line-height:1.1em;}h5{font-size:1.1em;line-height:1.1em;}h6{font-size:1em;line-height:1.1em;}table,th,td{border:1px solid #c7c7c7;border-collapse:collapse;}table{margin-bottom:10px;}th{text-align:left;}th,td{padding:10px;}pre[class*="language-"]{margin:0;background:#222233;}:not(pre) > code[class*="language-"]{white-space:nowrap;}menu{padding:0;margin:0;}</style><style data-emotion-css="137i3vd">.css-137i3vd{display:none;}@media only screen and (min-width:751px){.css-137i3vd{display:block;width:100vw;max-width:100%;background:#222233;padding:0;position:fixed;z-index:1;}.css-137i3vd #home-link{font-size:1.5em;color:#ff9800;}}</style><header class="css-137i3vd e132noc00"><style data-emotion-css="1j4n5ho">.css-1j4n5ho{color:#efefef;}.css-1j4n5ho li{margin-right:20px;padding:0;}.css-1j4n5ho li.base > a{color:#efefef;font-size:1.1em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:50px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:3px solid #222233;padding:0 5px;}.css-1j4n5ho li.base > a:hover{color:#ff9800;}.css-1j4n5ho li.base > a.active{color:#ff9800;border-bottom-color:#ff9800;}.css-1j4n5ho li.base > a.activated{color:#2196f3;border-bottom-color:#2196f3;}.css-1j4n5ho a{-webkit-text-decoration:none;text-decoration:none;}</style><nav class="css-1j4n5ho e132noc02"><style data-emotion-css="192aemx">.css-192aemx{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;list-style:none;padding:0;margin:0;max-width:100%;}</style><ul class="css-192aemx e132noc01"><li class="base"><a id="home-link" class=" " href="/">Curi</a></li><li class="base"><a data-hide="false" class="group " href="/v2/">API</a></li><li class="base"><a data-hide="false" class="group active" href="/guides/">Guides</a></li><li class="base"><a data-hide="false" class="group " href="/tutorial/">Tutorials</a></li><li class="base"><a data-hide="false" class="group " href="/examples/">Examples</a></li><li class="base"><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></header><style data-emotion-css="1y5vav3">.css-1y5vav3{position:fixed;width:100vw;height:40px;left:0;bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;z-index:9999;}</style><menu class="css-1y5vav3 e18ecyrg1"><style data-emotion-css="xp11l1">.css-xp11l1{height:40px;border:0;font-size:1em;font-family:"Zilla Slab",serif;-webkit-flex:1;-ms-flex:1;flex:1;background:#c8e6c9;}.css-xp11l1.active{background:#ef9a9a;}@media only screen and (min-width:751px){.css-xp11l1{display:none;}}</style><button class="false main css-xp11l1 e1105ass0">Main Menu</button><style data-emotion-css="18i6c1d">.css-18i6c1d{height:40px;border:0;font-size:1em;font-family:"Zilla Slab",serif;-webkit-flex:1;-ms-flex:1;flex:1;background:#b3e5fc;}.css-18i6c1d.active{background:#ef9a9a;}@media only screen and (min-width:751px){.css-18i6c1d{display:none;}}</style><button class="false page css-18i6c1d e1105ass1">Page Menu</button></menu><style data-emotion-css="1m8byth">.css-1m8byth{position:fixed;overflow-y:scroll;width:100vw;height:100vh;background:#efefef;z-index:999;padding:15px 15px 45px;}.css-1m8byth.visible{display:block;}.css-1m8byth ul{margin:3px 0;padding-left:0px;list-style:none;}.css-1m8byth li{margin:3px 0;}.css-1m8byth a{-webkit-text-decoration:none;text-decoration:none;display:inline-block;color:#222233;}.css-1m8byth h3{border-bottom:1px solid #333;}.css-1m8byth .active{font-weight:bold;}.css-1m8byth .children{display:none;background:#efefef;padding:10px;}.css-1m8byth .children.visible{display:block;position:fixed;top:0;bottom:0;left:0;right:0;overflow-y:scroll;}@media only screen and (min-width:751px){.css-1m8byth{display:none;}.css-1m8byth.visible{display:none;}}</style><menu hidden="" class=" css-1m8byth e18ecyrg0"><nav></nav></menu><style data-emotion-css="13rb4cr">.css-13rb4cr{width:100vw;max-width:100%;padding:10px 10px 0;margin-bottom:45px;}.css-13rb4cr a{color:#222233;}@media only screen and (min-width:751px){.css-13rb4cr{padding:50px 0 0;margin-bottom:0;}}</style><main tabindex="-1" style="outline:none" class="css-13rb4cr e1fl12nk0"><style data-emotion-css="csv88t">.css-csv88t{position:relative;}@media only screen and (min-width:751px){.css-csv88t{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;}}@media only screen and (min-width:751px){.css-csv88t{max-width:100vw;}}</style><div class="css-csv88t e1hcridg0"><style data-emotion-css="q1fc1d">@media only screen and (min-width:751px){.css-q1fc1d{margin-left:275px;}}</style><article class="css-q1fc1d e1hcridg1"><style data-emotion-css="gmhjbe">.css-gmhjbe{margin-top:15px;}.css-gmhjbe p{margin:0 0 25px;font-size:0.8em;}@media only screen and (min-width:751px){.css-gmhjbe{max-width:751px;}.css-gmhjbe p{font-size:1em;}.css-gmhjbe.centered{margin:0 auto;}}</style><section class="section css-gmhjbe"><h1>Responses</h1><p>When Curi receives a location, it compares the location&#x27;s<!-- --> <style data-emotion-css="jo5c25">.css-jo5c25{padding:0.1em;border-radius:0.3em;white-space:normal;background:#fff;color:#222233;text-shadow:none;white-space:wrap;}.css-jo5c25 .token{color:#222233;}</style><code class="inline-code css-jo5c25 eutm4hs0">pathname</code> to each route&#x27;s <code class="inline-code css-jo5c25 eutm4hs0">path</code> to find which one matches best and uses that route to create a response object.</p></section><section class="css-gmhjbe e1a46ijo0"><style data-emotion-css="1gka4o8">.css-1gka4o8 .header-link{-webkit-text-decoration:none;text-decoration:none;}.css-1gka4o8 .header-link::after{content:"#";color:#333;margin-left:5px;}@media only screen and (min-width:751px){.css-1gka4o8{margin-top:-50px;padding-top:50px;}.css-1gka4o8 .header-link::after{display:none;}.css-1gka4o8 .header-link:hover::after{display:inline-block;}}</style><h2 id="response-properties" class="css-1gka4o8"><a class="header-link" href="#response-properties">The Properties of a Response Object</a></h2><p>There are two types of response properties.</p><p>The &quot;match&quot; properties are set based on the route that matches a location. A response always has these properties.</p><style data-emotion-css="xg7t84">.css-xg7t84{width:100%;margin:0 0 25px;font-size:0.8em;}.css-xg7t84 pre{white-space:pre-wrap;height:100%;vertical-align:top;}@media only screen and (min-width:751px){.css-xg7t84{font-size:1em;}.css-xg7t84 code{min-width:200px;white-space:pre-wrap;}}</style><figure class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">// match properties
{
  // The location object used to generate the response.
  location: { pathname: &#x27;/photos/6789/12345&#x27;, ... },

  // The name of the best matching route
  name: &#x27;Photo&#x27;,

  // The name of ancestor routes that matched
  // part of the location&#x27;s pathname
  partials: [&#x27;Album&#x27;],

  // An object containing the values parsed
  // from the pathname by path-to-regexp.
  // This includes params from ancestor routes.
  params: { photoID: 12345, albumID: 6789 },
}</code></pre></figure><p>The &quot;settable&quot; properties are ones that are added by a matched route&#x27;s<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">respond</code> function. These only exist on the response when they are returned by a route&#x27;s <code class="inline-code css-jo5c25 eutm4hs0">respond</code> function.</p><p>The &quot;settable&quot; properties are:</p><section class="css-gmhjbe e1a46ijo0"><h3 id="settable-body" class="css-1gka4o8"><a class="header-link" href="#settable-body">body</a></h3><p>The component(s) that should be rendered for a route.</p></section><section class="css-gmhjbe e1a46ijo0"><h3 id="settable-meta" class="css-1gka4o8"><a class="header-link" href="#settable-meta">meta</a></h3><p>An object with metadata for a response.</p></section><section class="css-gmhjbe e1a46ijo0"><h3 id="settable-data" class="css-1gka4o8"><a class="header-link" href="#settable-data">data</a></h3><p>A place to attach any data you want to the response, such as data loaded in the route&#x27;s <code class="inline-code css-jo5c25 eutm4hs0">resolve</code> function.</p></section><section class="css-gmhjbe e1a46ijo0"><h3 id="settable-redirect" class="css-1gka4o8"><a class="header-link" href="#settable-redirect">redirect</a></h3><p>An object describing a route that Curi should automatically redirect to.</p></section><figure class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">// settable properties (optional)
{
  body: Photo,
  // or maybe
  body: {
    menu: PhotoMenu,
    main: Photo
  },
  // Please see below for more information
  // about this property

  meta: {
    status: 200,
    title: &#x27;Photo 12345&#x27;
  },

  data: {...},

  redirect: {...}
}</code></pre></figure></section><section class="css-gmhjbe e1a46ijo0"><h2 id="response-body" class="css-1gka4o8"><a class="header-link" href="#response-body">Response Body</a></h2><p>Curi isn&#x27;t strict about how you use responses, but you will most likely always want to use a route&#x27;s <code class="inline-code css-jo5c25 eutm4hs0">respond</code> function to attach a <code class="inline-code css-jo5c25 eutm4hs0">body</code> property to a response. The usual pattern is to use a route&#x27;s <code class="inline-code css-jo5c25 eutm4hs0">body</code> property to describe which component(s) to render when a route matches. This can either be a single component for basic layouts or an object with a number of components for<!-- --> <a href="/examples/multi-body/">advanced layouts</a>.</p><style data-emotion-css="10wffac">.css-10wffac{padding:10px 5px;margin:5px 0;border:1px solid #c7c7c7;background:#eeeeee;}.css-10wffac p:last-child{margin-bottom:0;}.css-10wffac .inline-code{background:#fff !important;}</style><aside class="css-10wffac e1bjkffy0"><strong>Note:</strong> <p>Each route should use the same <code class="inline-code css-jo5c25 eutm4hs0">body</code> &quot;shape&quot;. If one route returns a single component while another route return an object, you will be making rendering more complicated for yourself.</p></aside><figure class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">// do NOT do this
// mixing body shapes complicates rendering
const routes = prepareRoutes([
  {
    respond() {
      return { body: One }
    }
  },
  {
    respond() {
      return {
        body: {
          main: Main,
          menu: Menu
        }
      }
    }
  }
]);</code></pre></figure></section><section class="css-gmhjbe e1a46ijo0"><h2 id="redirect-properties" class="css-1gka4o8"><a class="header-link" href="#redirect-properties">Redirect Response</a></h2><p>When a route&#x27;s <code class="inline-code css-jo5c25 eutm4hs0">respond</code> function returns an object with a<!-- --> <a href="/v2/@curi/router/#response"><code class="inline-code css-jo5c25 eutm4hs0">redirect</code> property</a>, the router will use it to generate a location object that Curi will automatically redirect to.</p><figure class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">{
  // The redirect property provides information on
  // where you should redirect to
  redirect: { name: &quot;Login&quot; }
}</code></pre></figure><p>When creating a router, you can set the <code class="inline-code css-jo5c25 eutm4hs0">invisibleRedirects</code> <!-- -->option to <code class="inline-code css-jo5c25 eutm4hs0">true</code> and the response will not be sent to observers and one time functions. Instead, the response for the location that is redirected to will be the next emitted response. In either case, the router will automatically redirect to the route specified by <code class="inline-code css-jo5c25 eutm4hs0">response.redirect</code>.</p><figure class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">const router = createRouter(browser, routes, {
  invisibleRedirects: true
});</code></pre></figure><p>This property can also be used to specify an external redirect (a redirect to a location that is not within the application). This is done by setting an <code class="inline-code css-jo5c25 eutm4hs0">externalURL</code> property on the<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">redirect</code> object. It is up to the application to redirect to the external location. Responses with an external redirect will be emitted when <code class="inline-code css-jo5c25 eutm4hs0">invisibleRedirects</code> is <code class="inline-code css-jo5c25 eutm4hs0">true</code>.</p><figure class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">// a route with an external redirect
{
  respond() {
    return {
      redirect: {
        externalURL: &quot;https://example.com&quot;
      }
    };
  }
}

// a route observe can detect and automatically redirect
router.observe(({ response }) =&gt; {
  if (response.redirect &amp;&amp; response.redirect.externalURL) {
    window.location.replace(response.redirect.externalURL);
  }
})</code></pre></figure></section></article><style data-emotion-css="64fwtw">.css-64fwtw{display:none;}@media only screen and (min-width:751px){.css-64fwtw{background:#efefef;display:block;position:fixed;top:50px;bottom:0px;overflow:auto;-webkit-flex:0 0;-ms-flex:0 0;flex:0 0;-webkit-order:-1;-ms-flex-order:-1;order:-1;padding:25px;margin-right:25px;}}</style><div class="css-64fwtw e1hcridg2"><style data-emotion-css="gnbpx8">.css-gnbpx8{width:200px;padding:0;margin:0;}.css-gnbpx8 p{margin:0;}.css-gnbpx8 a{-webkit-text-decoration:none;text-decoration:none;display:block;}.css-gnbpx8 ol{padding-left:0;margin-top:0;list-style-type:none;}.css-gnbpx8 ol ol{padding-left:15px;font-size:0.9em;}</style><menu class="css-gnbpx8 e1evhjzy0"><ol><li><a href="#response-properties">The Properties of a Response Object</a></li><li><a href="#response-body">Response Body</a></li><li><a href="#redirect-properties">Redirect Response</a></li></ol></menu></div></div></main></div>
    <script src="https://unpkg.com/react@16.8.6/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.8.6/umd/react-dom.production.min.js"></script>
    <script src="/static/js/highlight.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
