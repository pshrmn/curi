<!doctype html>
<html lang="en" class="font-serif text-small-screen md:text-regular-screen font-light m-0 box-border">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="An introduction to Curi response objects">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Responses Guide | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/prism.css" rel="stylesheet">
    <link href="/static/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><header class="hidden md:block w-screen max-w-full bg-purple p-0 fixed z-10"><nav class="text-gray-100"><ul role="menubar" class="flex flex-row flex-wrap items-end p-0 m-0 max-w-full"><li class="p-0 pr-2 pl-0"><a class=" text-gray-100 text-xl no-underline h-10 flex items-center px-2 border-0 border-b-2 border-purple hover:text-bright-orange md:text-2xl md:text-bright-orange" href="/">Curi</a></li><li class="p-0 pr-2 pl-0" aria-haspopup="true"><a class=" text-gray-100 text-xl no-underline h-10 flex items-center px-2 border-0 border-b-2 border-purple hover:text-bright-orange " href="/v2/">API</a><div class="hidden absolute w-screen left-0 text-purple border-0 border-b-2 border-purple"><ul class="flex flex-row flex-no-wrap justify-start bg-light-blue list-none m-0 p-0"><li><menu class="my-0 mx-5"><h3>router</h3><ul><li><a class=" " href="/v2/@curi/router/">router</a></li><li><a class=" " href="/v2/@curi/interactions/">interactions</a></li></ul></menu></li><li><menu class="my-0 mx-5"><h3>render</h3><ul><li><a class=" " href="/v2/@curi/react-dom/">react-dom</a></li><li><a class=" " href="/v2/@curi/react-native/">react-native</a></li><li><a class=" " href="/v2/@curi/svelte/">svelte</a></li><li><a class=" " href="/v2/@curi/vue/">vue</a></li></ul></menu></li><li><menu class="my-0 mx-5"><h3>other</h3><ul><li><a class=" " href="/v2/@curi/static/">static</a></li><li><a class=" " href="/v2/@curi/helpers/">helpers</a></li><li><a class=" " href="/v2/@curi/types/">types</a></li></ul></menu></li></ul></div></li><li class="p-0 pr-2 pl-0" aria-haspopup="true"><a class="text-bright-orange border-bright-orange text-gray-100 text-xl no-underline h-10 flex items-center px-2 border-0 border-b-2 border-purple hover:text-bright-orange " href="/guides/">Guides</a><div class="hidden absolute w-screen left-0 text-purple border-0 border-b-2 border-purple"><ul class="flex flex-row flex-no-wrap justify-start bg-light-blue list-none m-0 p-0"><menu class="my-0 mx-5"><h3>basic</h3><ul><li><a class=" " href="/guides/installation/">Installation</a></li><li><a class=" " href="/guides/getting-started/">Getting Started</a></li><li><a class=" " href="/guides/history/">History</a></li><li><a class=" " href="/guides/routes/">Routes</a></li><li><a class="font-bold " href="/guides/responses/">Responses</a></li><li><a class=" " href="/guides/navigation-objects/">Navigation Objects</a></li><li><a class=" " href="/guides/sync-or-async/">Sync or Async</a></li><li><a class=" " href="/guides/new-responses/">New Responses</a></li><li><a class=" " href="/guides/accessibility/">Accessibility</a></li></ul></menu><menu class="my-0 mx-5"><h3>rendering</h3><ul><li><a class=" " href="/guides/react-dom/">React DOM</a></li><li><a class=" " href="/guides/react-native/">React Native</a></li><li><a class=" " href="/guides/svelte/">Svelte</a></li><li><a class=" " href="/guides/vue/">Vue</a></li></ul></menu><menu class="my-0 mx-5"><h3>advanced</h3><ul><li><a class=" " href="/guides/route-interactions/">Route Interactions</a></li><li><a class=" " href="/guides/side-effects/">Side Effects</a></li><li><a class=" " href="/guides/code-splitting/">Code Splitting</a></li><li><a class=" " href="/guides/loading/">Loading Route Data</a></li><li><a class=" " href="/guides/ssr/">Server-Side Rendering</a></li><li><a class=" " href="/guides/apollo/">Apollo Integration</a></li></ul></menu></ul></div></li><li class="p-0 pr-2 pl-0" aria-haspopup="true"><a class=" text-gray-100 text-xl no-underline h-10 flex items-center px-2 border-0 border-b-2 border-purple hover:text-bright-orange " href="/tutorial/">Tutorials</a><div class="hidden absolute w-screen left-0 text-purple border-0 border-b-2 border-purple"><ul class="flex flex-row flex-no-wrap justify-start bg-light-blue list-none m-0 p-0"><menu class="my-0 mx-5"><h3>Basic</h3><ul><li><a class=" " href="/tutorial/react-basics/">React Basics</a></li><li><a class=" " href="/tutorial/vue-basics/">Vue Basics</a></li></ul></menu><menu class="my-0 mx-5"><h3>Advanced</h3><ul><li><a class=" " href="/tutorial/react-advanced/">React Advanced</a></li></ul></menu></ul></div></li><li class="p-0 pr-2 pl-0" aria-haspopup="true"><a class=" text-gray-100 text-xl no-underline h-10 flex items-center px-2 border-0 border-b-2 border-purple hover:text-bright-orange " href="/examples/">Examples</a><div class="hidden absolute w-screen left-0 text-purple border-0 border-b-2 border-purple"><ul class="flex flex-row flex-no-wrap justify-start bg-light-blue list-none m-0 p-0"><menu class="my-0 mx-5"><ul style="margin:0 25px"><li><a class=" " href="/examples/basic/">Basic</a></li><li><a class=" " href="/examples/accessibility/">Focus Management</a></li><li><a class=" " href="/examples/active/">Active Routes</a></li><li><a class=" " href="/examples/async/">Async Routes &amp; Navigation</a></li><li><a class=" " href="/examples/breadcrumbs/">Breadcrumbs</a></li><li><a class=" " href="/examples/confirmation/">Navigation Confirmation</a></li><li><a class=" " href="/examples/redirects/">Redirects</a></li><li><a class=" " href="/examples/multi-body/">Multiple Body Components</a></li><li><a class=" " href="/examples/transitions/">Route Transitions</a></li><li><a class=" " href="/examples/modal/">Modal Content</a></li><li><a class=" " href="/examples/spotify/">Spotify Clone</a></li><li><a class=" " href="/examples/twitch/">Twitch Clone</a></li><li><a class=" " href="/examples/code-splitting/">Code Splitting</a></li><li><a class=" " href="/examples/script-tags/">Script Tags</a></li><li><a class=" " href="/examples/server-rendering/">Server Rendering</a></li><li><a class=" " href="/examples/side-effects/">Side Effects</a></li></ul></menu></ul></div></li><li class="p-0 pr-2 pl-0"><a class="text-gray-100 text-xl no-underline h-10 flex items-center px-2 border-0 border-b-2 border-purple hover:text-bright-orange" href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></header><menu class="fixed w-screen h-8 left-0 bottom-0 flex flex-row flex-no-wrap justify-between z-50"><button class="h-8 flex-grow text-xl border-0 bg-button-green md:hidden">Menu</button></menu><menu hidden="" class=" fixed overflow-y-scroll w-screen h-screen bg-gray-100 z-40 p-0 pb-10 md:hidden"><div data-reach-tabs=""><div data-reach-tab-list="" role="tablist"><button data-reach-tab="" role="tab" id="tab:null:0" tabindex="0" aria-selected="true" aria-controls="panel:null:0" data-selected="">Main</button><button data-reach-tab="" role="tab" id="tab:null:1" tabindex="-1" aria-selected="false" aria-controls="panel:null:1">Page</button></div><div data-reach-tab-panels="" class="py-0 px-3"><div data-reach-tab-panel="" role="tabpanel" tabindex="-1" aria-labelledby="tab:null:0" id="panel:null:0"><ul class="my-1 mx-0 p-0 list-none"><li><a class=" home-link" href="/">Curi</a></li><li><ul><li class="mb-3"><button title="Toggle group visibility" class="cursor-pointer text-left w-full bg-transparent border-0 p-0 text-purple"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg" class="inline-block"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>API</button></li></ul></li><li><ul><li class="mb-3"><button title="Toggle group visibility" class="cursor-pointer text-left w-full bg-transparent border-0 p-0 text-purple"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg" class="inline-block"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>Guides</button></li></ul></li><li><ul><li class="mb-3"><button title="Toggle group visibility" class="cursor-pointer text-left w-full bg-transparent border-0 p-0 text-purple"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg" class="inline-block"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>Tutorials</button></li></ul></li><li><ul><li class="mb-3"><button title="Toggle group visibility" class="cursor-pointer text-left w-full bg-transparent border-0 p-0 text-purple"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg" class="inline-block"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>Examples</button></li></ul></li><li><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></div><div data-reach-tab-panel="" role="tabpanel" tabindex="-1" aria-labelledby="tab:null:1" hidden="" id="panel:null:1"><menu class="max-w-full p-0 m-0"><ol class="my-1 mx-0 p-0 list-none p-0"><li><a class="no-underline" href="#response-properties">The Properties of a Response Object</a></li><li><a class="no-underline" href="#response-body">Response Body</a></li><li><a class="no-underline" href="#redirect-properties">Redirect Response</a></li></ol></menu></div></div></div></menu><main tabindex="-1" class="w-screen max-w-full pt-3 px-3 pb-0 mb-10 md:pt-10 md:px-0 md:mb-0"><div class="relative md:flex md:flex-row md:flex-no-wrap md:max-w-full"><div class="hidden md:block md:w-64 md:bg-gray-100 md:fixed md:bottom-0 md:overflow-auto md:flex-grow-0 md:flex-shrink-0 md:p-6 md:mr-6" style="top:2rem"><menu class="max-w-full p-0 m-0"><ol class="my-1 mx-0 p-0 list-none p-0"><li><a class="no-underline" href="#response-properties">The Properties of a Response Object</a></li><li><a class="no-underline" href="#response-body">Response Body</a></li><li><a class="no-underline" href="#redirect-properties">Redirect Response</a></li></ol></menu></div><article class="md:ml-64 md:pl-8"><section class="mt-3 md:max-w-2xl "><h1 class="outline-none" tabindex="-1">Responses</h1><p class="m-0 mb-4 text-base md:text-lg ">When Curi receives a location, it compares the location&#x27;s<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">pathname</code> to each route&#x27;s <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">path</code> to find which one matches best and uses that route to create a response object.</p></section><section class="mt-3 md:max-w-2xl"><h2 id="response-properties" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#response-properties">The Properties of a Response Object</a></h2><p class="m-0 mb-4 text-base md:text-lg ">There are two types of response properties.</p><p class="m-0 mb-4 text-base md:text-lg ">The &quot;match&quot; properties are set based on the route that matches a location. A response always has these properties.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">// match properties
{
  // The location object used to generate the response.
  location: { pathname: &#x27;/photos/6789/12345&#x27;, ... },

  // The name of the best matching route
  name: &#x27;Photo&#x27;,

  // The name of ancestor routes that matched
  // part of the location&#x27;s pathname
  partials: [&#x27;Album&#x27;],

  // An object containing the values parsed
  // from the pathname by path-to-regexp.
  // This includes params from ancestor routes.
  params: { photoID: 12345, albumID: 6789 },
}</code></pre></figure><p class="m-0 mb-4 text-base md:text-lg ">The &quot;settable&quot; properties are ones that are added by a matched route&#x27;s<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">respond</code> function. These only exist on the response when they are returned by a route&#x27;s <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">respond</code> function.</p><p class="m-0 mb-4 text-base md:text-lg ">The &quot;settable&quot; properties are:</p><section class="mt-3 md:max-w-2xl"><h3 id="settable-body" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#settable-body">body</a></h3><p class="m-0 mb-4 text-base md:text-lg ">The component(s) that should be rendered for a route.</p></section><section class="mt-3 md:max-w-2xl"><h3 id="settable-meta" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#settable-meta">meta</a></h3><p class="m-0 mb-4 text-base md:text-lg ">An object with metadata for a response.</p></section><section class="mt-3 md:max-w-2xl"><h3 id="settable-data" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#settable-data">data</a></h3><p class="m-0 mb-4 text-base md:text-lg ">A place to attach any data you want to the response, such as data loaded in the route&#x27;s <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolve</code> function.</p></section><section class="mt-3 md:max-w-2xl"><h3 id="settable-redirect" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#settable-redirect">redirect</a></h3><p class="m-0 mb-4 text-base md:text-lg ">An object describing a route that Curi should automatically redirect to.</p></section><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">// settable properties (optional)
{
  body: Photo,
  // or maybe
  body: {
    menu: PhotoMenu,
    main: Photo
  },
  // Please see below for more information
  // about this property

  meta: {
    status: 200,
    title: &#x27;Photo 12345&#x27;
  },

  data: {...},

  redirect: {...}
}</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h2 id="response-body" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#response-body">Response Body</a></h2><p class="m-0 mb-4 text-base md:text-lg ">Curi isn&#x27;t strict about how you use responses, but you will most likely always want to use a route&#x27;s <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">respond</code> function to attach a <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">body</code> property to a response. The usual pattern is to use a route&#x27;s <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">body</code> property to describe which component(s) to render when a route matches. This can either be a single component for basic layouts or an object with a number of components for<!-- --> <a href="/examples/multi-body/">advanced layouts</a>.</p><aside class="py-2 px-1 my-1 mx-0 border-gray-300 bg-gray-200"><strong>Note:</strong> <p class="m-0 mb-4 text-base md:text-lg ">Each route should use the same <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">body</code> &quot;shape&quot;. If one route returns a single component while another route return an object, you will be making rendering more complicated for yourself.</p></aside><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">// do NOT do this
// mixing body shapes complicates rendering
let routes = prepareRoutes([
  {
    respond() {
      return { body: One }
    }
  },
  {
    respond() {
      return {
        body: {
          main: Main,
          menu: Menu
        }
      }
    }
  }
]);</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h2 id="redirect-properties" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#redirect-properties">Redirect Response</a></h2><p class="m-0 mb-4 text-base md:text-lg ">When a route&#x27;s <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">respond</code> function returns an object with a<!-- --> <a href="/v2/@curi/router/#response"><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">redirect</code> property</a>, the router will use it to generate a location object that Curi will automatically redirect to.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">{
  // The redirect property provides information on
  // where you should redirect to
  redirect: { name: &quot;Login&quot; }
}</code></pre></figure><p class="m-0 mb-4 text-base md:text-lg ">When creating a router, you can set the <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">invisibleRedirects</code> <!-- -->option to <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">true</code> and the response will not be sent to observers and one time functions. Instead, the response for the location that is redirected to will be the next emitted response. In either case, the router will automatically redirect to the route specified by <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">response.redirect</code>.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">let router = createRouter(browser, routes, {
  invisibleRedirects: true
});</code></pre></figure><p class="m-0 mb-4 text-base md:text-lg ">This property can also be used to specify an external redirect (a redirect to a location that is not within the application). This is done by setting an <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">externalURL</code> property on the<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">redirect</code> object. It is up to the application to redirect to the external location. Responses with an external redirect will be emitted when <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">invisibleRedirects</code> is <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">true</code>.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">// a route with an external redirect
{
  respond() {
    return {
      redirect: {
        externalURL: &quot;https://example.com&quot;
      }
    };
  }
}

// a route observe can detect and automatically redirect
router.observe(({ response }) =&gt; {
  if (response.redirect &amp;&amp; response.redirect.externalURL) {
    window.location.replace(response.redirect.externalURL);
  }
})</code></pre></figure></section></article></div></main></div>
    <script src="https://unpkg.com/react@16.13.1/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.13.1/umd/react-dom.production.min.js"></script>
    <script src="/static/js/highlight.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
