<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>React Router v4 Guide | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/prism.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><style data-emotion-css="bg7vvq">body{font-family:"Zilla Slab",serif;font-weight:300;font-size:24px;line-height:36px;margin:0;box-sizing:border-box;}@media only screen and (min-width:751px){body{font-size:20px;}}@media only screen and (min-width:){body{font-size:20px;}}*,*:before,*:after{box-sizing:inherit;}h1,h2,h3,h4,h5,h6{font-weight:normal;margin:5px 0;}p{margin:5px 0;}h1{font-size:1.75em;}h2{font-size:1.5em;}h3{font-size:1.25em;}h4{font-size:1.2em;}h5{font-size:1.1em;}h6{font-size:1em;}table,th,td{border:1px solid #c7c7c7;border-collapse:collapse;}table{margin-bottom:10px;}th{text-align:left;}th,td{padding:10px;}pre[class*="language-"]{margin:0;background:#222233;}:not(pre) > code[class*="language-"]{white-space:nowrap;}</style><style data-emotion-css="137i3vd">.css-137i3vd{display:none;}@media only screen and (min-width:751px){.css-137i3vd{display:block;width:100vw;max-width:100%;background:#222233;padding:0;position:fixed;z-index:1;}.css-137i3vd #home-link{font-size:1.5em;color:#ff9800;}}</style><header class="css-137i3vd e132noc00"><style data-emotion-css="1j4n5ho">.css-1j4n5ho{color:#efefef;}.css-1j4n5ho li{margin-right:20px;padding:0;}.css-1j4n5ho li.base > a{color:#efefef;font-size:1.1em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:50px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:3px solid #222233;padding:0 5px;}.css-1j4n5ho li.base > a:hover{color:#ff9800;}.css-1j4n5ho li.base > a.active{color:#ff9800;border-bottom-color:#ff9800;}.css-1j4n5ho li.base > a.activated{color:#2196f3;border-bottom-color:#2196f3;}.css-1j4n5ho a{-webkit-text-decoration:none;text-decoration:none;}</style><nav class="css-1j4n5ho e132noc02"><style data-emotion-css="192aemx">.css-192aemx{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;list-style:none;padding:0;margin:0;max-width:100%;}</style><ul class="css-192aemx e132noc01"><li class="base"><a id="home-link" class=" " href="/">Curi</a></li><li class="base"><a data-hide="false" class="group " href="/packages/">API</a><style data-emotion-css="1une8gv">.css-1une8gv{display:none;position:absolute;left:0;width:100vw;background:#deeffe;color:#222233;border-bottom:2px solid #222233;}.css-1une8gv.active{display:block;}.css-1une8gv a{color:#222233;-webkit-text-decoration:none;text-decoration:none;}.css-1une8gv ul{list-style:none;margin:0;padding:0;}</style><div class=" css-1une8gv erw5yql0"><style data-emotion-css="qh5xse">.css-qh5xse{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;}</style><div class="css-qh5xse erw5yql1"><div><h3>router</h3><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/router/v1/">router</a></li></ul></div><div><h3>render</h3><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/react-dom/v1/">react-dom</a></li><li class="solo"><a class=" " href="/packages/@curi/react-native/v1/">react-native</a></li><li class="solo"><a class=" " href="/packages/@curi/svelte/v1/">svelte</a></li><li class="solo"><a class=" " href="/packages/@curi/vue/v1/">vue</a></li></ul></div><div><h3>route interactions</h3><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/route-active/v1/">route-active</a></li><li class="solo"><a class=" " href="/packages/@curi/route-ancestors/v1/">route-ancestors</a></li><li class="solo"><a class=" " href="/packages/@curi/route-prefetch/v1/">route-prefetch</a></li></ul></div><div><h3>side effects</h3><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/side-effect-aria-live/v1/">side-effect-aria-live</a></li><li class="solo"><a class=" " href="/packages/@curi/side-effect-scroll/v1/">side-effect-scroll</a></li><li class="solo"><a class=" " href="/packages/@curi/side-effect-title/v1/">side-effect-title</a></li></ul></div><div><h3>other</h3><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/static/v1/">static</a></li><li class="solo"><a class=" " href="/packages/@curi/helpers/v1/">helpers</a></li></ul></div></div></div></li><li class="base"><a data-hide="false" class="group active" href="/guides/">Guides</a><div class=" css-1une8gv erw5yql0"><div class="css-qh5xse erw5yql1"><div><h3>basic</h3><ul class="link-list"><li class="solo"><a class=" " href="/guides/installation/">Installation</a></li><li class="solo"><a class=" " href="/guides/getting-started/">Getting Started</a></li><li class="solo"><a class=" " href="/guides/history/">History</a></li><li class="solo"><a class=" " href="/guides/routes/">Routes</a></li><li class="solo"><a class=" " href="/guides/responses/">Responses</a></li><li class="solo"><a class=" " href="/guides/sync-or-async/">Sync or Async</a></li><li class="solo"><a class=" " href="/guides/new-responses/">New Responses</a></li></ul></div><div><h3>rendering</h3><ul class="link-list"><li class="solo"><a class=" " href="/guides/react-dom/">React DOM</a></li><li class="solo"><a class=" " href="/guides/react-native/">React Native</a></li><li class="solo"><a class=" " href="/guides/svelte/">Svelte</a></li><li class="solo"><a class=" " href="/guides/vue/">Vue</a></li></ul></div><div><h3>advanced</h3><ul class="link-list"><li class="solo"><a class=" " href="/guides/route-interactions/">Route Interactions</a></li><li class="solo"><a class=" " href="/guides/side-effects/">Side Effects</a></li><li class="solo"><a class=" " href="/guides/code-splitting/">Code Splitting</a></li><li class="solo"><a class=" " href="/guides/loading/">Loading Route Data</a></li><li class="solo"><a class=" " href="/guides/ssr/">Server-Side Rendering</a></li><li class="solo"><a class=" " href="/guides/accessibility/">Accessibility</a></li><li class="solo"><a class=" " href="/guides/apollo/">Apollo Integration</a></li><li class="solo"><a class=" " href="/guides/dev-tips/">Development Tips</a></li></ul></div><div><h3>migration</h3><ul class="link-list"><li class="solo"><a class=" " href="/guides/migrate-rrv3/">React Router v2/3</a></li><li class="solo"><a class=" active" href="/guides/migrate-rrv4/">React Router v4</a></li></ul></div></div></div></li><li class="base"><a data-hide="false" class="group " href="/tutorial/">Tutorials</a><div class=" css-1une8gv erw5yql0"><div class="css-qh5xse erw5yql1"><div><h3>Basic</h3><ul class="link-list"><li class="solo"><a class=" " href="/tutorial/react-basics/">React Basics</a></li><li class="solo"><a class=" " href="/tutorial/vue-basics/">Vue Basics</a></li></ul></div><div><h3>Advanced</h3><ul class="link-list"><li class="solo"><a class=" " href="/tutorial/react-advanced/">React Advanced</a></li></ul></div></div></div></li><li class="base"><a data-hide="false" class="group " href="/examples/">Examples</a><div class=" css-1une8gv erw5yql0"><div class="css-qh5xse erw5yql1"><div><h3>react</h3><ul class="link-list"><li class="solo"><a class=" " href="/examples/react/basic/">Basic</a></li><li class="solo"><a class=" " href="/examples/react/active-links/">Active Links</a></li><li class="solo"><a class=" " href="/examples/react/accessibility/">Accessibility</a></li><li class="solo"><a class=" " href="/examples/react/redirects/">Redirects</a></li><li class="solo"><a class=" " href="/examples/react/breadcrumbs/">Breadcrumbs</a></li><li class="solo"><a class=" " href="/examples/react/async-nav/">Async Navigation</a></li><li class="solo"><a class=" " href="/examples/react/multi-body/">Multiple Body Components</a></li><li class="solo"><a class=" " href="/examples/react/transitions/">Transitions</a></li><li class="solo"><a class=" " href="/examples/react/blocking-navigation/">Blocking Navigation</a></li><li class="solo"><a class=" " href="/examples/react/modal/">Modal Routes</a></li></ul></div><div><h3>vue</h3><ul class="link-list"><li class="solo"><a class=" " href="/examples/vue/basic/">Basic</a></li><li class="solo"><a class=" " href="/examples/vue/active-links/">Active Links</a></li><li class="solo"><a class=" " href="/examples/vue/accessibility/">Accessibility</a></li><li class="solo"><a class=" " href="/examples/vue/redirects/">Redirects</a></li><li class="solo"><a class=" " href="/examples/vue/breadcrumbs/">Breadcrumbs</a></li><li class="solo"><a class=" " href="/examples/vue/async-nav/">Async Navigation</a></li><li class="solo"><a class=" " href="/examples/vue/transitions/">Transitions</a></li><li class="solo"><a class=" " href="/examples/vue/blocking-navigation/">Blocking Navigation</a></li><li class="solo"><a class=" " href="/examples/vue/modal/">Modal Routes</a></li></ul></div><div><h3>svelte</h3><ul class="link-list"><li class="solo"><a class=" " href="/examples/svelte/basic/">Basic</a></li><li class="solo"><a class=" " href="/examples/svelte/active-links/">Active Links</a></li><li class="solo"><a class=" " href="/examples/svelte/redirects/">Redirects</a></li><li class="solo"><a class=" " href="/examples/svelte/breadcrumbs/">Breadcrumbs</a></li><li class="solo"><a class=" " href="/examples/svelte/async-nav/">Async Navigation</a></li></ul></div><div><h3>misc</h3><ul class="link-list"><li class="solo"><a class=" " href="/examples/misc/code-splitting/">Code Splitting</a></li><li class="solo"><a class=" " href="/examples/misc/script-tags/">Script Tags</a></li><li class="solo"><a class=" " href="/examples/misc/server-rendering/">Server Rendering</a></li><li class="solo"><a class=" " href="/examples/misc/side-effect/">Side Effects</a></li></ul></div></div></div></li><li class="base"><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></header><style data-emotion-css="bupcgl">.css-bupcgl{position:fixed;right:15px;bottom:15px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column-reverse;-ms-flex-flow:column-reverse;flex-flow:column-reverse;z-index:9999;}</style><div class="css-bupcgl e18ecyrg1"><style data-emotion-css="8wphu1">.css-8wphu1{width:75px;height:75px;border-radius:40px;border:0;margin-top:10px;font-size:1em;font-family:"Zilla Slab",serif;background:#2196f3;}@media only screen and (min-width:751px){.css-8wphu1{display:none;}}</style><button type="button" class="toggler css-8wphu1 e1105ass0">Menu</button><style data-emotion-css="4pglcz">.css-4pglcz{width:75px;height:75px;border-radius:40px;border:0;margin-top:10px;font-size:1em;font-family:"Zilla Slab",serif;background:#c7c7c7;}@media only screen and (min-width:751px){.css-4pglcz{display:none;}}.css-4pglcz.active{background:#81c784;}</style><button hidden="" class="false active main css-4pglcz e1105ass1">Main</button><button hidden="" class="false false page css-4pglcz e1105ass1">Page</button></div><style data-emotion-css="b9kg8f">.css-b9kg8f{display:none;position:fixed;overflow-y:scroll;width:100vw;height:100vh;background:#efefef;z-index:999;padding:15px;}.css-b9kg8f.visible{display:block;}.css-b9kg8f ul{margin:3px 0;padding-left:0px;list-style:none;}.css-b9kg8f li{margin:3px 0;}.css-b9kg8f a{-webkit-text-decoration:none;text-decoration:none;display:inline-block;color:#222233;}.css-b9kg8f h3{border-bottom:1px solid #333;}.css-b9kg8f .active{font-weight:bold;}.css-b9kg8f .children{display:none;background:#efefef;padding:10px;}.css-b9kg8f .children.visible{display:block;position:fixed;top:0;bottom:0;left:0;right:0;overflow-y:scroll;}@media only screen and (min-width:751px){.css-b9kg8f{display:none;}.css-b9kg8f.visible{display:none;}}</style><div hidden="" class=" css-b9kg8f e18ecyrg0"><nav><ul><li><a class="home-link " href="/">Curi</a></li><li><style data-emotion-css="eh8tip">.css-eh8tip a{color:#222233;}.css-eh8tip ul{margin-left:10px;}.css-eh8tip > li{margin-bottom:15px;}</style><ul class="css-eh8tip e11f272a0"><li><div><style data-emotion-css="12lsm47">.css-12lsm47{cursor:pointer;font-size:24px;font-family:"Zilla Slab",serif;text-align:left;width:100%;background:none;border:0;padding:0;color:#222233;}</style><button title="Toggle group visibility" class="css-12lsm47 e11f272a1"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>API</button></div></li></ul></li><li><ul class="css-eh8tip e11f272a0"><li><div><button title="Toggle group visibility" class="css-12lsm47 e11f272a1"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>Guides</button></div></li></ul></li><li><ul class="css-eh8tip e11f272a0"><li><div><button title="Toggle group visibility" class="css-12lsm47 e11f272a1"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>Tutorials</button></div></li></ul></li><li><ul class="css-eh8tip e11f272a0"><li><div><button title="Toggle group visibility" class="css-12lsm47 e11f272a1"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>Examples</button></div></li></ul></li><li><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></div><style data-emotion-css="89bx5e">.css-89bx5e{width:100vw;max-width:100%;padding:10px 10px 0;margin-bottom:20px;}.css-89bx5e a{color:#222233;}@media only screen and (min-width:751px){.css-89bx5e{padding:50px 0 0;margin-bottom:0;}}</style><main tabindex="-1" style="outline:none" class="css-89bx5e e1fl12nk0"><style data-emotion-css="csv88t">.css-csv88t{position:relative;}@media only screen and (min-width:751px){.css-csv88t{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;}}@media only screen and (min-width:751px){.css-csv88t{max-width:100vw;}}</style><div class="css-csv88t e1hcridg0"><style data-emotion-css="q1fc1d">@media only screen and (min-width:751px){.css-q1fc1d{margin-left:275px;}}</style><div class="css-q1fc1d e1hcridg1"><style data-emotion-css="1l1nc79">.css-1l1nc79{margin-top:15px;}.css-1l1nc79 p{margin:0 0 25px;font-size:0.8em;}.css-1l1nc79 .aside{padding:5px 10px;border-left:2px solid $border-green;background:#e8f5e9;margin-top:15px;}.css-1l1nc79 .aside .inline-code{background:#81c784 !important;}@media only screen and (min-width:751px){.css-1l1nc79{max-width:751px;}.css-1l1nc79 p{font-size:1em;}.css-1l1nc79.centered{margin:0 auto;}}</style><div class="section css-1l1nc79"><h1>React Router v4</h1><p>React Router v4 isn&#x27;t like most other routers because it lacks a centralized configuration. Migrating to Curi mostly involves re-centralizing your routes to simplify route management.</p></div><style data-emotion-css="1qgx73a">.css-1qgx73a{margin-top:15px;}.css-1qgx73a p{margin:0 0 25px;font-size:0.8em;}.css-1qgx73a .aside{padding:5px 10px;border-left:2px solid $border-green;background:#e8f5e9;margin-top:15px;}.css-1qgx73a .aside .inline-code{background:#81c784 !important;}@media only screen and (min-width:751px){.css-1qgx73a{max-width:751px;}.css-1qgx73a p{font-size:1em;}.css-1qgx73a.centered{margin:0 auto;}}.css-1qgx73a .header-link{-webkit-text-decoration:none;text-decoration:none;}.css-1qgx73a .header-link::after{content:"#";color:#333;margin-left:5px;}@media only screen and (min-width:751px){.css-1qgx73a p{font-size:1em;}.css-1qgx73a .header-link::after{display:none;}.css-1qgx73a .header-link:hover::after{display:inline-block;}.css-1qgx73a .displaced-header:before{content:"";display:block;margin-top:-50px;height:50px;visibility:hidden;}}</style><div class="section css-1qgx73a" id="routes"><h2 class="displaced-header"><a class="header-link" href="#routes">Routes</a></h2><p>Let’s get started with setting up our routes.</p><div class="section css-1qgx73a" id="routes-with-react-router"><h3 class="displaced-header"><a class="header-link" href="#routes-with-react-router">With React Router</a></h3><p>With React Router v4, <style data-emotion-css="jo5c25">.css-jo5c25{padding:0.1em;border-radius:0.3em;white-space:normal;background:#fff;color:#222233;text-shadow:none;white-space:wrap;}.css-jo5c25 .token{color:#222233;}</style><code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Route<!-- -->&gt;</code>s are defined in components. They are usually grouped together under a <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Switch<!-- -->&gt;</code> so that only a single route from a group renders. Nested routes are rendered inside of the compnent rendered by the parent <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Route<!-- -->&gt;</code></p><style data-emotion-css="xg7t84">.css-xg7t84{width:100%;margin:0 0 25px;font-size:0.8em;}.css-xg7t84 pre{white-space:pre-wrap;height:100%;vertical-align:top;}@media only screen and (min-width:751px){.css-xg7t84{font-size:1em;}.css-xg7t84 code{min-width:200px;white-space:pre-wrap;}}</style><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">import { Route, Switch } from &quot;react-router-dom&quot;;
            
const App = () =&gt; (
  &lt;Switch&gt;
    &lt;Route exact path=&quot;/&quot; component={Home} /&gt;
    &lt;Route path=&quot;/inbox&quot; component={Inbox} /&gt;
  &lt;/Switch&gt;                 
);

// the &lt;Inbox&gt; matches nested routes (and includes
// a &lt;Route&gt; for &quot;exact&quot; /inbox matches)
const Inbox = ({ match }) =&gt; (
  &lt;Switch&gt;
    &lt;Route
      exact
      path={match.path}
      component={Messages}
    /&gt;
    &lt;Route
      exact
      path={`${match.path}/:message`}
      component={Message}
    /&gt;
  &lt;/Switch&gt;
);</code></pre></div></div><div class="section css-1qgx73a" id="routes-with-curi"><h3 class="displaced-header"><a class="header-link" href="#routes-with-curi">With Curi</a></h3><p>Routes in Curi are JavaScript objects. They are grouped together in an array of &quot;top-level&quot; routes. Nested routes are grouped under their parent route&#x27;s <code class="inline-code css-jo5c25 eutm4hs0">children</code> property.</p><p>First, we will define the names and paths for our routes.</p><p>Each route must have a unique name. A route&#x27;s name will be used for interacting with it. For example, to navigate to a route, you only have to know its name, not its URL.</p><p>The biggest difference between the Curi paths and the React Router paths is that with Curi, you never include a forward slash at the beginning of the path. This means that while the root path for React Router is <code class="inline-code css-jo5c25 eutm4hs0">&#x27;/&#x27;</code>, the root path for Curi is <code class="inline-code css-jo5c25 eutm4hs0">&#x27;&#x27;</code>.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">const routes = prepareRoutes([
  {
    name: &#x27;Home&#x27;,
    path: &#x27;&#x27;
  },
  {
    name: &#x27;Inbox&#x27;,
    path: &#x27;inbox&#x27;,
    children: [
      {
        name: &#x27;Message&#x27;,
        path: &#x27;:message&#x27;
      }
    ]
  }
]);</code></pre></div><p>Next, we should add our components to each route.</p><p>Curi routes can have a <code class="inline-code css-jo5c25 eutm4hs0">response()</code> property, which is a function that returns an object of properties to merge onto the response that we will be using to render. For this React application, we want a response&#x27;s <code class="inline-code css-jo5c25 eutm4hs0">body</code> property to be the React component associated with each route.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">import { prepareRoutes } from &quot;@curi/router&quot;;
            
import Home from &#x27;./pages/Home&#x27;;
import Inbox from &#x27;./pages/Inbox&#x27;;
import Mesage from &#x27;./pages/Message&#x27;;

const routes = prepareRoutes([
  {
    name: &#x27;Home&#x27;,
    path: &#x27;&#x27;,
    response: () =&gt; {
      return {
        body: Home
      };
    }
  },
  {
    name: &#x27;Inbox&#x27;,
    path: &#x27;inbox&#x27;,
    response: () =&gt; {
      return {
        body: Inbox
      };
    },
    children: [
      {
        name: &#x27;Message&#x27;,
        path: &#x27;:message&#x27;,
        response: () =&gt; {
          return {
            body: Message
          };
        }
      }
    ]
  }
]);</code></pre></div><p>With React Router v4, a component&#x27;s lifecycle methods are used for loading data, code splitting, and other non-rendering tasks. With Curi, routes can have functions that are called when they match the new location. These are grouped under the route&#x27;s <code class="inline-code css-jo5c25 eutm4hs0">resolve</code> <!-- -->object. The <code class="inline-code css-jo5c25 eutm4hs0">resolve</code> functions are called every time that a route matches a location.</p><p>The<!-- --> <a href="/packages/@curi/router/v1/#route-properties"><code class="inline-code css-jo5c25 eutm4hs0">@curi/router</code> route API documentation</a> <!-- -->covers all of the route properties.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">const routes = prepareRoutes([
  {
    path: &#x27;&#x27;,
    response: () =&gt; {
      return {
        body: Home
      };
    }
  },
  {
    path: &#x27;inbox&#x27;,
    response: () =&gt; {
      return {
        body: Inbox
      };
    },
    children: [
      {
        path: &#x27;:message&#x27;,
        response: () =&gt; {
          return {
            body: Message
          };
        },
        resolve: {
          body: (route) =&gt; { return ... },
        }
      }
    ]
  }
]);</code></pre></div></div><p>Once your routes have been defined, you can move on to creating your Curi router.</p></div><div class="section css-1qgx73a" id="creating-the-router"><h2 class="displaced-header"><a class="header-link" href="#creating-the-router">Creating the router</a></h2><p>With React Router, you create your router by rendering a<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Router<!-- -->&gt;</code> component. This may be a <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->BrowserRouter<!-- -->&gt;</code>, a<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->HashRouter<!-- -->&gt;</code>, a <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->MemoryRouter<!-- -->&gt;</code>, or a plain<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Router<!-- -->&gt;</code> that you pass your own <code class="inline-code css-jo5c25 eutm4hs0">history</code> instance to. The <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->___Router<!-- -->&gt;</code> components create a <code class="inline-code css-jo5c25 eutm4hs0">history</code> <!-- -->instance for you using props passed to the component.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">import { BrowserRouter } from &#x27;react-router-dom&#x27;;

ReactDOM.render((
  &lt;BrowserRouter&gt;
    &lt;App /&gt;
  &lt;/BrowserRouter&gt;
), holder);</code></pre></div><p>With Curi, the router is created prior to rendering. It takes a Hickory history object, your routes array, and possibly an options object. <a href="https://github.com/pshrmn/hickory">Hickory</a> is similar to the <code class="inline-code css-jo5c25 eutm4hs0">history</code> package used by React Router, but has a slight modified API (easier navigation blocking and navigation that imitates how anchors work) and more convenient location objects (you can use a <code class="inline-code css-jo5c25 eutm4hs0">query</code> object instead of having to manually create a <code class="inline-code css-jo5c25 eutm4hs0">search</code> string).</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">import { curi, prepareRoutes } from &#x27;@curi/router&#x27;;
import Browser from &#x27;@hickory/browser&#x27;;
const history = Browser();
const routes = prepareRoutes([...]);
const router = curi(history, routes);</code></pre></div></div><div class="section css-1qgx73a" id="rendering"><h2 class="displaced-header"><a class="header-link" href="#rendering">Rendering</a></h2><p>We will walk through the rendering differences between React Router and Curi by looking at what happens in each when we navigate to the URL with the pathname <code class="inline-code css-jo5c25 eutm4hs0">/inbox/test</code>.</p><div class="section css-1qgx73a" id="rendering-react-router"><h3 class="displaced-header"><a class="header-link" href="#rendering-react-router">React Router</a></h3><p>React Router matches routes while it renders. It uses the<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Router<!-- -->&gt;</code> component to listen for location changes. Each time that the location changes, the application re-renders.</p><p>The <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Switch<!-- -->&gt;</code> will iterate over its children<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Route<!-- -->&gt;</code>s. The first route, <code class="inline-code css-jo5c25 eutm4hs0">&quot;/&quot;</code> has an<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">exact</code> prop, so it only matches when the pathname is<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&quot;/&quot;</code>. Since it is not, the next <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Route<!-- -->&gt;</code> will be checked. The next route, <code class="inline-code css-jo5c25 eutm4hs0">&quot;/inbox&quot;</code> matches the beginning of the pathname <code class="inline-code css-jo5c25 eutm4hs0">&quot;/inbox/test&quot;</code>. It is not an exact match, but that route does not do exact matching, so React Router will render its component, <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Inbox<!-- -->&gt;</code>.</p><p>The <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Inbox<!-- -->&gt;</code> has its own <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Switch<!-- -->&gt;</code> to iterate over. Its first route only matches <code class="inline-code css-jo5c25 eutm4hs0">&quot;/inbox&quot;</code> exactly, so it moves on to the next route, which has a <code class="inline-code css-jo5c25 eutm4hs0">message</code> route param. This route matches and stores<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&quot;test-message-please-ignore&quot;</code> as<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">match.params.message</code>. The <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Message<!-- -->&gt;</code> component will then be rendered, which has access to the <code class="inline-code css-jo5c25 eutm4hs0">message</code> <!-- -->param.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">ReactDOM.render((
  &lt;BrowserRouter&gt;
    &lt;App /&gt;
  &lt;/BrowserRouter&gt;
), holder);

const App = () =&gt; (
  &lt;Switch&gt;
    &lt;Route exact path=&quot;/&quot; component={Home} /&gt;
    &lt;Route path=&quot;/inbox&quot; component={Inbox} /&gt;
  &lt;/Switch&gt;                 
);

const Inbox = ({ match }) =&gt; (
  &lt;Switch&gt;
    &lt;Route
      exact
      path={match.path}
      component={Messages}
    /&gt;
    &lt;Route
      exact
      path={`${match.path}/:message`}
      component={Message}
    /&gt;
  &lt;/Switch&gt;
);

/*
&lt;BrowserRouter&gt;
  &lt;App&gt;
    &lt;Inbox&gt;
      &lt;Message&gt;
    &lt;/Inbox&gt;
  &lt;/App&gt;
&lt;/BrowserRouter&gt;
*/</code></pre></div></div><div class="section css-1qgx73a" id="rendering-with-curi"><h3 class="displaced-header"><a class="header-link" href="#rendering-with-curi">Curi</a></h3><p>With Curi, we also need to re-render our application every time that the location changes. We will do this by creating a root Curi component by calling the <code class="inline-code css-jo5c25 eutm4hs0">curiProvider()</code> function, which comes from the <code class="inline-code css-jo5c25 eutm4hs0">@curi/react-dom</code> package, and passing it our Curi router. While the name of this component is entirely up to you, we will refer to it as the <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Router<!-- -->&gt;</code> here.</p><p>The <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Router<!-- -->&gt;</code> will setup an observer on the provided router so that it can re-render your application whenever there is a new<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">response</code>. The <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Router<!-- -->&gt;</code> expects a function as its<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">children</code> prop (a render-invoked function). This function renders the application using the <code class="inline-code css-jo5c25 eutm4hs0">response</code>.</p><p>When the <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Router<!-- -->&gt;</code>&#x27;s <code class="inline-code css-jo5c25 eutm4hs0">children()</code> function is called, it will receive an object with three properties:</p><ol><li><code class="inline-code css-jo5c25 eutm4hs0">response</code> is the new response object</li><li><code class="inline-code css-jo5c25 eutm4hs0">navigation</code> is an object with additional information about the navigation</li><li><code class="inline-code css-jo5c25 eutm4hs0">router</code> is your Curi router (mostly useful if the function is defined in a separate file)</li></ol><p>Above, we added <code class="inline-code css-jo5c25 eutm4hs0">response()</code> functions to each route. The functions set React components as the <code class="inline-code css-jo5c25 eutm4hs0">body</code> property of responses. We can now use <code class="inline-code css-jo5c25 eutm4hs0">response.body</code> to render those components.</p><p>In the React Router HashSection, we had three components that were rendered: <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->App<!-- -->&gt;</code>,<code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Inbox<!-- -->&gt;</code>, and <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Message<!-- -->&gt;</code>. With Curi, only the most accurately matched route actually matches. That means that for the URL <code class="inline-code css-jo5c25 eutm4hs0">/inbox/test</code>, the<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&quot;Message&quot;</code> route will match, but its parent route,<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&quot;Inbox&quot;</code> will not, so <code class="inline-code css-jo5c25 eutm4hs0">response.body</code> will be the<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Message<!-- -->&gt;</code> component. Unlike React Router, we don’t render<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Inbox<!-- -->&gt;</code> because we did not match the <code class="inline-code css-jo5c25 eutm4hs0">inbox</code> <!-- -->route.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">import { curiProvider } from &quot;@curi/react-dom&quot;;

const router = curi(history, routes);            
const Router = curiProvider(router);

ReactDOM.render((
  &lt;Router&gt;
    {({ response }) =&gt; {
      const { body:Body } = response;
      return &lt;Body /&gt;;
    }}
  &lt;/Router&gt;
), holder);

/*
  &lt;Router&gt;
    &lt;Message /&gt;
  &lt;/Router&gt;
*/</code></pre></div><style data-emotion-css="mezw60">.css-mezw60{padding:10px 5px;margin:5px 0;background:#eeeeee;border:1px solid #c7c7c7;}.aside .css-mezw60{background:#fff;}.css-mezw60 .inline-code{background:#fff !important;}</style><div class="css-mezw60 e1bjkffy0"><strong>Note:</strong> <p>Wildcard routes (<code class="inline-code css-jo5c25 eutm4hs0">{ path: &#x27;(.*)&#x27; }</code>) can be used to easily display a not found page for any location not matched by other routes.</p></div><div class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">const routes = prepareRoutes([
  // ...,
  {
    name: &quot;Not Found&quot;,
    path: &quot;(.*)&quot;,
    response() {
      return { body: NotFound };
    }
  }
]);</code></pre></div><p>It was mentioned above that there is no need for the <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->App<!-- -->&gt;</code> <!-- -->component with Curi. If you want to have an <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->App<!-- -->&gt;</code> <!-- -->component, you can render it either inside of the<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">children()</code> function or as a parent of your<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Router<!-- -->&gt;</code>. This can be useful for rendering content that is unrelated to specific routes, like a page header or menu.</p><p>Rendering the <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->App<!-- -->&gt;</code> inside of the <code class="inline-code css-jo5c25 eutm4hs0">children()</code> <!-- -->function is necessary if any of the components rendered by the<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->App<!-- -->&gt;</code> are location aware components, since they need to access the Curi router (through React’s context, which the<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Router<!-- -->&gt;</code> provides)</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">function render({ response }) {
  const { body:Body } = response;
  return (
    &lt;App&gt;
      &lt;Body /&gt;
    &lt;/App&gt;
  );
}
// or
function render({ response }) {
  const { body:Body } = response;
  return (
    &lt;div&gt;
      &lt;Header /&gt;
      &lt;Body /&gt;
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
}</code></pre></div><p>What about props that you want to send to your route components? Pass them to the <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Body<!-- -->&gt;</code> component that you render. Props can be passed individually, but passing the whole<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">response</code> object is recommended.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">function render({ response }) {
  const { body:Body } = response;
  return &lt;Body response={response} /&gt;;
}</code></pre></div></div></div><div class="section css-1qgx73a" id="links"><h2 class="displaced-header"><a class="header-link" href="#links">Links</a></h2><p>You will want to be able to navigate between routes in your application. React Router provides a <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Link<!-- -->&gt;</code> component to do this, and so does Curi (through the <code class="inline-code css-jo5c25 eutm4hs0">@curi/react-dom</code> <!-- -->package). There are a few differences to note between these two components:</p><ul><li><p>React Router expects you to generate the pathname yourself, while Curi expects you to pass the name of the route that you want to navigate to. Any path parameters are passed to Curi’s<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Link<!-- -->&gt;</code> using the <code class="inline-code css-jo5c25 eutm4hs0">params</code> prop.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">// React Router
&lt;Link to=&#x27;/&#x27;&gt;Home&lt;/Link&gt;
&lt;Link to={`/inbox/${message}`}&gt;Hello&lt;/Link&gt;

// Curi
&lt;Link name=&#x27;Home&#x27;&gt;Home&lt;/Link&gt;
&lt;Link name=&#x27;Message&#x27; params={{ message }}&gt;Hello&lt;/Link&gt;</code></pre></div></li><li><p>With React Router, any additional location properties are passed to the <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Link<!-- -->&gt;</code> using the <code class="inline-code css-jo5c25 eutm4hs0">to</code> object. With Curi, these properties are passed using the prop name (<code class="inline-code css-jo5c25 eutm4hs0">hash</code>,<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">query</code> &amp;<code class="inline-code css-jo5c25 eutm4hs0">state</code>).</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">// React Router
&lt;Link to={{ pathname: &#x27;/inbox&#x27;, hash: &#x27;#test&#x27; }}&gt;
  Inbox
&lt;/Link&gt;

// Curi
&lt;Link name=&#x27;Inbox&#x27; hash=&#x27;test&#x27;&gt;Inbox&lt;/Link&gt;</code></pre></div></li><li><p>Active detection with Curi uses an <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Active<!-- -->&gt;</code> component.<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">&lt;<!-- -->Active<!-- -->&gt;</code>&#x27;s <code class="inline-code css-jo5c25 eutm4hs0">children</code> prop is a render-invoked function that receives a boolean <code class="inline-code css-jo5c25 eutm4hs0">true</code> when the named route is active and <code class="inline-code css-jo5c25 eutm4hs0">false</code> when it is not. You can also pass <code class="inline-code css-jo5c25 eutm4hs0">partial={true}</code> to partial matches (ancestor routes) be considered active (the opposite of React Router&#x27;s<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">onlyActiveOnIndex</code>).</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-jsx">// React Router
&lt;Link
  to=&#x27;/&#x27;
  onlyActiveOnIndex
  activeClassName=&#x27;active&#x27;
&gt;
  Home
&lt;/Link&gt;

// Curi
// You need to add @curi/route-active
// to your router object
import active from &#x27;@curi/route-active&#x27;;
const router = curi(history, routes, {
  route: [active()]
});

// The &lt;Active&gt; component determines if a route is active
// and passes true/false to the render-invoked children
// function
&lt;Active name=&quot;Home&quot;&gt;
  {active =&gt; (
    &lt;Link
      name=&#x27;Home&#x27;
      forward={{
        className: active ? &quot;active&quot; : &quot;&quot;
      }}
    &gt;Home&lt;/Link&gt;
  )}
&lt;/Active&gt;</code></pre></div></li></ul></div><div class="section css-1qgx73a" id="router-props"><h2 class="displaced-header"><a class="header-link" href="#router-props">Accessing router props from nested components</a></h2><p>React Router provides a <code class="inline-code css-jo5c25 eutm4hs0">withRouter</code> higher-order component that will inject router props into the wrapped component.</p><p>Curi provides similar functionality with the <code class="inline-code css-jo5c25 eutm4hs0">Curious</code> <!-- -->component.</p><p><code class="inline-code css-jo5c25 eutm4hs0">Curious</code> has a render-invoked <code class="inline-code css-jo5c25 eutm4hs0">children</code> function, which you can use to inject the Curi <code class="inline-code css-jo5c25 eutm4hs0">router</code>, the current<!-- --> <code class="inline-code css-jo5c25 eutm4hs0">response</code>, and the current <code class="inline-code css-jo5c25 eutm4hs0">navigation</code> object into components.</p><div class="css-xg7t84 e12etsbl0"><pre><code class="language-javascript">// React Router
export default withRouter(SomeComponent);

// Curi
export default () =&gt; (
  &lt;Curious&gt;
    {({ response }) =&gt; (
      &lt;SomeComponent response={response} /&gt;
    )}
  &lt;/Curious&gt;
);</code></pre></div></div><div class="section css-1l1nc79"><p>At this point, hopefully you are comfortable with migrating from React Router v4 to Curi. If there are any concepts not covered here that you think should be, please feel free to open up an issue<!-- --> <a href="https://github.com/pshrmn/curi/issues">on GitHub</a>.</p></div></div><style data-emotion-css="64fwtw">.css-64fwtw{display:none;}@media only screen and (min-width:751px){.css-64fwtw{background:#efefef;display:block;position:fixed;top:50px;bottom:0px;overflow:auto;-webkit-flex:0 0;-ms-flex:0 0;flex:0 0;-webkit-order:-1;-ms-flex-order:-1;order:-1;padding:25px;margin-right:25px;}}</style><div class="css-64fwtw e1hcridg2"><style data-emotion-css="1eimyfs">.css-1eimyfs{width:200px;}.css-1eimyfs p{margin:0;}.css-1eimyfs a{-webkit-text-decoration:none;text-decoration:none;display:block;}.css-1eimyfs ol{padding-left:0;margin-top:0;list-style-type:none;}.css-1eimyfs ol ol{padding-left:15px;font-size:0.9em;}</style><div class="css-1eimyfs e1evhjzy0"><ol><li><a href="#routes">Routes</a><ol><li><a href="#routes-with-react-router">With React Router</a></li><li><a href="#routes-with-curi">With Curi</a></li></ol></li><li><a href="#creating-the-router">Creating the router</a></li><li><a href="#rendering">Rendering</a><ol><li><a href="#rendering-react-router">React Router</a></li><li><a href="#rendering-with-curi">Curi</a></li></ol></li><li><a href="#links">Links</a></li><li><a href="#router-props">Accessing router props from nested components</a></li></ol></div></div></div></main></div>
    <script src="https://unpkg.com/react@16.6.3/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.6.3/umd/react-dom.production.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
