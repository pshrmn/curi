<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Route Interactions Guide | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/prism.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><style data-emotion-css="bg7vvq">body{font-family:"Zilla Slab",serif;font-weight:300;font-size:24px;line-height:36px;margin:0;box-sizing:border-box;}@media only screen and (min-width:751px){body{font-size:20px;}}@media only screen and (min-width:){body{font-size:20px;}}*,*:before,*:after{box-sizing:inherit;}h1,h2,h3,h4,h5,h6{font-weight:normal;margin:5px 0;}p{margin:5px 0;}h1{font-size:1.75em;}h2{font-size:1.5em;}h3{font-size:1.25em;}h4{font-size:1.2em;}h5{font-size:1.1em;}h6{font-size:1em;}table,th,td{border:1px solid #c7c7c7;border-collapse:collapse;}table{margin-bottom:10px;}th{text-align:left;}th,td{padding:10px;}pre[class*="language-"]{margin:0;background:#222233;}:not(pre) > code[class*="language-"]{white-space:nowrap;}</style><style data-emotion-css="1xrs380">.css-1xrs380{display:none;}@media only screen and (min-width:751px){.css-1xrs380{display:block;width:100vw;background:#222233;padding:0;position:fixed;z-index:1;}.css-1xrs380 .home-link{font-size:1.5em;color:#ff9800;}}</style><header class="css-1xrs380 e17onxz0"><style data-emotion-css="1exs64t">.css-1exs64t{width:751px;margin:0 auto;color:#efefef;}.css-1exs64t ul{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;list-style:none;padding:0;margin:0;max-width:100%;}.css-1exs64t li{margin-right:20px;padding:0;}.css-1exs64t a{color:#efefef;font-size:1.1em;-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:50px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:3px solid #222233;padding:0 5px;}.css-1exs64t a:hover{color:#ff9800;}.css-1exs64t a.active{color:#ff9800;border-bottom-color:#ff9800;}.css-1exs64t a.activated{color:#2196f3;border-bottom-color:#2196f3;}</style><nav class="css-1exs64t e17onxz1"><ul><li><a class="home-link " href="/">Curi</a></li><li><a data-hide="false" class=" " href="/packages/">API</a></li><li><a data-hide="false" class=" active" href="/guides/">Guides</a></li><li><a data-hide="false" class=" " href="/tutorial/">Tutorials</a></li><li><a data-hide="false" class=" " href="/examples/">Examples</a></li><li><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav><style data-emotion-css="1dskmbx">@media only screen and (min-width:751px){.css-1dskmbx{background:#deeffe;border-bottom:2px solid #222233;}.css-1dskmbx > div{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;width:751px;margin:0 auto;}.css-1dskmbx a{color:#222233;-webkit-text-decoration:none;text-decoration:none;}.css-1dskmbx ul{list-style:none;margin:0;padding:0;}}</style><div style="border-bottom-width:0px" class="css-1dskmbx e17onxz2"></div></header><style data-emotion-css="17yb0j4">.css-17yb0j4{position:fixed;right:15px;bottom:15px;width:75px;height:75px;border-radius:40px;border:0;background:#64b5f6;font-size:1em;font-family:"Zilla Slab",serif;z-index:9999;}@media only screen and (min-width:751px){.css-17yb0j4{display:none;}}</style><button type="button" class="toggler css-17yb0j4 egebhwa1">Menu</button><style data-emotion-css="b9kg8f">.css-b9kg8f{display:none;position:fixed;overflow-y:scroll;width:100vw;height:100vh;background:#efefef;z-index:999;padding:15px;}.css-b9kg8f.visible{display:block;}.css-b9kg8f ul{margin:3px 0;padding-left:0px;list-style:none;}.css-b9kg8f li{margin:3px 0;}.css-b9kg8f a{-webkit-text-decoration:none;text-decoration:none;display:inline-block;color:#222233;}.css-b9kg8f h3{border-bottom:1px solid #333;}.css-b9kg8f .active{font-weight:bold;}.css-b9kg8f .children{display:none;background:#efefef;padding:10px;}.css-b9kg8f .children.visible{display:block;position:fixed;top:0;bottom:0;left:0;right:0;overflow-y:scroll;}@media only screen and (min-width:751px){.css-b9kg8f{display:none;}.css-b9kg8f.visible{display:none;}}</style><div hidden="" class=" css-b9kg8f egebhwa0"><nav><ul><li><a class="home-link " href="/">Curi</a></li><li><style data-emotion-css="eh8tip">.css-eh8tip a{color:#222233;}.css-eh8tip ul{margin-left:10px;}.css-eh8tip > li{margin-bottom:15px;}</style><ul class="css-eh8tip e11f272a0"><li><div><style data-emotion-css="12lsm47">.css-12lsm47{cursor:pointer;font-size:24px;font-family:"Zilla Slab",serif;text-align:left;width:100%;background:none;border:0;padding:0;color:#222233;}</style><button title="Toggle group visibility" class="css-12lsm47 e11f272a1"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>API</button></div></li></ul></li><li><ul class="css-eh8tip e11f272a0"><li><div><button title="Toggle group visibility" class="css-12lsm47 e11f272a1"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>Guides</button></div></li></ul></li><li><ul class="css-eh8tip e11f272a0"><li><div><button title="Toggle group visibility" class="css-12lsm47 e11f272a1"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>Tutorials</button></div></li></ul></li><li><ul class="css-eh8tip e11f272a0"><li><div><button title="Toggle group visibility" class="css-12lsm47 e11f272a1"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>Examples</button></div></li></ul></li><li><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></div><style data-emotion-css="wdkxre">.css-wdkxre{width:100vw;padding:10px 10px 0;margin-bottom:20px;}.css-wdkxre a{color:#222233;}@media only screen and (min-width:751px){.css-wdkxre{padding:50px 25px 0;width:751px;margin:0 auto;}}</style><main tabindex="-1" style="outline:none" class="css-wdkxre e1fl12nk0"><style data-emotion-css="1ifjy1">.css-1ifjy1{position:relative;}@media only screen and (min-width:751px){.css-1ifjy1{padding-top:15px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;}}</style><div class="css-1ifjy1 e37tu9n0"><style data-emotion-css="3seevh">@media only screen and (min-width:751px){.css-3seevh{-webkit-order:2;-ms-flex-order:2;order:2;-webkit-flex:0 1 800px;-ms-flex:0 1 800px;flex:0 1 800px;position:relative;padding:0;overflow:hidden;outline:none;}}</style><div class="css-3seevh e826bmj0"><h1>Route Interactions</h1><style data-emotion-css="cv69qk">.css-cv69qk{width:100%;}.css-cv69qk p{margin:0 0 25px;font-size:0.8em;}@media only screen and (min-width:751px){.css-cv69qk p{font-size:1em;}}</style><div class="css-cv69qk e12etsbl1"><p>Route interactions let you interact with a registered route using its name.</p><p>A registered route is generally any route that is in the array of routes that you used to create your router. However, some interactions only register routes that meet some criteria. For example, the<!-- --> <style data-emotion-css="14f7g1f">.css-14f7g1f{padding:0.1em;border-radius:0.3em;white-space:normal;background:#fff !important;color:#222233 !important;text-shadow:none;white-space:wrap;}.css-14f7g1f .token{color:#222233;}</style><code class="inline-code language-javascript css-14f7g1f eutm4hs0">prefetch</code> interaction only registers routes with asynchronous methods.</p><p>Route interactions are defined using objects with four properties: name, register, get, and reset.</p></div><style data-emotion-css="pr87ee">.css-pr87ee{width:100%;margin:0 0 25px;font-size:0.8em;}.css-pr87ee pre{white-space:pre-wrap;height:100%;vertical-align:top;}@media only screen and (min-width:751px){.css-pr87ee{font-size:1em;}.css-pr87ee code{min-width:200px;}}</style><div class="css-pr87ee e12etsbl0"><pre><code class="language-javascript">{
  // The string you will use to call the interaction.
  name: &#x27;my&#x27;,

  // A function used internally to register routes
  // with the interaction. You only need to use this when
  // writing your own interactions.
  register: function(route, parentData) {...},

  // This is the function that you will call. For example,
  // with this interaction, the get function will be
  // called when you call router.route.my(&#x27;...&#x27;)
  get: function(route) {...},
  reset: function() {...}
}</code></pre></div><div class="css-cv69qk e12etsbl1"><p>Instead of importing the actual route interaction object, you typically import a factory function to create the object. This isn&#x27;t absolutely necessary, but is useful for server-side rendering.</p></div><div class="css-pr87ee e12etsbl0"><pre><code class="language-javascript">// interactions/my.js
export default function createMyInteraction() {
  return {
    name: &quot;my&quot;,
    register() {...},
    get() {...},
    reset() {...}
  };
}

// index.js
import createMyInteraction from &quot;./interactions/my&quot;;

const interaction = createMyInteraction();</code></pre></div><style data-emotion-css="2fdgsn">.css-2fdgsn{margin-top:15px;}.css-2fdgsn .aside{padding:5px 10px;border-left:2px solid $border-green;background:#e8f5e9;margin-top:15px;}.css-2fdgsn .aside .inline-code{background:#81c784 !important;}.css-2fdgsn .header-link{-webkit-text-decoration:none;text-decoration:none;}.css-2fdgsn .header-link::after{content:"#";color:#333;margin-left:5px;display:none;}.css-2fdgsn .header-link:hover::after{display:inline-block;}@media only screen and (min-width:751px){.css-2fdgsn{max-width:800px;}.css-2fdgsn .displaced-header:before{content:"";display:block;margin-top:-50px;height:50px;visibility:hidden;}}</style><div class="section css-2fdgsn" id="adding"><h2 class="displaced-header"><a class="header-link" href="#adding">Adding Interactions</a></h2><div class="css-cv69qk e12etsbl1"><p>Route interactions are provided to the router call as an array using the <code class="inline-code language-javascript css-14f7g1f eutm4hs0">route</code> property of the options object (the third argument).</p></div><div class="css-pr87ee e12etsbl0"><pre><code class="language-javascript">const router = curi(history, routes, {
  route: [createMyInteraction()]
});</code></pre></div><div class="css-cv69qk e12etsbl1"><p>The route interaction will be added to the router&#x27;s <code class="inline-code language-javascript css-14f7g1f eutm4hs0">route</code> <!-- -->property. When you call an interaction, you pass the name of the route that you want to interact with.</p></div><div class="css-pr87ee e12etsbl0"><pre><code class="language-javascript">const myValue = router.route.my(&#x27;Some Route&#x27;, ...);</code></pre></div></div><div class="section css-2fdgsn" id="creating"><h2 class="displaced-header"><a class="header-link" href="#creating">Creating Route Interactions</a></h2><div class="css-cv69qk e12etsbl1"><p>There are a few steps to creating your own route interactions.</p><p>Remember to export a function that will create the interaction object, not the actual interaction object.</p></div><div class="css-pr87ee e12etsbl0"><pre><code class="language-javascript">// we&#x27;ll create an interaction that confirms
// a route is registered
export default function confirmInteraction() {
  ...
}</code></pre></div><div class="css-cv69qk e12etsbl1"><p>The function should return an object with four properties:<!-- --> <code class="inline-code language-javascript css-14f7g1f eutm4hs0">name</code>, <code class="inline-code language-javascript css-14f7g1f eutm4hs0">register</code>, <code class="inline-code language-javascript css-14f7g1f eutm4hs0">get</code>, and<!-- --> <code class="inline-code language-javascript css-14f7g1f eutm4hs0">reset</code>.</p><style data-emotion-css="13ad1he">.css-13ad1he{overflow-x:scroll;}</style><div class="css-13ad1he e18t55xi0"><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>name</td><td>a unique identifier for the route interaction</td></tr><tr><td>register</td><td>a function to internally store information about routes</td></tr><tr><td>get</td><td>a function that will receive a route&#x27;s name (and possibly other arguments) and perform some task using the related route</td></tr><tr><td>reset</td><td>a function that will reset the interaction&#x27;s internal state (this is used if you call <code class="inline-code language-javascript css-14f7g1f eutm4hs0">router.replaceRoutes()</code>)</td></tr></tbody></table></div></div><div class="css-pr87ee e12etsbl0"><pre><code class="language-javascript">export default function confirmInteraction() {
  // maintain an object of known routes
  let knownRoutes = {};
  return {
    name: &#x27;confirm&#x27;,
    // when a route is registered,
    // we store it using its name
    register: route =&gt; {
      knownRoutes[route.name] = true;
    },
    // get checks the known routes to see if one exists
    // with the requested name
    get: (name) =&gt; {
      return knownRoutes[name] != null
    },
    // reset the known routes
    reset: () =&gt; {
      knownRoutes = {};
    }
  };
}</code></pre></div><div class="css-cv69qk e12etsbl1"><p>In your application, you can import it, call the factory to create the interaction, and register the interaction when you create the router.</p></div><div class="css-pr87ee e12etsbl0"><pre><code class="language-javascript">import { curi, prepareRoutes } from &#x27;@curi/router&#x27;;
import confirmFactory from &#x27;./interactions/confirm&#x27;

const routes = prepareRoutes([{ name: &#x27;Home&#x27;, path: &#x27;&#x27; }]);

const router = curi(history, routes, {
  route: [confirmFactory()]
});

router.route.confirm(&#x27;Home&#x27;); // true
router.route.confirm(&#x27;Elsewhere&#x27;); // false</code></pre></div><div class="section css-2fdgsn" id="Slightly-more-advanced"><h3 class="displaced-header"><a class="header-link" href="#Slightly-more-advanced">Slightly more advanced</a></h3><div class="css-cv69qk e12etsbl1"><p>You might want to write an interaction that uses data from parent routes when registering a route. For example, the built-in pathname interaction joins a route&#x27;s path with it parent path(s).</p><p>The second argument passed to a router interaction&#x27;s<!-- --> <code class="inline-code language-javascript css-14f7g1f eutm4hs0">register()</code> function is a parent data object. For root routes, this will be <code class="inline-code language-javascript css-14f7g1f eutm4hs0">undefined</code>. For nested routes, this is the value returned by the parent route&#x27;s <code class="inline-code language-javascript css-14f7g1f eutm4hs0">register()</code> <!-- -->function.</p></div><div class="css-pr87ee e12etsbl0"><pre><code class="language-javascript">function ParentFactory() {
  let routeTree = {};
  return {
    name: &#x27;routeParent&#x27;,
    register: (route, parent) =&gt; {
      routeTree[route.name] = parent;
      // we return route.name and any child routes will
      // receive that as their parent value
      return route.name;
    },
    get: (name) =&gt; {
      return routeTree[name];
    },
    reset: () =&gt; {
      routeTree = {};
    }
  }
}</code></pre></div></div></div></div></div></main></div>
    <script src="https://unpkg.com/react@16.6.3/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.6.3/umd/react-dom.production.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
