<svelte:component this="{component}" cancel="{cancel_callback}" />

<script>
  export default {
    data() {
      return {
        cancel_callback: undefined
      };
    },
    computed: {
      navigating({ cancel_callback }) {
        return cancel_callback !== undefined;
      }
    },
    oncreate() {
      this.stop = this.store.get().router.cancel(cancel_callback => {
        if (!this.removed) {
          this.set({ cancel_callback });
        }
      });
    },
    ondestroy() {
      this.removed = true;
      if (this.stop) {
        this.stop();
      }
    }
  };
</script>
