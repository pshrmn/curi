<svelte:component this="{component}" cancel="{cancelCallback}" />

<script>
  export default {
    data() {
      return {
        cancelCallback: undefined
      };
    },
    computed: {
      navigating({ cancelCallback }) {
        return cancelCallback !== undefined;
      }
    },
    oncreate() {
      this.stop = this.store.get().router.cancel(cancelCallback => {
        if (!this.removed) {
          this.set({ cancelCallback });
        }
      });
    },
    ondestroy() {
      this.removed = true;
      if (this.stop) {
        this.stop();
      }
    }
  };
</script>
