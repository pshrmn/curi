<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@curi/router | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/prism.css" rel="stylesheet">
    <link href="/static/css/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><header><nav><ul><li><a class="home-link " href="/">Curi</a></li><li><a class=" active" href="/packages/">Packages</a></li><li><a class=" " href="/guides/">Guides</a></li><li><a class=" " href="/tutorial/">Tutorials</a></li><li><a class=" " href="/examples/">Examples</a></li><li><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></header><main tabindex="-1" style="outline:none"><div class="page package"><div class="content" style="outline:none"><h1>@curi/<!-- -->router</h1><div class="package-info"><div>v<!-- -->1.1.0</div><a href="https://github.com/pshrmn/curi/tree/master/packages/router"><img style="height:16px;margin-right:5px" src="/static/img/github-logo.png" alt="GitHub logo"/>GitHub Repo</a><a href="https://npmjs.com/package/@curi/router"><img style="height:16px;margin-right:5px" src="/static/img/npm-logo.png" alt="NPM logo"/>NPM Package</a></div><div class="section" id="installation"><h2 class="displaced-header"><a class="header-link" href="#installation">Installation</a></h2><div class="explanation"><p>The package can be installed through <code class="inline-code language-javascript">npm</code> (you need to have Node &amp; NPM installed).</p></div><div class="code-block"><pre><code class="language-bash">npm install @curi/router</code></pre></div><div class="explanation"><p>Prefer inline scripts? A full (<code class="inline-code language-javascript">.umd.js</code>) and minified (<code class="inline-code language-javascript">.min.js</code>) script is available for every version through<!-- --> <a href="https://unpkg.com/@curi/router@1.1.0/dist/">Unpkg</a>. You can access the package&#x27;s exports through<!-- --> <code class="inline-code language-javascript">window.<!-- -->Curi</code>.</p></div></div><div class="section" id="about"><h2 class="displaced-header"><a class="header-link" href="#about">About</a></h2><div class="explanation"><p>The <code class="inline-code language-javascript">@curi/router</code> package is used to create a router.</p></div></div><div class="section" id="API"><h2 class="displaced-header"><a class="header-link" href="#API">API</a></h2><div class="section" id="curi"><h2 class="displaced-header"><a class="header-link" href="#curi">curi</a></h2><div class="explanation"><p>The <code class="inline-code language-javascript">curi</code> export is a function to create a router. It has two required arguments: a <code class="inline-code language-javascript">history</code> object and a<!-- --> <code class="inline-code language-javascript">routes</code> array, and an optional third argument: an<!-- --> <code class="inline-code language-javascript">options</code> object.</p></div><div class="code-block"><pre><code class="language-javascript">import { curi } from &#x27;@curi/router&#x27;;

const router = curi(history, routes, options);</code></pre></div><div class="section" id="arguments"><h4 class="displaced-header"><a class="header-link" href="#arguments">Arguments</a></h4><div class="section" id="history"><h5 class="displaced-header"><a class="header-link" href="#history">history</a></h5><div class="explanation"><p>A <a href="https://github.com/pshrmn/hickory">Hickory</a> <!-- -->history object that will power navigation within the application. The<!-- --> <a href="/guides/getting-started/#history-object">getting started guide</a> <!-- -->provides more information on how to choose which history type is right for an application.</p></div><div class="code-block"><pre><code class="language-jsx">import Browser from &quot;@hickory/browser&quot;;

const history = Browser();
const router = curi(history, routes);</code></pre></div></div><div class="section" id="routes"><h5 class="displaced-header"><a class="header-link" href="#routes">routes</a></h5><div class="explanation"><p>An array of prepared<!-- --> <a href="/guides/routes/">route</a> <!-- -->objects describing all valid routes in the application.</p></div><div class="code-block"><pre><code class="language-jsx">const routes = prepareRoutes([
  { name: &quot;Home&quot;, path: &quot;&quot; },
  { name: &quot;About&quot;, path: &quot;about&quot; }
]);

const router = curi(history, routes);</code></pre></div></div><div class="section" id="options"><h5 class="displaced-header"><a class="header-link" href="#options">options</a></h5><p>An optional object with additional properties that can be passed to the router.</p><ul><li><div class="explanation"><p><code class="inline-code language-javascript">route</code> - An array of<!-- --> <a href="/guides/route-interactions/">route interactions</a>. These are functions for interacting with routes based on their <code class="inline-code language-javascript">name</code>.</p><p>The <code class="inline-code language-javascript">pathname</code> interaction is included by default; any other interactions are provided through this array.</p></div><div class="code-block"><pre><code class="language-javascript">import active from &quot;@curi/route-active&quot;;
import ancestors from &quot;@curi/route-ancestors&quot;;

const routes = prepareRoutes([{ name: &quot;Home&quot;, path: &quot;&quot; }]);

const router = curi(history, routes, {
  route: [active(), ancestors()]
});</code></pre></div><div class="explanation"><p>Route interactions are called via the router&#x27;s<!-- --> <code class="inline-code language-javascript">route</code> object.</p></div><div class="code-block"><pre><code class="language-javascript">router.route.active(&quot;Home&quot;);
// returns true when location.pathname = &quot;/&quot;

router.route.pathname(&quot;Home&quot;);
// returns &quot;/&quot;</code></pre></div></li><li><div class="explanation"><p><code class="inline-code language-javascript">sideEffects</code> - An array of<!-- --> <a href="/guides/side-effects/">side effect</a> <!-- -->objects.</p><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>effect</td><td>An observer that will be called whenever a response is generated.</td></tr><tr><td>after</td><td>(default <code class="inline-code language-javascript">false</code>) controls whether the side effect is called before or after non-side effect observers.</td></tr></tbody></table></div><div class="code-block"><pre><code class="language-javascript">import scroll from &quot;@curi/side-effect-scroll&quot;;

const router = curi(history, routes, {
  sideEffects: [scroll()]
});</code></pre></div></li><li><div class="explanation"><p><code class="inline-code language-javascript">external</code> - Values that should be accessible to a route&#x27;s <code class="inline-code language-javascript">resolve</code> functions and<!-- --> <code class="inline-code language-javascript">response()</code> function.</p><p>Using <code class="inline-code language-javascript">external</code> allows you to access APIs, data, etc. without having to be able to import it in the module where the routes are defined.</p></div><div class="code-block"><pre><code class="language-javascript">const client = new ApolloClient();
const router = curi(history, routes, {
  external: { client, greeting: &quot;Hi!&quot; }
});</code></pre></div><div class="code-block"><pre><code class="language-javascript">const routes = prepareRoutes([
  {
    name: &quot;User&quot;,
    path: &quot;user/:id&quot;,
    resolve: {
      data(match, external) {
        // use the external object to make a query
        return external.client.query()
      }
    }
  }
]);</code></pre></div></li><li><div class="explanation"><p><code class="inline-code language-javascript">emitRedirects</code> - When <code class="inline-code language-javascript">false</code> <!-- -->(default is <code class="inline-code language-javascript">true</code>), response objects with the<!-- --> <code class="inline-code language-javascript">redirectTo</code> property<!-- --> <strong>will not be emitted</strong> to observers. This can be useful for avoiding an extra render, but should not be used on the server.</p></div><div class="code-block"><pre><code class="language-javascript">const routes = prepareRoutes([
  {
    name: &quot;Old&quot;,
    path: &quot;old/:id&quot;,
    response({ params }) {
      // setup a redirect to the &quot;New&quot; route
      return {
        redirectTo: {
          name: &quot;New&quot;,
          params
        }
      };
    }
  },
  {
    name: &quot;New&quot;,
    path: &quot;new/:id&quot;
  }
]);

const router = curi(history, routes, {
  emitRedirects: false                 
});
// navigating to &quot;/old/2&quot; will automatically redirect
// to &quot;/new/2&quot; without emitting a response</code></pre></div></li><li><div class="explanation"><p><code class="inline-code language-javascript">automaticRedirects</code> - When the initially matched route is synchronous and redirects, the router&#x27;s automatic redirect will occur before any response handlers (registered with <code class="inline-code language-javascript">once()</code> or<!-- --> <code class="inline-code language-javascript">observe()</code>) are called. This means that they will be called with the response for the location that was redirected to instead of the initial location. This is fine on the client side, but causes issues with server side rendering. When<!-- --> <code class="inline-code language-javascript">automaticRedirects</code> is <code class="inline-code language-javascript">false</code>, the automatic redirect will not happen.<!-- --> <strong>Using <code class="inline-code language-javascript">automaticRedirects = false</code> is recommend for server side rendering.</strong></p></div><div class="code-block"><pre><code class="language-javascript">const routes = prepareRoutes([
  {
    name: &quot;Old&quot;,
    path: &quot;old/:id&quot;,
    response({ params }) {
      // setup a redirect to the &quot;New&quot; route
      return {
        redirectTo: {
          name: &quot;New&quot;,
          params
        }
      };
    }
  },
  {
    name: &quot;New&quot;,
    path: &quot;new/:id&quot;
  }
]);
const history = InMemory({ locations: [&quot;old/1&quot; ]});
const router = curi(history, routes, {
  automaticRedirects: false                 
});
router.once(({ response }) =&gt; {
  // response = { name: &quot;Old&quot;, ... }
});</code></pre></div></li><li><div class="explanation"><p><code class="inline-code language-javascript">pathnameOptions</code> - Curi uses<!-- --> <a href="https://github.com/pillarjs/path-to-regexp"><code class="inline-code language-javascript">path-to-regexp</code></a> <!-- -->to handle route matching and pathname generation.<!-- --> <code class="inline-code language-javascript">path-to-regexp</code> can take a custom<!-- --> <a href="https://github.com/pillarjs/path-to-regexp#compile-reverse-path-to-regexp"><code class="inline-code language-javascript">encode</code></a> <!-- -->function for creating pathnames, which you can specify with this options.<!-- --> <strong>You most likely will never need to use this.</strong></p></div><div class="code-block"><pre><code class="language-javascript">const router = curi(history, routes, {
  pathOptions: {
    encode: (value, token) =&gt; { /* ... */ }
  }
});</code></pre></div></li></ul></div></div><div class="section" id="properties"><h4 class="displaced-header"><a class="header-link" href="#properties">Router Properties</a></h4><p>The router has a number of properties for you to use when rendering your application.</p><div class="section" id="navigate"><h5 class="displaced-header"><a class="header-link" href="#navigate">navigate(details)</a></h5><div class="explanation"><p>The <code class="inline-code language-javascript">navigate()</code> method is used to navigate programmatically. It takes a <code class="inline-code language-javascript">details</code> object with the details of where you want to navigate to as well as the<!-- --> <code class="inline-code language-javascript">method</code> of navigation.</p><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>name</td><td>The name of the route to navigate to</td></tr><tr><td>params</td><td>An object of any route params for the named route (and any of its ancestors that require params).</td></tr><tr><td>hash</td><td>The hash string of the location to navigate to.</td></tr><tr><td>query</td><td>The query value of the location to navigate to.</td></tr><tr><td>state</td><td>Any serializable state to attach to the location.</td></tr><tr><td>method</td><td>How to navigate. <code class="inline-code language-javascript">&quot;PUSH&quot;</code> appends the new location after the current one. <code class="inline-code language-javascript">&quot;REPLACE&quot;</code> <!-- -->replaces the current location. <code class="inline-code language-javascript">&quot;ANCHOR&quot;</code> is the default method and acts like clicking a link. This behavior is a mix of <code class="inline-code language-javascript">&quot;PUSH&quot;</code> and<!-- --> <code class="inline-code language-javascript">&quot;REPLACE&quot;</code> where the current location is replaced if the new location has the exact same URL.</td></tr><tr><td>finished</td><td>A function to call once the navigation has finished.</td></tr><tr><td>cancelled</td><td>A function to call if the navigation is superseded by another navigation.</td></tr></tbody></table></div><div class="code-block"><pre><code class="language-javascript">const routes = prepareRoutes([
  {
    name: &quot;Album&quot;,
    path: &quot;photos/:albumID&quot;,
    children: [
      { name: &quot;Photo&quot;, path: &quot;:photoID&quot; }
    ]
  },
  // ...
]);
const router = curi(history, routes);

router.navigate({
  name: &quot;Photo&quot;,
  params: { albumID: 123, photoID: 456 }
});
// navigates to &quot;/photos/123/456&quot;
// using default &quot;ANCHOR&quot; method</code></pre></div></div><div class="section" id="once"><h5 class="displaced-header"><a class="header-link" href="#once">once(fn, options)</a></h5><div class="explanation"><p>The <code class="inline-code language-javascript">once()</code> method takes a response handler function. If a response already exists, the function will be called immediately. Otherwise, the function will be called once a new response is created. The<!-- --> <code class="inline-code language-javascript">{ initial: false }</code> option can be used to prevent an immediate call even if a response already exists.</p><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>response</td><td>The generated response object.</td></tr><tr><td>navigation</td><td>The navigation&#x27;s <code class="inline-code language-javascript">action</code> (<code class="inline-code language-javascript">PUSH</code>,<!-- --> <code class="inline-code language-javascript">REPLACE</code>, or <code class="inline-code language-javascript">POP</code>) and the<!-- --> <code class="inline-code language-javascript">previous</code> response object.</td></tr><tr><td>router</td><td>The Curi router</td></tr></tbody></table><p>When a matched route is async (it has <code class="inline-code language-javascript">resolve</code> <!-- -->functions), a response will not be created until the async function(s) have resolved.</p></div><div class="code-block"><pre><code class="language-javascript">router.once(({ response }) =&gt; {
  // render the application based on the response
});</code></pre></div><div class="section" id="once-options"><h6 class="displaced-header"><a class="header-link" href="#once-options">options</a></h6><div class="explanation"><table><thead><tr><th>option</th><th>default</th><th>description</th></tr></thead><tbody><tr><td>initial</td><td>true</td><td>When true, the function will be called immediately if a response exists. When false, the response function will not be called until the next response is emitted.</td></tr></tbody></table></div><div class="code-block"><pre><code class="language-javascript">router.once(responseHandler, {
  initial: false
});</code></pre></div></div></div><div class="section" id="observe"><h5 class="displaced-header"><a class="header-link" href="#observe">observe(fn, options)</a></h5><div class="explanation"><p>The <code class="inline-code language-javascript">observe()</code> method takes a response handler function. The response handler will be called every time a new response is emitted (and it a response already exists, the function will be called immediately). The<!-- --> <code class="inline-code language-javascript">{ initial: false }</code> option can be used to prevent an immediate call even if a response already exists.</p><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>response</td><td>The generated response object.</td></tr><tr><td>navigation</td><td>The navigation&#x27;s <code class="inline-code language-javascript">action</code> (<code class="inline-code language-javascript">PUSH</code>,<!-- --> <code class="inline-code language-javascript">REPLACE</code>, or <code class="inline-code language-javascript">POP</code>) and the<!-- --> <code class="inline-code language-javascript">previous</code> response object.</td></tr><tr><td>router</td><td>The Curi router</td></tr></tbody></table><p>When a matched route is async (it has <code class="inline-code language-javascript">resolve</code> <!-- -->functions), a response will not be created until the async function(s) have resolved.</p></div><div class="code-block"><pre><code class="language-javascript">router.observe(({ response }) =&gt; {
  // render the application based on the response
});</code></pre></div><div class="section" id="observe-options"><h6 class="displaced-header"><a class="header-link" href="#observe-options">options</a></h6><div class="explanation"><table><thead><tr><th>option</th><th>default</th><th>description</th></tr></thead><tbody><tr><td>initial</td><td>true</td><td>When true, the function will be called immediately if a response exists. When false, the response function will not be called until the next response is emitted.</td></tr></tbody></table></div><div class="code-block"><pre><code class="language-javascript">router.observe(responseHandler, {
  initial: false
});</code></pre></div><div class="explanation"><p><code class="inline-code language-javascript">observe()</code> returns a function to stop calling the response handler function for new responses.</p></div><div class="code-block"><pre><code class="language-javascript">const stopObserving = router.observe(
  () =&gt; {...}
);
// the router will now call the observer for all responses

stopObserving();
// the router no longer calls the observer</code></pre></div></div></div><div class="section" id="cancel-property"><h5 class="displaced-header"><a class="header-link" href="#cancel-property">cancel(fn)</a></h5><div class="explanation"><p>With asynchronous routes, after a user begins navigation, but before the route&#x27;s asynchronous actions have finished, the user does not have a good way to cancel the navigation. They can either refresh the page (causing a full reload) or click a link with the same URL as the current location, but neither of these are intuitive or ideal.</p><p><code class="inline-code language-javascript">cancel()</code> takes an observer function that will be called when navigation starts and when the navigation is finished. When the navigation starts, the observer function will be given a function to cancel the navigation. When the navigation finishes, the function will be called with<!-- --> <code class="inline-code language-javascript">undefined</code>.</p><p>Calling <code class="inline-code language-javascript">cancel()</code> returns a function to stop observing.</p></div><div class="code-block"><pre><code class="language-javascript">const stopCancelling = router.cancel(fn =&gt; {
  if (fn === undefined) {
    // the navigation has finished/been cancelled
  } else {
    // calling fn will cancel the navigation
  }
});</code></pre></div></div><div class="section" id="current-property"><h5 class="displaced-header"><a class="header-link" href="#current-property">current()</a></h5><div class="explanation"><p>The <code class="inline-code language-javascript">router.current()</code> method returns the current<!-- --> <code class="inline-code language-javascript">response</code> and <code class="inline-code language-javascript">navigation</code> objects.</p><div class="note"><strong>Note:</strong> <!-- -->If you call <code class="inline-code language-javascript">router.current()</code> before the initial response has been emitted, the <code class="inline-code language-javascript">response</code> and<!-- --> <code class="inline-code language-javascript">navigation</code> properties will be <code class="inline-code language-javascript">null</code>.</div></div><div class="code-block"><pre><code class="language-javascript">const router = curi(history, routes);
const tooSoon = router.current();
// tooSoon.response === null
// tooSoon.navigation === null

router.once(({ response, navigation }) =&gt; {
  const perfect = router.current();
  // perfect.response === response
  // perfect.navigation === navigation
});</code></pre></div></div><div class="section" id="router-route"><h5 class="displaced-header"><a class="header-link" href="#router-route">route</a></h5><div class="explanation"><p>The router&#x27;s<!-- --> <a href="/guides/route-interactions/">route interactions</a> <!-- -->are accessed through the <code class="inline-code language-javascript">route</code> property. These are used to interact with routes using their names.</p></div><div class="section" id="pathname-interaction"><h6 class="displaced-header"><a class="header-link" href="#pathname-interaction">pathname</a></h6><div class="explanation"><p>Curi includes one built-in interaction,<!-- --> <code class="inline-code language-javascript">pathname</code>, which generates location pathnames using the name of a route and an optional object containing any necessary params.</p></div><div class="code-block"><pre><code class="language-javascript">const routes = prepareRoutes([
  { name: &#x27;User&#x27;, path: &#x27;user/:id&#x27; }
]);
const router = curi(history, routes);
const userPathname = router.route.pathname(
  &#x27;User&#x27;,
  { id: &#x27;12345&#x27; }
);
// userPathname === &#x27;/user/12345&#x27;</code></pre></div></div></div><div class="section" id="refresh-property"><h5 class="displaced-header"><a class="header-link" href="#refresh-property">refresh()</a></h5><div class="explanation"><p>The <code class="inline-code language-javascript">refresh()</code> function takes an array of new routes, which will replace the existing routes. The router will emit a new response based on the current location.</p><p>The function can be called without any arguments and it will emit a response using the existing routes.</p></div><div class="code-block"><pre><code class="language-javascript">const oldRoutes = prepareRoutes([...]);
const newRoutes = prepareRoutes([...]);

const router = curi(history, oldRoutes);
// generates responses using old routes

router.refresh(newRoutes);
// generates responses using new routes</code></pre></div></div><div class="section" id="history-property"><h5 class="displaced-header"><a class="header-link" href="#history-property">history</a></h5><div class="explanation"><p>The route&#x27;s history object, in case you need to interact directly with that.</p></div></div></div></div><div class="section" id="prepareRoutes"><h2 class="displaced-header"><a class="header-link" href="#prepareRoutes">prepareRoutes</a></h2><div class="explanation"><p>The <code class="inline-code language-javascript">prepareRoutes()</code> export is used to build the routes for Curi. This will pre-compile paths for location matching and pathname building, which is particularly useful for server rendering.</p></div><div class="code-block"><pre><code class="language-javascript">import { prepareRoutes } from &#x27;@curi/router&#x27;;

const routes = prepareRoutes([
  { name: &quot;Home&quot;, path: &quot;&quot; },
  // ...
  { name: &quot;Not Found&quot;, path: &quot;(.*)&quot; }
]);</code></pre></div><div class="explanation"><div class="warning"><strong>Warning:</strong> <!-- -->Passing a non-prepared routes array to <code class="inline-code language-javascript">curi()</code> is still supported, but deprecated and will be removed in the next major version.</div></div></div><div class="section" id="route-properties"><h2 class="displaced-header"><a class="header-link" href="#route-properties">Route properties</a></h2><div class="section" id="name"><h3 class="displaced-header"><a class="header-link" href="#name">route.name</a></h3><div class="explanation"><p>A string, this must be unique for every route.</p></div><div class="code-block"><pre><code class="language-javascript">[
  { name: &#x27;Home&#x27; },
  { name: &#x27;Album&#x27; },
  { name: &#x27;Not Found&#x27; }
];</code></pre></div></div><div class="section" id="path"><h3 class="displaced-header"><a class="header-link" href="#path">route.path</a></h3><div class="explanation"><p>A string pattern describing what the route matches. Whenever the router receives a new location, it will loop through the known route paths to determine which one matches the new location&#x27;s <code class="inline-code language-javascript">pathname</code> the best.</p><p>Curi uses<a href="https://github.com/pillarjs/path-to-regexp#parameters"><code class="inline-code language-javascript">path-to-regexp</code></a> <!-- -->for paths, which enables routes to have<a href="https://github.com/pillarjs/path-to-regexp#parameters">path parameters</a>. When a route with parameters matches a location, the parameters will be be parsed from the location&#x27;s<!-- --> <code class="inline-code language-javascript">pathname</code>.</p><p><code class="inline-code language-javascript">path</code> strings should <strong>not</strong> have a leading slash.</p><div class="warning"><strong>Warning:</strong> <code class="inline-code language-javascript">path-to-regexp</code> supports arrays and RegExps, but Curi only supports string paths. This is because Curi uses<!-- --> <code class="inline-code language-javascript">path-to-regexp</code> to generate pathnames from a route&#x27;s name, which it can only do from strings paths.</div></div><div class="code-block"><pre><code class="language-javascript">[
  { name: &#x27;Home&#x27;, path: &#x27;&#x27; },
  // when the pathname is a/yo, albumID = &quot;yo&quot;
  { name: &#x27;Album&#x27;, path: &#x27;a/:albumID&#x27; },
  // the path (.*) matches every pathname
  { name: &#x27;Not Found&#x27;, path: &#x27;(.*)&#x27; }
];

// don&#x27;t include a leading forward slash
// { name: &#x27;Home&#x27;, path: &#x27;/&#x27; }</code></pre></div></div><div class="section" id="resolve"><h3 class="displaced-header"><a class="header-link" href="#resolve">route.resolve</a></h3><div class="explanation"><p>The <code class="inline-code language-javascript">resolve</code> object groups async functions that will be called when the route matches.</p><p>A route with any <code class="inline-code language-javascript">resolve</code> functions is asynchronous, while one with no <code class="inline-code language-javascript">resolve</code> functions is synchronous. You can read more about this is the<!-- --> <a href="/guides/sync-or-async/">sync or async</a> <!-- -->guide.</p><p><code class="inline-code language-javascript">resolve</code> functions are called every time that a route matches the current location.</p><p><code class="inline-code language-javascript">resolve</code> functions will be passed an object with the matched route properties: <code class="inline-code language-javascript">name</code>, <code class="inline-code language-javascript">params</code>,<!-- --> <code class="inline-code language-javascript">partials</code>, and <code class="inline-code language-javascript">location</code>.</p><div class="note"><strong>Note:</strong> <!-- -->You should not perform side effects (e.g. passing the loaded data to a Redux store) in <code class="inline-code language-javascript">resolve</code> functions because it is possible that navigating to the route might be cancelled. If you must perform side effects for a route, you should do so in <code class="inline-code language-javascript">response()</code>.</div></div><div class="code-block"><pre><code class="language-javascript">const about = {
  name: &#x27;About&#x27;,
  path: &#x27;about&#x27;,
  resolve: {
    body: () =&gt; import(&#x27;./components/About&#x27;),
    data: () =&gt; fetch(&#x27;/api/about&#x27;)
  }
};</code></pre></div></div><div class="section" id="response"><h2 class="displaced-header"><a class="header-link" href="#response">route.response()</a></h2><div class="explanation"><p>A function for modifying the response object. This returns an object whose properties will be merged with the matched route properties to create the &quot;final&quot; response.</p><p>Only valid properties will be merged onto the response; everything else will be ignored. The valid properties are:</p></div><ol><li><div class="explanation"><p><code class="inline-code language-javascript">body</code> - This is usually what you will render.</p></div><div class="code-block"><pre><code class="language-javascript">import Home from &quot;./components/Home&quot;;
const routes = prepareRoutes([
  {
    name: &quot;Home&quot;,
    path: &quot;&quot;,
    response() {
      return { body: Home };
    }
  },
  // ...
]);
// response = { body: Home, ... }</code></pre></div></li><li><div class="explanation"><p><code class="inline-code language-javascript">status</code> - A number. This is useful for redirects or locations caught by your catch-all route while using server-side rendering. The default status value is<!-- --> <code class="inline-code language-javascript">200</code>.</p></div><div class="code-block"><pre><code class="language-javascript">{
  response(){
    return {
      status: 301,
      redirectTo: {...}
    };
  }
}
// response = { status: 301, ... }</code></pre></div></li><li><div class="explanation"><p><code class="inline-code language-javascript">error</code> - If an error occurs with the route&#x27;s<!-- --> <code class="inline-code language-javascript">resolve</code> methods, you might want to attach an error message to the response.</p></div><div class="code-block"><pre><code class="language-javascript">{
  resolve: {
    test: () =&gt; Promise.reject(&quot;woops!&quot;)
  },
  response({ error }) {
    return { error };
  }
}
// response = { error: &quot;woops!&quot;, ... }</code></pre></div></li><li><div class="explanation"><p><code class="inline-code language-javascript">data</code> - Anything you want it to be.</p></div><div class="code-block"><pre><code class="language-javascript">{
  response() {
    return { data: Math.random() };
  }
}
// response = { data: 0.8651606708109429, ... }</code></pre></div></li><li><div class="explanation"><p><code class="inline-code language-javascript">title</code> - This can be used with<!-- --> <code class="inline-code language-javascript">@curi/side-effect-title</code> to update the page&#x27;s<!-- --> <code class="inline-code language-javascript">document.title</code>.</p></div><div class="code-block"><pre><code class="language-javascript">{
  response({ params }) {
    return { title: `User ${params.id}` };
  }
}
// when visting /user/2
// response = { title: &quot;User 2&quot;, ... }</code></pre></div></li><li><div class="explanation"><p><code class="inline-code language-javascript">redirectTo</code> - An object with the <code class="inline-code language-javascript">name</code> <!-- -->of the route to redirect to, <code class="inline-code language-javascript">params</code> (if required), and optional <code class="inline-code language-javascript">hash</code>, <code class="inline-code language-javascript">query</code>, and <code class="inline-code language-javascript">state</code> properties.</p><p>The other values are copied directly, but<!-- --> <code class="inline-code language-javascript">redirectTo</code> will be turned into a location object using the object&#x27;s <code class="inline-code language-javascript">name</code> (and<!-- --> <code class="inline-code language-javascript">params</code> if required).</p></div><div class="code-block"><pre><code class="language-javascript">[
  {
    name: &quot;Old Photo&quot;,
    path: &quot;photo/:id&quot;,
    response({ params }) {
      return {
        redirectTo: { name: &quot;Photo&quot;, params }
      };
    }
  },
  {
    name: &quot;New Photo&quot;,
    path: &quot;p/:id&quot;
  }
]
// when the user navigates to /photo/1:
// response = { redirectTo: { pathname: &quot;/p/1&quot;, ... } }</code></pre></div></li></ol><div class="explanation"><p>This function is passed an object with a number of properties that can be useful for modifying the response.</p></div><div class="code-block"><pre><code class="language-javascript">{
  response: ({ match, resolved }) =&gt; {
    // ...
  }
}</code></pre></div><ul><li class="section" id="response-match"><h3 class="displaced-header"><a class="header-link" href="#response-match">match</a></h3><div class="explanation"><p>An object with the matched route properties of a response.</p><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>name</td><td>the name of the matched route</td></tr><tr><td>params</td><td>route parameters parsed from the location</td></tr><tr><td>partials</td><td>the names of any ancestor routes of the matched route</td></tr><tr><td>location</td><td>the location that was used to match the route</td></tr><tr><td>key</td><td>the location&#x27;s <code class="inline-code language-javascript">key</code>, which is a unique identifier</td></tr></tbody></table></div></li><li class="section" id="response-resolved"><h3 class="displaced-header"><a class="header-link" href="#response-resolved">resolved</a></h3><div class="explanation"><p><code class="inline-code language-javascript">resolved</code> is an object with the values resolved by the <code class="inline-code language-javascript">resolve</code> functions.</p><p>If a route isn&#x27;t async, <code class="inline-code language-javascript">resolved</code> will be<!-- --> <code class="inline-code language-javascript">null</code>.</p></div><div class="code-block"><pre><code class="language-javascript">// attach resolved data to the response
const user = {
  name: &#x27;User&#x27;,
  path: &#x27;:id&#x27;,
  resolve: {
    data: ({ params, location }) =&gt; (
      fetch(`/api/users/${params.id}`)
        .then(resp =&gt; JSON.parse(resp))
    ),
  },
  response: ({ resolved }) =&gt; {
    return {
      data: resolved.data
    };
  }
}</code></pre></div></li><li class="section" id="response-error"><h3 class="displaced-header"><a class="header-link" href="#response-error">error</a></h3><div class="explanation"><p><code class="inline-code language-javascript">error</code> is an error thrown by one of the route&#x27;s<!-- --> <code class="inline-code language-javascript">resolve</code> functions.</p></div><div class="code-block"><pre><code class="language-javascript">// check if any of a route&#x27;s resolve functions threw
const user = {
  name: &#x27;User&#x27;,
  path: &#x27;:id&#x27;,
  resolve: {
    data: ({ params, location }) =&gt; (
      fetch(`/api/users/${params.id}`)
        .then(resp =&gt; JSON.parse(resp))
    ),
  },
  response: ({ error, resolved }) =&gt; {
    if (error) {
      return { error };
    }
    return {
      data: resolved.data
    };
  }
}</code></pre></div></li></ul></div><div class="section" id="children"><h3 class="displaced-header"><a class="header-link" href="#children">children</a></h3><div class="explanation"><p>An optional array of route objects for creating nested routes. Any child routes will be matched relative to their parent route&#x27;s <code class="inline-code language-javascript">path</code>. This means that if a parent route&#x27;s<!-- --> <code class="inline-code language-javascript">path</code> string is <code class="inline-code language-javascript">&#x27;one&#x27;</code> and a child route&#x27;s<!-- --> <code class="inline-code language-javascript">path</code> string is <code class="inline-code language-javascript">&#x27;two&#x27;</code>, the child will match when the pathname is <code class="inline-code language-javascript">&#x27;one/two&#x27;</code>.</p></div><div class="code-block"><pre><code class="language-javascript">// &#x27;/a/Coloring+Book/All+Night&#x27; will be matched
// by the &quot;Song&quot; route, with the params
// { album: &#x27;Coloring+Book&#x27;, title: &#x27;All+Night&#x27; }
{
  name: &#x27;Album&#x27;,
  path: &#x27;a/:album&#x27;,
  children: [
    {
      name: &#x27;Song&#x27;,
      path: &#x27;:title&#x27;
    }
  ]
}</code></pre></div></div><div class="section" id="params"><h3 class="displaced-header"><a class="header-link" href="#params">params</a></h3><div class="explanation"><p>When <code class="inline-code language-javascript">path-to-regexp</code> matches your paths, all parameters are extracted as strings. If you prefer for some route params to be other types, you can provide functions to transform params using the <code class="inline-code language-javascript">route.params</code> object.</p><p>Properties of the <code class="inline-code language-javascript">route.params</code> object are the names of params to be parsed. The paired value should be a function that takes a string (the value from the <code class="inline-code language-javascript">pathname</code>) and returns a new value (transformed using the function you provide).</p></div><div class="code-block"><pre><code class="language-javascript">const routes = prepareRoutes([
  {
    name: &#x27;Number&#x27;,
    path: &#x27;number/:num&#x27;,
    params: {
      num: n =&gt; parseInt(n, 10)
    }
  }
]);

// when the user visits /number/1,
// response.params will be { num: 1 }
// instead of { num: &quot;1&quot; }</code></pre></div></div><div class="section" id="pathOptions"><h3 class="displaced-header"><a class="header-link" href="#pathOptions">pathOptions</a></h3><div class="explanation"><p>If you need to provide different path options than<!-- --> <a href="https://github.com/pillarjs/path-to-regexp#usage">the defaults</a> <!-- -->used by <code class="inline-code language-javascript">path-to-regexp</code>, you can provide them with a<!-- --> <code class="inline-code language-javascript">pathOptions</code> object.</p><div class="note"><strong>Note:</strong> <!-- -->If a route has a children array property, it will<!-- --> <strong>always</strong> have the <code class="inline-code language-javascript">end</code> path option set to false.</div></div></div><div class="section" id="extra"><h3 class="displaced-header"><a class="header-link" href="#extra">extra</a></h3><div class="explanation"><p>If you have any additional properties that you want attached to a route, use the <code class="inline-code language-javascript">extra</code> property. You will be able to use <code class="inline-code language-javascript">route.extra</code> in any custom route interactions.</p></div><div class="code-block"><pre><code class="language-javascript">const routes = prepareRoutes([
  {
    name: &#x27;A Route&#x27;,
    path: &#x27;a-route&#x27;,
    extra: {
      transition: &#x27;fade&#x27;
    }
  },
  {
    name: &#x27;B Route&#x27;,
    path: &#x27;b-route&#x27;,
    extra: {
      enter: &#x27;slide-right&#x27;
    }
  }
]);</code></pre></div></div></div></div></div><div class="page-links"><button type="button" class="toggler">Menu</button><div class="children"><h2>Packages</h2><ul class="link-list"><li class="link-group"><div><button title="Toggle group visibility" class="collapse-button"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg"><path d="M2,10 l5,-5 l5,5" fill="none" stroke="black" stroke-width="3"></path></svg>router</button></div><ul class="link-list"><li class="solo"><a class=" active" href="/packages/@curi/router/">router</a></li></ul></li></ul><ul class="link-list"><li class="link-group"><div><button title="Toggle group visibility" class="collapse-button"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg"><path d="M2,10 l5,-5 l5,5" fill="none" stroke="black" stroke-width="3"></path></svg>render</button></div><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/react-dom/">react-dom</a></li><li class="solo"><a class=" " href="/packages/@curi/react-native/">react-native</a></li><li class="solo"><a class=" " href="/packages/@curi/svelte/">svelte</a></li><li class="solo"><a class=" " href="/packages/@curi/vue/">vue</a></li></ul></li></ul><ul class="link-list"><li class="link-group"><div><button title="Toggle group visibility" class="collapse-button"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg"><path d="M2,10 l5,-5 l5,5" fill="none" stroke="black" stroke-width="3"></path></svg>route interactions</button></div><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/route-active/">route-active</a></li><li class="solo"><a class=" " href="/packages/@curi/route-ancestors/">route-ancestors</a></li><li class="solo"><a class=" " href="/packages/@curi/route-prefetch/">route-prefetch</a></li></ul></li></ul><ul class="link-list"><li class="link-group"><div><button title="Toggle group visibility" class="collapse-button"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg"><path d="M2,10 l5,-5 l5,5" fill="none" stroke="black" stroke-width="3"></path></svg>side effects</button></div><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/side-effect-aria-live/">side-effect-aria-live</a></li><li class="solo"><a class=" " href="/packages/@curi/side-effect-scroll/">side-effect-scroll</a></li><li class="solo"><a class=" " href="/packages/@curi/side-effect-title/">side-effect-title</a></li></ul></li></ul><ul class="link-list"><li class="link-group"><div><button title="Toggle group visibility" class="collapse-button"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg"><path d="M2,10 l5,-5 l5,5" fill="none" stroke="black" stroke-width="3"></path></svg>other</button></div><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/static/">static</a></li><li class="solo"><a class=" " href="/packages/@curi/helpers/">helpers</a></li></ul></li></ul></div></div></div></main></div>
    <script src="https://cdn.polyfill.io/v2/polyfill.js?features=Object.assign"></script>
    <script src="https://unpkg.com/react@16.6.0/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.6.0/umd/react-dom.production.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
