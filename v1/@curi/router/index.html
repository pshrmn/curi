<!doctype html>
<html lang="en" class="font-serif text-small-screen md:text-regular-screen font-light m-0 box-border">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="API documentation for @curi/router">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@curi/router | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/prism.css" rel="stylesheet">
    <link href="/static/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><header class="hidden md:block w-screen max-w-full bg-purple p-0 fixed z-10"><nav class="text-gray-100"><ul role="menubar" class="flex flex-row flex-wrap items-end p-0 m-0 max-w-full"><li class="p-0 pr-2 pl-0"><a class=" text-gray-100 text-xl no-underline h-10 flex items-center px-2 border-0 border-b-2 border-purple hover:text-bright-orange md:text-2xl md:text-bright-orange" href="/">Curi</a></li><li class="p-0 pr-2 pl-0" aria-haspopup="true"><a class=" text-gray-100 text-xl no-underline h-10 flex items-center px-2 border-0 border-b-2 border-purple hover:text-bright-orange " href="/v2/">API</a><div class="hidden absolute w-screen left-0 text-purple border-0 border-b-2 border-purple"><ul class="flex flex-row flex-no-wrap justify-start bg-light-blue list-none m-0 p-0"><li><menu class="my-0 mx-5"><h3>router</h3><ul><li><a class=" " href="/v2/@curi/router/">router</a></li><li><a class=" " href="/v2/@curi/interactions/">interactions</a></li></ul></menu></li><li><menu class="my-0 mx-5"><h3>render</h3><ul><li><a class=" " href="/v2/@curi/react-dom/">react-dom</a></li><li><a class=" " href="/v2/@curi/react-native/">react-native</a></li><li><a class=" " href="/v2/@curi/svelte/">svelte</a></li><li><a class=" " href="/v2/@curi/vue/">vue</a></li></ul></menu></li><li><menu class="my-0 mx-5"><h3>other</h3><ul><li><a class=" " href="/v2/@curi/static/">static</a></li><li><a class=" " href="/v2/@curi/helpers/">helpers</a></li><li><a class=" " href="/v2/@curi/types/">types</a></li></ul></menu></li></ul></div></li><li class="p-0 pr-2 pl-0" aria-haspopup="true"><a class=" text-gray-100 text-xl no-underline h-10 flex items-center px-2 border-0 border-b-2 border-purple hover:text-bright-orange " href="/guides/">Guides</a><div class="hidden absolute w-screen left-0 text-purple border-0 border-b-2 border-purple"><ul class="flex flex-row flex-no-wrap justify-start bg-light-blue list-none m-0 p-0"><menu class="my-0 mx-5"><h3>basic</h3><ul><li><a class=" " href="/guides/installation/">Installation</a></li><li><a class=" " href="/guides/getting-started/">Getting Started</a></li><li><a class=" " href="/guides/history/">History</a></li><li><a class=" " href="/guides/routes/">Routes</a></li><li><a class=" " href="/guides/responses/">Responses</a></li><li><a class=" " href="/guides/navigation-objects/">Navigation Objects</a></li><li><a class=" " href="/guides/sync-or-async/">Sync or Async</a></li><li><a class=" " href="/guides/new-responses/">New Responses</a></li><li><a class=" " href="/guides/accessibility/">Accessibility</a></li></ul></menu><menu class="my-0 mx-5"><h3>rendering</h3><ul><li><a class=" " href="/guides/react-dom/">React DOM</a></li><li><a class=" " href="/guides/react-native/">React Native</a></li><li><a class=" " href="/guides/svelte/">Svelte</a></li><li><a class=" " href="/guides/vue/">Vue</a></li></ul></menu><menu class="my-0 mx-5"><h3>advanced</h3><ul><li><a class=" " href="/guides/route-interactions/">Route Interactions</a></li><li><a class=" " href="/guides/side-effects/">Side Effects</a></li><li><a class=" " href="/guides/code-splitting/">Code Splitting</a></li><li><a class=" " href="/guides/loading/">Loading Route Data</a></li><li><a class=" " href="/guides/ssr/">Server-Side Rendering</a></li><li><a class=" " href="/guides/apollo/">Apollo Integration</a></li></ul></menu></ul></div></li><li class="p-0 pr-2 pl-0" aria-haspopup="true"><a class=" text-gray-100 text-xl no-underline h-10 flex items-center px-2 border-0 border-b-2 border-purple hover:text-bright-orange " href="/tutorial/">Tutorials</a><div class="hidden absolute w-screen left-0 text-purple border-0 border-b-2 border-purple"><ul class="flex flex-row flex-no-wrap justify-start bg-light-blue list-none m-0 p-0"><menu class="my-0 mx-5"><h3>Basic</h3><ul><li><a class=" " href="/tutorial/react-basics/">React Basics</a></li><li><a class=" " href="/tutorial/vue-basics/">Vue Basics</a></li></ul></menu><menu class="my-0 mx-5"><h3>Advanced</h3><ul><li><a class=" " href="/tutorial/react-advanced/">React Advanced</a></li></ul></menu></ul></div></li><li class="p-0 pr-2 pl-0" aria-haspopup="true"><a class=" text-gray-100 text-xl no-underline h-10 flex items-center px-2 border-0 border-b-2 border-purple hover:text-bright-orange " href="/examples/">Examples</a><div class="hidden absolute w-screen left-0 text-purple border-0 border-b-2 border-purple"><ul class="flex flex-row flex-no-wrap justify-start bg-light-blue list-none m-0 p-0"><menu class="my-0 mx-5"><ul style="margin:0 25px"><li><a class=" " href="/examples/basic/">Basic</a></li><li><a class=" " href="/examples/accessibility/">Focus Management</a></li><li><a class=" " href="/examples/active/">Active Routes</a></li><li><a class=" " href="/examples/async/">Async Routes &amp; Navigation</a></li><li><a class=" " href="/examples/breadcrumbs/">Breadcrumbs</a></li><li><a class=" " href="/examples/confirmation/">Navigation Confirmation</a></li><li><a class=" " href="/examples/redirects/">Redirects</a></li><li><a class=" " href="/examples/multi-body/">Multiple Body Components</a></li><li><a class=" " href="/examples/transitions/">Route Transitions</a></li><li><a class=" " href="/examples/modal/">Modal Content</a></li><li><a class=" " href="/examples/spotify/">Spotify Clone</a></li><li><a class=" " href="/examples/twitch/">Twitch Clone</a></li><li><a class=" " href="/examples/code-splitting/">Code Splitting</a></li><li><a class=" " href="/examples/script-tags/">Script Tags</a></li><li><a class=" " href="/examples/server-rendering/">Server Rendering</a></li><li><a class=" " href="/examples/side-effects/">Side Effects</a></li></ul></menu></ul></div></li><li class="p-0 pr-2 pl-0"><a class="text-gray-100 text-xl no-underline h-10 flex items-center px-2 border-0 border-b-2 border-purple hover:text-bright-orange" href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></header><menu class="fixed w-screen h-8 left-0 bottom-0 flex flex-row flex-no-wrap justify-between z-50"><button class="h-8 flex-grow text-xl border-0 bg-button-green md:hidden">Menu</button></menu><menu hidden="" class=" fixed overflow-y-scroll w-screen h-screen bg-gray-100 z-40 p-0 pb-10 md:hidden"><div data-reach-tabs=""><div data-reach-tab-list="" role="tablist"><button data-reach-tab="" role="tab" id="tab:null:0" tabindex="0" aria-selected="true" aria-controls="panel:null:0" data-selected="">Main</button><button data-reach-tab="" role="tab" id="tab:null:1" tabindex="-1" aria-selected="false" aria-controls="panel:null:1">Page</button></div><div data-reach-tab-panels="" class="py-0 px-3"><div data-reach-tab-panel="" role="tabpanel" tabindex="-1" aria-labelledby="tab:null:0" id="panel:null:0"><ul class="my-1 mx-0 p-0 list-none"><li><a class=" home-link" href="/">Curi</a></li><li><ul><li class="mb-3"><button title="Toggle group visibility" class="cursor-pointer text-left w-full bg-transparent border-0 p-0 text-purple"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg" class="inline-block"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>API</button></li></ul></li><li><ul><li class="mb-3"><button title="Toggle group visibility" class="cursor-pointer text-left w-full bg-transparent border-0 p-0 text-purple"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg" class="inline-block"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>Guides</button></li></ul></li><li><ul><li class="mb-3"><button title="Toggle group visibility" class="cursor-pointer text-left w-full bg-transparent border-0 p-0 text-purple"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg" class="inline-block"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>Tutorials</button></li></ul></li><li><ul><li class="mb-3"><button title="Toggle group visibility" class="cursor-pointer text-left w-full bg-transparent border-0 p-0 text-purple"><svg width="25" height="15" viewBox="0 0 25 15" xmlns="http://www.w3.org/2000/svg" class="inline-block"><path d="M2,5 l5,5 l5,-5" fill="none" stroke="black" stroke-width="3"></path></svg>Examples</button></li></ul></li><li><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></div><div data-reach-tab-panel="" role="tabpanel" tabindex="-1" aria-labelledby="tab:null:1" hidden="" id="panel:null:1"><menu class="max-w-full p-0 m-0"><ol class="my-1 mx-0 p-0 list-none p-0"><li><a class="no-underline" href="#installation">Installation</a></li><li><a class="no-underline" href="#about">About</a></li><li><a class="no-underline" href="#API">API</a><ol class="my-1 mx-0 p-0 list-none pl-3"><li><a class="no-underline" href="#curi">curi</a><ol class="my-1 mx-0 p-0 list-none pl-3"><li><a class="no-underline" href="#arguments">Arguments</a></li><li><a class="no-underline" href="#router">Router</a></li></ol></li><li><a class="no-underline" href="#prepareRoutes">prepareRoutes</a></li><li><a class="no-underline" href="#route-objects">Route Objects</a></li></ol></li></ol></menu></div></div></div></menu><main tabindex="-1" class="w-screen max-w-full pt-3 px-3 pb-0 mb-10 md:pt-10 md:px-0 md:mb-0"><div class="relative md:flex md:flex-row md:flex-no-wrap md:max-w-full"><div class="hidden md:block md:w-64 md:bg-gray-100 md:fixed md:bottom-0 md:overflow-auto md:flex-grow-0 md:flex-shrink-0 md:p-6 md:mr-6" style="top:2rem"><menu class="max-w-full p-0 m-0"><ol class="my-1 mx-0 p-0 list-none p-0"><li><a class="no-underline" href="#installation">Installation</a></li><li><a class="no-underline" href="#about">About</a></li><li><a class="no-underline" href="#API">API</a><ol class="my-1 mx-0 p-0 list-none pl-3"><li><a class="no-underline" href="#curi">curi</a><ol class="my-1 mx-0 p-0 list-none pl-3"><li><a class="no-underline" href="#arguments">Arguments</a></li><li><a class="no-underline" href="#router">Router</a></li></ol></li><li><a class="no-underline" href="#prepareRoutes">prepareRoutes</a></li><li><a class="no-underline" href="#route-objects">Route Objects</a></li></ol></li></ol></menu></div><article class="md:ml-64 md:pl-8"><h1 tabindex="-1" class="outline-none">@curi/<!-- -->router</h1><section class="flex flex-col flex-no-wrap items-start"><label class="m-0 mr-1 mb-1">Version:<!-- --> <select class="font-serif my-1 mx-0 text-xl"><option selected="" value="v1">1.1.1</option><option value="v2">2.1.0</option></select></label><a href="https://github.com/pshrmn/curi/tree/master/packages/router" class="m-0 mr-1 mb-1"><img src="/static/img/github-logo.png" alt="GitHub logo" class="inline-block mr-2 h-4"/>GitHub Repo</a><a href="https://npmjs.com/package/@curi/router" class="m-0 mr-1 mb-1"><img src="/static/img/npm-logo.png" alt="NPM logo" class="inline-block mr-2 h-4"/>NPM Package</a></section><section class="mt-3 md:max-w-2xl"><h2 id="about" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#about">About</a></h2><p>The <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">@curi/router</code> package is used to create a router.</p></section><section class="mt-3 md:max-w-2xl"><h2 id="installation" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#installation">Installation</a></h2><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-bash md:whitespace-pre-wrap">npm install @curi/router</code></pre></figure><p class="m-0 mb-4 text-base md:text-lg ">UMD scripts script are also available through<!-- --> <a href="https://unpkg.com/@curi/router@1.1.1/dist/">Unpkg</a>. You can access the package&#x27;s exports using <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">window.<!-- -->Curi</code>.</p></section><section class="mt-3 md:max-w-2xl"><h2 id="API" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#API">API</a></h2><section class="mt-3 md:max-w-2xl"><h2 id="curi" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#curi">curi</a></h2><p>The <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">curi</code> export is a function to create a router. It has two required arguments: a <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">history</code> object and a <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">routes</code> <!-- -->array, and an optional third argument: an <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">options</code> object.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">import { curi } from &#x27;@curi/router&#x27;;

const router = curi(history, routes, options);</code></pre></figure><section class="mt-3 md:max-w-2xl"><h3 id="arguments" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#arguments">Arguments</a></h3><section class="mt-3 md:max-w-2xl"><h4 id="history" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#history">history</a></h4><p>A <a href="https://github.com/pshrmn/hickory">Hickory</a> history object that will power navigation within the application. The<!-- --> <a href="/guides/getting-started/#history-object">getting started guide</a> <!-- -->provides more information on how to choose which history type is right for an application.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-jsx md:whitespace-pre-wrap">import { Browser } from &quot;@hickory/browser&quot;;

const history = Browser();
const router = curi(history, routes);</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h4 id="routes" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#routes">routes</a></h4><p>An array of prepared<!-- --> <a href="/guides/routes/">route</a> <!-- -->objects describing all valid routes in the application.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-jsx md:whitespace-pre-wrap">const routes = prepareRoutes([
  { name: &quot;Home&quot;, path: &quot;&quot; },
  { name: &quot;About&quot;, path: &quot;about&quot; }
]);

const router = curi(history, routes);</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h4 id="options" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#options">options</a></h4><p>An optional object with additional properties that can be passed to the router.</p><section class="mt-3 md:max-w-2xl"><h5 id="options-route" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#options-route"><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">route</code></a></h5><p>An array of<!-- --> <a href="/guides/route-interactions/">route interactions</a>. These are functions for interacting with routes based on their<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">name</code>.</p><p>The <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">pathname</code> interaction is included by default; any other interactions are provided through this array.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">import active from &quot;@curi/route-active&quot;;
import ancestors from &quot;@curi/route-ancestors&quot;;

const routes = prepareRoutes([{ name: &quot;Home&quot;, path: &quot;&quot; }]);

const router = curi(history, routes, {
  route: [active(), ancestors()]
});</code></pre></figure><p>Route interactions are called via the router&#x27;s <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">route</code> <!-- -->object.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">router.route.active(&quot;Home&quot;);
// returns true when location.pathname = &quot;/&quot;

router.route.pathname(&quot;Home&quot;);
// returns &quot;/&quot;</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h5 id="options-sideEffects" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#options-sideEffects"><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">sideEffects</code></a></h5><p>An array of<!-- --> <a href="/guides/side-effects/">side effect</a> <!-- -->objects.</p><div class="overflow-x-auto"><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>effect</td><td>An observer that will be called whenever a response is generated.</td></tr><tr><td>after</td><td>(default <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">false</code>) controls whether the side effect is called before or after non-side effect observers.</td></tr></tbody></table></div><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">import scroll from &quot;@curi/side-effect-scroll&quot;;

const router = curi(history, routes, {
  sideEffects: [scroll()]
});</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h5 id="options-external" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#options-external"><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">external</code></a></h5><p>Values that should be accessible to a route&#x27;s <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolve</code> <!-- -->functions and <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">response</code> function.</p><p>Using <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">external</code> allows you to access APIs, data, etc. without having to be able to import it in the module where the routes are defined.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">const client = new ApolloClient();
const router = curi(history, routes, {
  external: { client, greeting: &quot;Hi!&quot; }
});</code></pre></figure><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">const routes = prepareRoutes([
  {
    name: &quot;User&quot;,
    path: &quot;user/:id&quot;,
    resolve: {
      data(match, external) {
        // use the external object to make a query
        return external.client.query()
      }
    }
  }
]);</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h5 id="options-emitRedirects" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#options-emitRedirects"><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">emitRedirects</code></a></h5><p>When <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">false</code> (default is <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">true</code>), response objects with the <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">redirect</code> property<!-- --> <strong>will not be emitted</strong> to observers. This can be useful for avoiding an extra render, but should not be used on the server.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">const routes = prepareRoutes([
  {
    name: &quot;Old&quot;,
    path: &quot;old/:id&quot;,
    response({ params }) {
      // setup a redirect to the &quot;New&quot; route
      return {
        redirect: {
          name: &quot;New&quot;,
          params
        }
      };
    }
  },
  {
    name: &quot;New&quot;,
    path: &quot;new/:id&quot;
  }
]);

const router = curi(history, routes, {
  emitRedirects: false
});
// navigating to &quot;/old/2&quot; will automatically redirect
// to &quot;/new/2&quot; without emitting a response</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h5 id="options-automaticRedirects" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#options-automaticRedirects"><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">automaticRedirects</code></a></h5><p>When the initially matched route is synchronous and redirects, the router&#x27;s automatic redirect will occur before any response handlers (registered with <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">once</code> or <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">observe</code>) are called. This means that they will be called with the response for the location that was redirected to instead of the initial location. This is fine on the client side, but causes issues with server side rendering. When <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">automaticRedirects</code> is<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">false</code>, the automatic redirect will not happen.<!-- --> <strong>Setting <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">automaticRedirects</code> to <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">false</code> is recommend for server side rendering.</strong></p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">const routes = prepareRoutes([
  {
    name: &quot;Old&quot;,
    path: &quot;old/:id&quot;,
    response({ params }) {
      // setup a redirect to the &quot;New&quot; route
      return {
        redirectTo: {
          name: &quot;New&quot;,
          params
        }
      };
    }
  },
  {
    name: &quot;New&quot;,
    path: &quot;new/:id&quot;
  }
]);
const history = InMemory({ locations: [&quot;/old/1&quot; ]});
const router = curi(history, routes, {
  automaticRedirects: false
});
router.once(({ response }) =&gt; {
  // response = { name: &quot;Old&quot;, ... }
});</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h5 id="options-pathnameOptions" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#options-pathnameOptions"><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">pathnameOptions</code></a></h5><p>Curi uses<!-- --> <a href="https://github.com/pillarjs/path-to-regexp"><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">path-to-regexp</code></a> <!-- -->to handle route matching and pathname generation.<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">path-to-regexp</code> can take a custom<!-- --> <a href="https://github.com/pillarjs/path-to-regexp#compile-reverse-path-to-regexp"><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">encode</code></a> <!-- -->function for creating pathnames, which you can specify with this options.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">const router = curi(history, routes, {
  pathOptions: {
    encode: (value, token) =&gt; { /* ... */ }
  }
});</code></pre></figure></section></section></section><section class="mt-3 md:max-w-2xl"><h3 id="router" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#router">Router</a></h3><p>The router has a number of properties for you to use when rendering your application.</p><section class="mt-3 md:max-w-2xl"><h4 id="navigate" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#navigate">navigate(details)</a></h4><p>The <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">navigate</code> method is used to navigate programmatically. It takes a <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">details</code> object with the details of where you want to navigate to as well as the <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">method</code> of navigation.</p><div class="overflow-x-auto"><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>name</td><td>The name of the route to navigate to</td></tr><tr><td>params</td><td>An object of any route params for the named route (and any of its ancestors that require params).</td></tr><tr><td>hash</td><td>The hash string of the location to navigate to.</td></tr><tr><td>query</td><td>The query value of the location to navigate to.</td></tr><tr><td>state</td><td>Any serializable state to attach to the location.</td></tr><tr><td>method</td><td>How to navigate. <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">&quot;PUSH&quot;</code> appends the new location after the current one. <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">&quot;REPLACE&quot;</code> replaces the current location. <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">&quot;ANCHOR&quot;</code> is the default method and acts like clicking a link. This behavior is a mix of<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">&quot;PUSH&quot;</code> and <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">&quot;REPLACE&quot;</code> where the current location is replaced if the new location has the exact same URL.</td></tr><tr><td>finished</td><td>A function to call once the navigation has finished.</td></tr><tr><td>cancelled</td><td>A function to call if the navigation is superseded by another navigation.</td></tr></tbody></table></div><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">const routes = prepareRoutes([
  {
    name: &quot;Album&quot;,
    path: &quot;photos/:albumID&quot;,
    children: [
      { name: &quot;Photo&quot;, path: &quot;:photoID&quot; }
    ]
  },
  // ...
]);
const router = curi(history, routes);

router.navigate({
  name: &quot;Photo&quot;,
  params: { albumID: 123, photoID: 456 }
});
// navigates to &quot;/photos/123/456&quot;
// using default &quot;ANCHOR&quot; method</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h4 id="once" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#once">once(fn, options)</a></h4><p>The <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">once</code> method takes a response handler function. If a response already exists, the function will be called immediately. Otherwise, the function will be called once a new response is created. The <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">{ initial: false }</code> option can be used to prevent an immediate call even if a response already exists.</p><div class="overflow-x-auto"><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>response</td><td>The generated response object.</td></tr><tr><td>navigation</td><td>The navigation&#x27;s <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">action</code> (<code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">PUSH</code>,<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">REPLACE</code>, or <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">POP</code>) and the<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">previous</code> response object.</td></tr><tr><td>router</td><td>The Curi router</td></tr></tbody></table></div><p>When a matched route is async (it has <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolve</code> functions), a response will not be created until the async function(s) have resolved.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">router.once(({ response }) =&gt; {
  // render the application based on the response
});</code></pre></figure><section class="mt-3 md:max-w-2xl"><h5 id="once-options" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#once-options">options</a></h5><div style="overflow-x:scroll"><div class="overflow-x-auto"><table><thead><tr><th>option</th><th>default</th><th>description</th></tr></thead><tbody><tr><td>initial</td><td>true</td><td>When true, the function will be called immediately if a response exists. When false, the response function will not be called until the next response is emitted.</td></tr></tbody></table></div></div><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">router.once(responseHandler, {
  initial: false
});</code></pre></figure></section></section><section class="mt-3 md:max-w-2xl"><h4 id="observe" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#observe">observe(fn, options)</a></h4><p>The <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">observe</code> method takes a response handler function. The response handler will be called every time a new response is emitted (and it a response already exists, the function will be called immediately). The <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">{ initial: false }</code> option can be used to prevent an immediate call even if a response already exists.</p><div class="overflow-x-auto"><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>response</td><td>The generated response object.</td></tr><tr><td>navigation</td><td>The navigation&#x27;s <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">action</code> (<code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">PUSH</code>,<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">REPLACE</code>, or <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">POP</code>) and the<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">previous</code> response object.</td></tr><tr><td>router</td><td>The Curi router</td></tr></tbody></table></div><p>When a matched route is async (it has <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolve</code> functions), a response will not be created until the async function(s) have resolved.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">router.observe(({ response }) =&gt; {
  // render the application based on the response
});</code></pre></figure><section class="mt-3 md:max-w-2xl"><h5 id="observe-options" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#observe-options">options</a></h5><div style="overflow-x:scroll"><div class="overflow-x-auto"><table><thead><tr><th>option</th><th>default</th><th>description</th></tr></thead><tbody><tr><td>initial</td><td>true</td><td>When true, the function will be called immediately if a response exists. When false, the response function will not be called until the next response is emitted.</td></tr></tbody></table></div></div><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">router.observe(responseHandler, {
  initial: false
});</code></pre></figure><p><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">observe</code> returns a function to stop calling the response handler function for new responses.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">const stopObserving = router.observe(
  () =&gt; {...}
);
// the router will now call the observer for all responses

stopObserving();
// the router no longer calls the observer</code></pre></figure></section></section><section class="mt-3 md:max-w-2xl"><h4 id="cancel-property" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#cancel-property">cancel(fn)</a></h4><p>With asynchronous routes, after a user begins navigation, but before the route&#x27;s asynchronous actions have finished, the user does not have a good way to cancel the navigation. They can either refresh the page (causing a full reload) or click a link with the same URL as the current location, but neither of these are intuitive or ideal.</p><p><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">cancel</code> takes an observer function that will be called when navigation starts and when the navigation is finished. When the navigation starts, the observer function will be given a function to cancel the navigation. When the navigation finishes, the function will be called with <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">undefined</code>.</p><p>Calling <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">cancel</code> returns a function to stop observing.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">const stopCancelling = router.cancel(fn =&gt; {
  if (fn === undefined) {
    // the navigation has finished/been cancelled
  } else {
    // calling fn will cancel the navigation
  }
});</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h4 id="current-property" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#current-property">current</a></h4><p>The <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">router.current</code> method returns the current<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">response</code> and <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">navigation</code> objects.</p><aside class="py-2 px-1 my-1 mx-0 border-gray-300 bg-gray-200"><strong>Note:</strong> <p>If you call <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">router.current</code> before the initial response has been emitted, the <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">response</code> and<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">navigation</code> properties will be <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">null</code>.</p></aside><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">const router = curi(history, routes);
const tooSoon = router.current();
// tooSoon.response === null
// tooSoon.navigation === null

router.once(({ response, navigation }) =&gt; {
  const perfect = router.current();
  // perfect.response === response
  // perfect.navigation === navigation
});</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h4 id="router-route" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#router-route">route</a></h4><p>The router&#x27;s<!-- --> <a href="/guides/route-interactions/">route interactions</a> <!-- -->are accessed through the <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">route</code> property. These are used to interact with routes using their names.</p><section class="mt-3 md:max-w-2xl"><h5 id="pathname-interaction" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#pathname-interaction">pathname</a></h5><p>Curi includes one built-in interaction, <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">pathname</code>, which generates location pathnames using the name of a route and an optional object containing any necessary params.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">const routes = prepareRoutes([
  { name: &#x27;User&#x27;, path: &#x27;user/:id&#x27; }
]);
const router = curi(history, routes);
const userPathname = router.route.pathname(
  &#x27;User&#x27;,
  { id: &#x27;12345&#x27; }
);
// userPathname === &#x27;/user/12345&#x27;</code></pre></figure></section></section><section class="mt-3 md:max-w-2xl"><h4 id="refresh-property" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#refresh-property">refresh</a></h4><p>The <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">refresh</code> function takes an array of new routes, which will replace the existing routes. The router will emit a new response based on the current location.</p><p>The function can be called without any arguments and it will emit a response using the existing routes.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">const oldRoutes = prepareRoutes([...]);
const newRoutes = prepareRoutes([...]);

const router = curi(history, oldRoutes);
// generates responses using old routes

router.refresh(newRoutes);
// generates responses using new routes</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h4 id="history-property" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#history-property">history</a></h4><p>The route&#x27;s history object, in case you need to interact directly with that.</p></section></section></section><section class="mt-3 md:max-w-2xl"><h2 id="prepareRoutes" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#prepareRoutes">prepareRoutes</a></h2><p>The <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">prepareRoutes</code> export is used to build the routes for Curi. This will pre-compile paths for location matching and pathname building, which is particularly useful for server rendering.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">import { prepareRoutes } from &#x27;@curi/router&#x27;;

const routes = prepareRoutes([
  { name: &quot;Home&quot;, path: &quot;&quot; },
  // ...
  { name: &quot;Not Found&quot;, path: &quot;(.*)&quot; }
]);</code></pre></figure><aside class="py-2 px-1 my-1 mx-0 border-gray-300 bg-light-orange border-bright-orange"><strong>Warning:</strong> <p>Passing a non-prepared routes array to <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">curi</code> is still supported, but deprecated and will be removed in the next major version.</p></aside></section><section class="mt-3 md:max-w-2xl"><h2 id="route-objects" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#route-objects">Route Objects</a></h2><section class="mt-3 md:max-w-2xl"><h3 id="name" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#name">route.name</a></h3><p>A string, this must be unique for every route.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">[
  { name: &#x27;Home&#x27; },
  { name: &#x27;Album&#x27; },
  { name: &#x27;Not Found&#x27; }
];</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h3 id="path" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#path">route.path</a></h3><p>A string pattern describing what the route matches. Whenever the router receives a new location, it will loop through the known route paths to determine which one matches the new location&#x27;s<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">pathname</code> the best.</p><p>Curi uses<!-- --> <a href="https://github.com/pillarjs/path-to-regexp#parameters"><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">path-to-regexp</code></a> <!-- -->for path matching, which enables routes to have<!-- --> <a href="https://github.com/pillarjs/path-to-regexp#parameters">path parameters</a>. When a route with parameters matches a location, the parameters will be be parsed from the location&#x27;s <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">pathname</code>.</p><p><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">path</code> strings should <strong>not</strong> have a leading slash.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">[
  { name: &#x27;Home&#x27;, path: &#x27;&#x27; },
  // when the pathname is a/yo, albumID = &quot;yo&quot;
  { name: &#x27;Album&#x27;, path: &#x27;a/:albumID&#x27; },
  // the path (.*) matches every pathname
  { name: &#x27;Not Found&#x27;, path: &#x27;(.*)&#x27; }
];

// don&#x27;t include a leading forward slash
// { name: &#x27;Home&#x27;, path: &#x27;/&#x27; }</code></pre></figure><aside class="py-2 px-1 my-1 mx-0 border-gray-300 bg-light-orange border-bright-orange"><strong>Warning:</strong> <p><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">path-to-regexp</code> supports arrays and RegExps, but Curi only supports string paths.</p></aside></section><section class="mt-3 md:max-w-2xl"><h3 id="resolve" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#resolve">route.resolve</a></h3><p>The <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolve</code> object groups async functions that will be called when the route matches.</p><p>A route with any <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolve</code> functions is asynchronous, while one with no <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolve</code> functions is synchronous. You can read more about this is the<!-- --> <a href="/guides/sync-or-async/">sync or async</a> <!-- -->guide.</p><p><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolve</code> functions are called every time that a route matches the current location.</p><p><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolve</code> functions will be passed an object with the matched route properties: <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">name</code>, <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">params</code>,<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">partials</code>, and <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">location</code>.</p><aside class="py-2 px-1 my-1 mx-0 border-gray-300 bg-gray-200"><strong>Note:</strong> <p>You should not perform side effects (e.g. passing the loaded data to a Redux store) in <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolve</code> functions because it is possible that navigating to the route might be cancelled. If you must perform side effects for a route, you should do so in<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">response</code>.</p></aside><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">const about = {
  name: &#x27;About&#x27;,
  path: &#x27;about&#x27;,
  resolve: {
    body: () =&gt; import(&#x27;./components/About&#x27;),
    data: () =&gt; fetch(&#x27;/api/about&#x27;)
  }
};</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h3 id="response" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#response">route.response</a></h3><p>A function for modifying the response object. This returns an object whose properties will be merged with the matched route properties to create the &quot;final&quot; response.</p><p>Only valid properties will be merged onto the response; everything else will be ignored. The valid properties are:</p><ol><li><p><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">body</code> - This is usually what you will render.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">import Home from &quot;./components/Home&quot;;
const routes = prepareRoutes([
  {
    name: &quot;Home&quot;,
    path: &quot;&quot;,
    response() {
      return { body: Home };
    }
  },
  // ...
]);
// response = { body: Home, ... }</code></pre></figure></li><li><p><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">status</code> - A number. This is useful for redirects or locations caught by your catch-all route while using server-side rendering. The default status value is <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">200</code>.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">{
  response(){
    return {
      status: 301,
      redirectTo: {...}
    };
  }
}
// response = { status: 301, ... }</code></pre></figure></li><li><p><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">error</code> - If an error occurs with the route&#x27;s<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolve</code> methods, you might want to attach an error message to the response.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">{
  resolve: {
    test: () =&gt; Promise.reject(&quot;woops!&quot;)
  },
  response({ error }) {
    return { error };
  }
}
// response = { error: &quot;woops!&quot;, ... }</code></pre></figure></li><li><p><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">data</code> - Anything you want it to be.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">{
  response() {
    return { data: Math.random() };
  }
}
// response = { data: 0.8651606708109429, ... }</code></pre></figure></li><li><p><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">title</code> - This can be used with<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">@curi/side-effect-title</code> to update the page&#x27;s<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">document.title</code>.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">{
  response({ params }) {
    return { title: `User ${params.id}` };
  }
}
// when visting /user/2
// response = { title: &quot;User 2&quot;, ... }</code></pre></figure></li><li><p><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">redirectTo</code> - An object with the <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">name</code> of the route to redirect to, <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">params</code> (if required), and optional <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">hash</code>, <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">query</code>, and <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">state</code> <!-- -->properties.</p><p>The other values are copied directly, but <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">redirectTo</code> <!-- -->will be turned into a location object using the object&#x27;s<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">name</code> (and <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">params</code> if required).</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">[
  {
    name: &quot;Old Photo&quot;,
    path: &quot;photo/:id&quot;,
    response({ params }) {
      return {
        redirectTo: { name: &quot;Photo&quot;, params }
      };
    }
  },
  {
    name: &quot;New Photo&quot;,
    path: &quot;p/:id&quot;
  }
]
// when the user navigates to /photo/1:
// response = { redirectTo: { pathname: &quot;/p/1&quot;, ... } }</code></pre></figure></li></ol><p>This function is passed an object with a number of properties that can be useful for modifying the response.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">{
  response: ({ match, resolved }) =&gt; {
    // ...
  }
}</code></pre></figure><ul><section class="mt-3 md:max-w-2xl"><h3 id="response-match" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#response-match">match</a></h3><p>An object with the matched route properties of a response.</p><div class="overflow-x-auto"><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>name</td><td>the name of the matched route</td></tr><tr><td>params</td><td>route parameters parsed from the location</td></tr><tr><td>partials</td><td>the names of any ancestor routes of the matched route</td></tr><tr><td>location</td><td>the location that was used to match the route</td></tr><tr><td>key</td><td>the location&#x27;s <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">key</code>, which is a unique identifier</td></tr></tbody></table></div></section><section class="mt-3 md:max-w-2xl"><h3 id="response-resolved" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#response-resolved">resolved</a></h3><p><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolved</code> is an object with the values resolved by the<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolve</code> functions.</p><p>If a route isn&#x27;t async, <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolved</code> will be<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">null</code>.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">// attach resolved data to the response
const user = {
  name: &#x27;User&#x27;,
  path: &#x27;:id&#x27;,
  resolve: {
    data: ({ params, location }) =&gt; (
      fetch(`/api/users/${params.id}`)
        .then(resp =&gt; JSON.parse(resp))
    ),
  },
  response: ({ resolved }) =&gt; {
    return {
      data: resolved.data
    };
  }
}</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h3 id="response-error" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#response-error">error</a></h3><p><code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">error</code> is an error thrown by one of the route&#x27;s<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">resolve</code> functions.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">// check if any of a route&#x27;s resolve functions threw
const user = {
  name: &#x27;User&#x27;,
  path: &#x27;:id&#x27;,
  resolve: {
    data: ({ params, location }) =&gt; (
      fetch(`/api/users/${params.id}`)
        .then(resp =&gt; JSON.parse(resp))
    ),
  },
  response: ({ error, resolved }) =&gt; {
    if (error) {
      return { error };
    }
    return {
      data: resolved.data
    };
  }
}</code></pre></figure></section></ul></section><section class="mt-3 md:max-w-2xl"><h3 id="children" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#children">children</a></h3><p>An optional array of route objects for creating nested routes. Any child routes will be matched relative to their parent route&#x27;s<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">path</code>. This means that if a parent route&#x27;s <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">path</code> <!-- -->string is <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">&#x27;one&#x27;</code> and a child route&#x27;s <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">path</code> string is <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">&#x27;two&#x27;</code>, the child will match when the pathname is<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">&#x27;one/two&#x27;</code>.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">// &#x27;/a/Coloring+Book/All+Night&#x27; will be matched
// by the &quot;Song&quot; route, with the params
// { album: &#x27;Coloring+Book&#x27;, title: &#x27;All+Night&#x27; }
{
  name: &#x27;Album&#x27;,
  path: &#x27;a/:album&#x27;,
  children: [
    {
      name: &#x27;Song&#x27;,
      path: &#x27;:title&#x27;
    }
  ]
}</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h3 id="params" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#params">params</a></h3><p>When <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">path-to-regexp</code> matches your paths, all parameters are extracted as strings. If you prefer for some route params to be other types, you can provide functions to transform params using the<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">route.params</code> object.</p><p>Properties of the <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">route.params</code> object are the names of params to be parsed. The paired value should be a function that takes a string (the value from the <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">pathname</code>) and returns a new value (transformed using the function you provide).</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">const routes = prepareRoutes([
  {
    name: &#x27;Number&#x27;,
    path: &#x27;number/:num&#x27;,
    params: {
      num: n =&gt; parseInt(n, 10)
    }
  }
]);

// when the user visits /number/1,
// response.params will be { num: 1 }
// instead of { num: &quot;1&quot; }</code></pre></figure></section><section class="mt-3 md:max-w-2xl"><h3 id="pathOptions" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#pathOptions">pathOptions</a></h3><p>If you need to provide different path options than<!-- --> <a href="https://github.com/pillarjs/path-to-regexp#usage">the defaults</a> <!-- -->used by <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">path-to-regexp</code>, you can provide them with a<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">pathOptions</code> object.</p><aside class="py-2 px-1 my-1 mx-0 border-gray-300 bg-gray-200"><strong>Note:</strong> <p>If a route has a children array property, it will<!-- --> <strong>always</strong> have the <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">end</code> path option set to false.</p></aside></section><section class="mt-3 md:max-w-2xl"><h3 id="extra" class="hash-anchor-fix outline-none" tabindex="-1"><a class="header-link no-underline" href="#extra">extra</a></h3><p>If you have any additional properties that you want attached to a route, use the <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">extra</code> property. You will be able to use<!-- --> <code class=" p-1 rounded whitespace-normal background-white text-purple" style="text-shadow:none">route.extra</code> in any custom route interactions.</p><figure class="m-0 mb-4"><pre class="align-top h-full whitespace-pre-wrap"><code class="language-javascript md:whitespace-pre-wrap">const routes = prepareRoutes([
  {
    name: &#x27;A Route&#x27;,
    path: &#x27;a-route&#x27;,
    extra: {
      transition: &#x27;fade&#x27;
    }
  },
  {
    name: &#x27;B Route&#x27;,
    path: &#x27;b-route&#x27;,
    extra: {
      enter: &#x27;slide-right&#x27;
    }
  }
]);</code></pre></figure></section></section></section></article></div></main></div>
    <script src="https://unpkg.com/react@16.13.1/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.13.1/umd/react-dom.production.min.js"></script>
    <script src="/static/js/highlight.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
