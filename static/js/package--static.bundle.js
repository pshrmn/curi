(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),s={title:"Arguments",hash:"staticFiles-arguments"},o={title:"staticFiles",hash:"staticFiles"};var i={title:"Arguments",hash:"pathnames-arguments"},c={title:"pathnames",hash:"pathnames"};var u={about:r.a.createElement(l.b,null,r.a.createElement("p",null,"The ",r.a.createElement(l.f,null,"@curi/static")," package is for creating static assets for your server. Its exported functions should be used in a build script, not the source of an application.")),api:r.a.createElement(l.a,null,r.a.createElement(function(){return r.a.createElement(l.e,{meta:o},r.a.createElement("p",null,"The ",r.a.createElement(l.f,null,"staticFiles")," function is used to generate HTML files for a static website and save them to the disk. An HTML file will be created for each page that you provide."),r.a.createElement("p",null,"Files will be created as ",r.a.createElement(l.f,null,"index.html")," in the directory for their path. For example, the page for the pathname ",r.a.createElement(l.f,null,"/about")," ","would create an ",r.a.createElement(l.f,null,"/about/index.html")," file."),r.a.createElement(l.d,null,'import { staticFiles } from \'@curi/static\';\nimport { join } from "path";\n\nimport routes from "../src/routes";\n\nstaticFiles({\n  routes,\n  pages: [{ name: "Home" }, { name: "About" }],\n  output: {\n    dir: join(process.cwd(), "public"),\n    render: () => {...}\n  }\n});'),r.a.createElement("p",null,r.a.createElement(l.f,null,"staticFiles")," returns a Promise that resolve with an array of results. Each entry in the results array contains the"," ",r.a.createElement(l.f,null,"pathname")," of the result, a ",r.a.createElement(l.f,null,"success")," boolean, and, if"," ",r.a.createElement(l.f,null,"success")," is false, the ",r.a.createElement(l.f,null,"error")," that occurred."),r.a.createElement("p",null,"It can be useful to log the results to easily see what pages were successfully built and which had issues."),r.a.createElement(l.d,null,'staticFiles({...})\n  .then(results => {\n    const resultString = results\n      .map(result => {\n        return result.success\n          ? `✔ ${result.pathname}`\n          : `✖ ${result.pathname} (${result.error.message})`;\n      })\n      .join("\\n");\n    console.log(resultString);\n  });'),r.a.createElement(l.e,{tag:"h4",meta:s},r.a.createElement("p",null,"The ",r.a.createElement(l.f,null,"staticFiles")," functions is passed an object of arguments."),r.a.createElement(l.e,{tag:"h5",meta:{title:"pages",hash:"staticFiles-pages"}},r.a.createElement("p",null,"An array of page descriptors. A page descriptor is an object with a"," ",r.a.createElement(l.f,null,"name")," property defining which route to generate a page for. If the route (or any of its ancestors) has any params, they should be passed as an object with the ",r.a.createElement(l.f,null,"params")," property."),r.a.createElement(l.d,null,'const pages = [\n  { name: "Home" },\n  { name: "User", params: { id: 1 }},\n  { name: "User", params: { id: 2 }},\n];\n\n\nstaticFiles({\n  // ...\n  pages\n});')),r.a.createElement(l.e,{tag:"h5",meta:{title:"router",hash:"staticFiles-router"}},r.a.createElement("p",null,"The router property is an object with two properties:"," ",r.a.createElement(l.f,null,"routes")," and ",r.a.createElement(l.f,null,"options"),"."),r.a.createElement(l.e,{tag:"h6",meta:{title:"routes",hash:"staticFiles-routes"}},r.a.createElement("p",null,r.a.createElement(l.f,null,"routes")," is an array of route descriptors. This is the same array that you would use to create a router in client-side code."),r.a.createElement(l.d,null,'const routes = prepare_routes([\n  {\n    name: "Home",\n    path: "",\n  },\n  {\n    name: "User",\n    path: "u/:id"\n  }\n]);\n\nstaticFiles({\n  // ...\n  router: {\n    routes\n  }\n});')),r.a.createElement(l.e,{tag:"h6",meta:{title:"options",hash:"staticFiles-options"}},r.a.createElement("p",null,"The ",r.a.createElement(l.f,null,"options")," object is the options for a router. This is only necessary if you need to use side effects or other route options."),r.a.createElement("p",null,"When you call ",r.a.createElement(l.f,null,"staticFiles"),", a router is created for each page. ",r.a.createElement(l.f,null,"staticFiles")," creates its own ",r.a.createElement(l.f,null,"history")," ","instances, and gets its routes from the ",r.a.createElement(l.f,null,"routes")," options, but the router may also need to be provided with other options."),r.a.createElement(l.d,null,"staticFiles({\n  // ...\n  router: {\n    options: {\n      sideEffects: [...]\n    }\n  }\n});"))),r.a.createElement(l.e,{tag:"h5",meta:{title:"fallback",hash:"staticFiles-fallback"}},r.a.createElement("p",null,"Some hosts allow you to provide a fallback page for when a request doesn't match any of your generated HTML files. The"," ",r.a.createElement(l.f,null,"fallback")," option takes the ",r.a.createElement(l.f,null,"pathname")," it should generate page contents for and the ",r.a.createElement(l.f,null,"filename")," to save the file as."),r.a.createElement(l.d,null,'staticFiles({\n  // ...\n  fallback: {\n    pathname: "/404",\n    filename: "404.html"\n  }\n});')),r.a.createElement(l.e,{tag:"h5",meta:{title:"output",hash:"staticFiles-output"}},r.a.createElement("p",null,"The ",r.a.createElement(l.f,null,"output")," property is used to describe how output files are generated and where they are stored."),r.a.createElement(l.e,{tag:"h6",meta:{title:"render",hash:"staticFiles-render"}},r.a.createElement("p",null,"A function that takes the emitted ",r.a.createElement(l.f,null,"response"),","," ",r.a.createElement(l.f,null,"navigation"),", and ",r.a.createElement(l.f,null,"router")," for a location and returns the page's HTML."),r.a.createElement("p",null,"How the content is generated will depend on what type of application is being built. For a React application, this would call the ",r.a.createElement(l.f,null,"renderToString")," method from"," ",r.a.createElement(l.f,null,"react-dom/server"),". A Vue application would use"," ",r.a.createElement(l.f,null,"vue-server-renderer"),"."),r.a.createElement("p",null,r.a.createElement(l.f,null,"render")," is expected to return the complete HTML for a page"),r.a.createElement("p",null,"If the ",r.a.createElement(l.f,null,"response")," should not be rendered, the"," ",r.a.createElement(l.f,null,"render")," function should throw an error."),r.a.createElement(l.d,{lang:"jsx"},'// for a React application\nimport { renderToString } from "react-dom";\nimport { createRouterComponent } from "@curi/react-dom";\n\nfunction render(emitted) {\n  const { router, response } = emitted;\n  // if the route shouldn\'t be rendered, throw\n  if (response.redirect) {\n    throw new Error(`${response.location.pathname} redirects`);\n  }\n\n  const Router = createRouterComponent(router);\n  // generate markup\n  const markup = renderToString(\n    <Router>\n      <App />\n    </Router>\n  );\n\n  // return full HTML for the page\n  return `<!doctype html>\n<html>\n  <head>...</head>\n  <body>\n    <div id="root">\n      ${markup}\n    </div>\n  </body>\n</html>`;\n}\n\nstaticFiles({\n  // ...\n  output: {\n    render\n  }\n});')),r.a.createElement(l.e,{tag:"h6",meta:{title:"dir",hash:"staticFiles-dir"}},r.a.createElement("p",null,"The folder where the generated HTML files should be saved."),r.a.createElement(l.d,null,'staticFiles({\n  // ...\n  output: {\n    dir: "dist"\n  }\n})')))))},null),r.a.createElement(function(){return r.a.createElement(l.e,{meta:c},r.a.createElement("p",null,"The ",r.a.createElement(l.f,null,"pathnames")," function is used to generate pathnames from an array of provided page descriptors. This can be useful for generating a sitemap."),r.a.createElement(l.e,{tag:"h4",meta:i},r.a.createElement(l.e,{tag:"h5",meta:{title:"routes",hash:"pathnames-routes"}},r.a.createElement("p",null,"The array of route descriptors that is passed to a router."),r.a.createElement(l.d,null,'routes = prepare_routes([\n  {\n    name: "Home",\n    path: "",\n  },\n  {\n    name: "User",\n    path: "u/:id"\n  }\n]);\n\n\nconst paths = pathnames({\n  // ...\n  routes\n});')),r.a.createElement(l.e,{tag:"h5",meta:{title:"pages",hash:"pathnames-pages"}},r.a.createElement("p",null,"An array of page descriptors. A page descriptor is an object with a"," ",r.a.createElement(l.f,null,"name")," property defining which route to generate a page for. If the route (or any of its ancestors) has any params, they should be passed as an object with the ",r.a.createElement(l.f,null,"params")," property."),r.a.createElement(l.d,null,'const pages = [\n  { name: "Home" },\n  { name: "User", params: { id: 1 }},\n  { name: "User", params: { id: 2 }},\n];\n\n\nconst paths = pathnames({\n  // ...\n  pages\n});')),r.a.createElement(l.e,{tag:"h5",meta:{title:"routerOptions",hash:"pathnames-routerOptions"}},r.a.createElement("p",null,"The options for a router, predominantly useful for passing any route interactions the application may need while rendering."),r.a.createElement(l.d,null,'import active from "@curi/active";\nconst routerOptions = {\n  routes: [active()]\n};\n\nconst paths = pathnames({\n  // ...\n  routerOptions\n});'))))},null))},m=[{title:"Installation",hash:"installation"},{title:"About",hash:"about"},{title:"API",hash:"API",children:[o,c]}];a.d(t,"sections",function(){return u}),a.d(t,"contents",function(){return m})}}]);