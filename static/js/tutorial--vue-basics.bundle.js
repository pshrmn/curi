(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{27:function(e,t,n){"use strict";n.r(t),n.d(t,"component",function(){return T}),n.d(t,"contents",function(){return x});var a=n(0),r=n.n(a),o=n(2),l=n(24),i={title:"Setup",hash:"setup"},c={title:"History and Locations",hash:"history"},s={title:"Path basics",hash:"path-basics"},u={title:"Defining the Routes",hash:"defining-routes",children:[s]},h={title:"Announcing Navigation",hash:"announcing-navigation"},m={title:"The Vue Plugin",hash:"plugin"},p={title:"The Router",hash:"router",children:[h,m]},d={title:"Responses and Navigation",hash:"responses"},f={title:"Rendering with Vue",hash:"rendering",children:[d]},b={title:"The <curi-link> Component",hash:"link-component"},g={title:"A Navigation Menu",hash:"nav-menu"},E={title:"Linking to Books",hash:"book-links"},w={title:"Navigating between locations",hash:"navigating",children:[b,g,E]},k={title:"The Router's URL & Navigate Methods",hash:"url-nav-method"},v={title:"Let's go shopping",hash:"shopping",children:[k]},y={title:"What's next?",hash:"next"},x=[i,c,u,p,f,w,v,y];function T(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.k,{title:"Vue Basics Tutorial"},r.a.createElement(l.i,null,"In this tutorial, we will be building a website for a bookstore. This will focus on the front-end part of the application."),r.a.createElement(l.h,null,r.a.createElement("li",null,"Learn how to define routes and setup the Curi router."),r.a.createElement("li",null,"Learn how to render Vue components based on the current location."),r.a.createElement("li",null,"Learn how to navigate within the application."))),r.a.createElement(l.e,{meta:i,tag:"h2"},r.a.createElement(l.i,null,"We will be using"," ",r.a.createElement("a",{href:"https://github.com/vuejs/vue-cli"},r.a.createElement(l.f,null,"@vue/cli"))," ","to develop this website."),r.a.createElement(l.g,null,r.a.createElement(l.i,null,"The instructions here assume that you have NodeJS and NPM > 5.2 installed on your computer. If you do not, cannot, or prefer to avoid setup altogether, you can follow along using"," ",r.a.createElement("a",{href:"https://codesandbox.io/"},"CodeSandbox"),". Some of the boilerplate will be different, but the differences are minor.")),r.a.createElement(l.i,null,"Begin by opening a terminal and navigating to the directory where you want to save your code. Then, we will use ",r.a.createElement(l.f,null,"@vue/cli")," to create the application. We"),r.a.createElement(l.b,{lang:"bash"},"# install vue-cli if it isn't already\nnpm install --global @vue/cli\n# create the application\nvue create curi-bookstore\n# select the default option\n\n# enter the new app directory\ncd curi-bookstore\n# start the dev server\nyarn serve"),r.a.createElement(l.i,null,"The dev server will automatically update when we change files, so we can leave that running. We will still be working in the terminal, so you will want to open up a new terminal window/tab and navigate to the application's directory. Once you have done that, there are a few packages that need to be installed."),r.a.createElement(l.b,{lang:"bash"},"yarn add @hickory/browser @curi/router @curi/vue"),r.a.createElement(l.i,null,"The ",r.a.createElement(l.f,null,"@hickory/browser")," package will be used to create an object that interacts with the browser to power navigation (e.g. updates the URI in the address bar when you click a link)."," ",r.a.createElement(l.f,null,"@curi/router")," provides the function to actually create the router. ",r.a.createElement(l.f,null,"@curi/vue")," gives us a plugin for Vue and some Vue components that interact with the router.")),r.a.createElement(l.e,{meta:c,tag:"h2"},r.a.createElement(l.i,null,"URIs can be broken into parts to identify a location. With a single-page application, we don't care about the URI's protocol (http, https) or its hostname (www.example.com). The properties we care about are the ",r.a.createElement(l.f,null,"pathname"),", ",r.a.createElement(l.f,null,"hash"),", and ",r.a.createElement(l.f,null,"query"),"."),r.a.createElement(l.b,{lang:"javascript"},'// uri = "https://example.com/one?key=value#id\n{\n  pathname: "/one",\n  query: "key=value",\n  hash: "id"\n}'),r.a.createElement(l.i,null,"The routes define what the application renders for a particular location, but we also need to define how the application navigates. When we create the router, we will pass it a history function that will be used to enable navigation."),r.a.createElement(l.i,null,"Curi uses the ",r.a.createElement("a",{href:"https://github.com/pshrmn/hickory"},"Hickory")," ","library for its history. There are a few Hickory packages to choose from for different environments. For most websites, the"," ",r.a.createElement(l.f,null,"@hickory/browser")," is the right choice for the front end."),r.a.createElement(l.i,null,"We can import the ",r.a.createElement(l.f,null,"browser")," function from"," ",r.a.createElement(l.f,null,"@hickory/browser")," in our index file (",r.a.createElement(l.f,null,"src/index.js"),", which ",r.a.createElement(l.f,null,"create-react-app")," created for us)."),r.a.createElement(l.b,{lang:"javascript","data-line":"3"},"// src/main.js\nimport Vue from 'vue';\nimport { browser } from '@hickory/browser';\n\nimport App from './App.vue';\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: h => h(App)\n}).$mount('#app');")),r.a.createElement(l.e,{meta:u,tag:"h2"},r.a.createElement(l.i,null,"Routes are JavaScript objects that define the valid locations for a router. They have a ",r.a.createElement(l.f,null,"name")," and a ",r.a.createElement(l.f,null,"path"),"."),r.a.createElement(l.b,{lang:"javascript"},'// this is a route\n{ name: "Home", path: "" }'),r.a.createElement(l.i,null,"A route's ",r.a.createElement(l.f,null,"name")," needs to be unique. We will use route names when we navigate within the application. A route's ",r.a.createElement(l.f,null,"path")," ","describes the location pathname that it should match."),r.a.createElement(l.d,{meta:s,tag:"h3"},r.a.createElement(l.i,null,"Route paths are strings describing the pathname segments they should match."),r.a.createElement(l.b,{lang:"javascript"},"{ path: '' } // matches \"/\"\n{ path: 'about/stuff' } // matches \"/about/stuff\""),r.a.createElement(l.i,null,"Paths never begin with a slash."),r.a.createElement(l.b,{lang:"javascript"},"// yes\n{ path: '' }\n// no\n{ path: '/' }"),r.a.createElement(l.i,null,"Paths can include dynamic parameters. These are specified with a string that starts with a colon (",r.a.createElement(l.f,null,":"),") followed by the name of the params."),r.a.createElement(l.b,{lang:"javascript"},"// a param named \"id\"\n{ path: ':id' }"),r.a.createElement(l.i,null,"Routes can be nested using the ",r.a.createElement(l.f,null,"children")," property of a route. A nested route inherits the path from its ancestor route(s), so its ",r.a.createElement(l.f,null,"path")," is only the additional part of the pathname that should be matched."),r.a.createElement(l.b,{lang:"javascript"},'{\n  name: "Parent",\n  path: "parent", // matches /parent\n  children: [\n    // matches /parent/daughter\n    { name: "Daughter", path: "daughter" },\n    // matches /parent/son\n    { name: "Son", path: "son" }\n  ]\n}')),r.a.createElement(l.i,null,"The website will start with four routes."),r.a.createElement(l.j,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"name"),r.a.createElement("th",null,"path"),r.a.createElement("th",null,"Description"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Home"),r.a.createElement("td",null,r.a.createElement(l.f,null,'""')),r.a.createElement("td",null,"Lists books available for purchase")),r.a.createElement("tr",null,r.a.createElement("td",null,"Book"),r.a.createElement("td",null,r.a.createElement(l.f,null,'"book/:id"')),r.a.createElement("td",null,"Details about an individual book")),r.a.createElement("tr",null,r.a.createElement("td",null,"Checkout"),r.a.createElement("td",null,r.a.createElement(l.f,null,'"checkout"')),r.a.createElement("td",null,'"Buy" the books in the shopping cart')),r.a.createElement("tr",null,r.a.createElement("td",null,"Catch All"),r.a.createElement("td",null,r.a.createElement(l.f,null,'"(.*)"')),r.a.createElement("td",null,"Display a not found page for all other locations")))),r.a.createElement(l.g,null,r.a.createElement(l.i,null,"The catch all route uses a regular expression syntax to indicate that it should match everything. Curi uses the"," ",r.a.createElement("a",{href:"https://github.com/pillarjs/path-to-regexp"},r.a.createElement(l.f,null,"path-to-regexp"))," ","package for route matching. We will only be using some of its basic syntax, but you can read its documentation to learn about more advanced path syntax.")),r.a.createElement(l.i,null,"Inside of the ",r.a.createElement(l.f,null,"src")," directory, we will create a"," ",r.a.createElement(l.f,null,"routes.js")," file where we can define the application's routes."),r.a.createElement(l.b,{lang:"bash"},"touch src/routes.js"),r.a.createElement(l.i,null,"We can create an array of routes using the above names and paths."),r.a.createElement(l.i,null,r.a.createElement(l.f,null,"@curi/router")," provides a ",r.a.createElement(l.f,null,"prepareRoutes")," function, which is used to setup routes for the router. We will pass the routes array to ",r.a.createElement(l.f,null,"prepareRoutes")," and export the result of that function call."),r.a.createElement(l.b,{lang:"javascript"},'// src/routes.js\nimport { prepareRoutes } from "@curi/router";\n\nexport default prepareRoutes([\n  {\n    name: "Home",\n    path: ""\n  },\n  {\n    name: "Book",\n    path: "book/:id"\n  },\n  {\n    name: "Checkout",\n    path: "checkout"\n  },\n  {\n    name: "Catch All",\n    path: "(.*)"\n  }\n]);')),r.a.createElement(l.e,{meta:p,tag:"h2"},r.a.createElement(l.i,null,"With the history object created and the routes defined, we are ready to create the router. Back in the ",r.a.createElement(l.f,null,"src/index.js")," file, we should import the ",r.a.createElement(l.f,null,"createRouter")," function from"," ",r.a.createElement(l.f,null,"@curi/router")," as well as our routes from"," ",r.a.createElement(l.f,null,"src/routes.js"),". Creating the router is done by calling the"," ",r.a.createElement(l.f,null,"createRouter")," function and passing it the history function and the ",r.a.createElement(l.f,null,"routes")," array."),r.a.createElement(l.b,{lang:"javascript","data-line":"3,6,11"},"// src/main.js\nimport Vue from 'vue';\nimport { createRouter } from \"@curi/router\";\nimport { browser } from '@hickory/browser';\n\nimport routes from './routes';\nimport App from './App.vue';\n\nVue.config.productionTip = false;\n\nlet router = createRouter(browser, routes);\n\nnew Vue({\n  render: h => h(App)\n}).$mount('#app')"),r.a.createElement(l.g,null,r.a.createElement(l.i,null,"The Eslint warning has now moved to the ",r.a.createElement(l.f,null,"router"),", but this is still nothing to worry about.")),r.a.createElement(l.i,null,"The router is now ready and we can render the application, but first we should do something really important: make the site more accessible."),r.a.createElement(l.e,{meta:h,tag:"h3"},r.a.createElement(l.i,null,"In a multi-page application, a screen reader will announce navigation to users. This happens automatically when a new Document is loaded. A single-page application reuses its Document, which is great for removing unnecessary server requests, but also means that the navigation is no longer automatically announced."),r.a.createElement(l.i,null,'Curi has a concept of "side effects". These are functions that are called after a navigation happens and are passed an object with data about the navigation.'),r.a.createElement(l.i,null,"The ",r.a.createElement(l.f,null,"@curi/router")," package provides a few side effects that are useful for websites. For now, we will focus on the"," ",r.a.createElement(o.a,{name:"Package",params:{package:"router",version:"v2"},hash:"announce"},r.a.createElement(l.f,null,"announce"))," ","side effect. The ",r.a.createElement(l.f,null,"announce")," side effect returns a string, which sets the text content of a"," ",r.a.createElement("a",{href:"https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions"},"ARIA Live region"),". Screen readers will detect the changed text and read it to the users."),r.a.createElement(l.i,null,"Let's go ahead and add the ",r.a.createElement(l.f,null,"announce")," side effect to the router. We will have it return a string of the response's"," ",r.a.createElement(l.f,null,"pathname"),"."),r.a.createElement(l.b,{lang:"javascript","data-line":"3,11-17"},"// src/main.js\nimport Vue from 'vue';\nimport { createRouter, announce } from \"@curi/router\";\nimport { browser } from '@hickory/browser';\n\nimport routes from './routes';\nimport App from './App.vue';\n\nVue.config.productionTip = false;\n\nlet router = createRouter(browser, routes, {\n  sideEffects: [\n    announce(({ response }) => {\n      return `Navigated to ${response.location.pathname}`;\n    })\n  ]\n});\n\nnew Vue({\n  render: h => h(App)\n}).$mount('#app');")),r.a.createElement(l.e,{meta:m,tag:"h3"},r.a.createElement(l.i,null,"We will add router support to the Vue application using a plugin. This plugin does a couple of things. First, it makes some Curi components available within the application. The only one of these components that we will be using is the ",r.a.createElement(l.f,null,"curi-link"),". Second, it makes router related values accessible to the components in the application. The router is available as"," ",r.a.createElement(l.f,null,"this.$router")," and the ",r.a.createElement(l.f,null,"response")," and"," ",r.a.createElement(l.f,null,"navigation")," (we will cover these next) are grouped under"," ",r.a.createElement(l.f,null,"this.$curi"),". When the ",r.a.createElement(l.f,null,"CuriPlugin")," is installed, the ",r.a.createElement(l.f,null,"router")," as passed in the options object."),r.a.createElement(l.b,{lang:"javascript","data-line":"5,19"},"// src/main.js\nimport Vue from 'vue'\nimport { createRouter, announce } from \"@curi/router\";\nimport { browser } from '@hickory/browser';\nimport { CuriPlugin } from '@curi/vue';\n\nimport routes from './routes';\nimport App from './App.vue';\n\nVue.config.productionTip = false;\n\nlet router = createRouter(browser, routes, {\n  sideEffects: [\n    announce(({ response }) => {\n      return `Navigated to ${response.location.pathname}`;\n    })\n  ]\n});\nVue.use(CuriPlugin, { router });\n\nnew Vue({\n  render: h => h(App)\n}).$mount('#app');"))),r.a.createElement(l.e,{meta:f,tag:"h2"},r.a.createElement(l.i,null,"We can now render our application. We will re-use the provide"," ",r.a.createElement(l.f,null,"App.vue")," file."),r.a.createElement(l.d,{meta:d,tag:"h3"},r.a.createElement(l.i,null,"Whenever Curi receives a location, it matches its routes against it and generates a response. This is an object with data related to the route that matched the location. Later on we will modify this data ourselves, but for now the important thing to know is that the response lets us know about the current route."),r.a.createElement(l.b,{lang:"javascript"},"// a sample response object\n{\n  body: undefined,\n  data: undefined,\n  location: { pathname: '/', ... },\n  name: 'Home',\n  params: {},\n  partials: [],\n  meta: {\n    status: 200\n  }\n}"),r.a.createElement(l.i,null,"The router uses an observer model to let functions subscribe to be called when a new response is generated. The ",r.a.createElement(l.f,null,"CuriPlugin")," ","sets up an observer so that it can trigger a re-render whenever there is a new one."),r.a.createElement(l.i,null,"The ",r.a.createElement(l.f,null,"navigation")," object contains additional information about a navigation that doesn't make sense to include in the response object. This includes the navigation's \"action\" (",r.a.createElement(l.f,null,"push"),", ",r.a.createElement(l.f,null,"pop"),", or ",r.a.createElement(l.f,null,"replace"),") and the previous response object. This can be useful for animation and modals.")),r.a.createElement(l.i,null,"Most of the time, the response is the only property you will need to use to render, but the other two may occasionally be useful."),r.a.createElement(l.i,null,"How do we use the response to render? Any way you want. Based on the sample response above, the ",r.a.createElement(l.f,null,"name")," stands out as the best way to identify which route matched. We can make this even easier by adding another property to the response: ",r.a.createElement(l.f,null,"body"),"."),r.a.createElement(l.i,null,"Earlier it was mentioned that response objects can be modified. This is done by returning an object from a route's ",r.a.createElement(l.f,null,"respond")," ","function. ",r.a.createElement(l.f,null,"respond")," receives an object with a whole bunch of properties that we can use to help determine how to modify the response, but for the time being, we don't care about any of those. All we need to know is that if we return an object with a"," ",r.a.createElement(l.f,null,"body")," property, that value will be set on our response object."),r.a.createElement(l.b,{lang:"javascript"},'{\n  name: "Home",\n  path: "",\n  respond() {\n    return {\n      body: "Home, sweet home."\n    };\n    /*\n      * response = {\n      *   body: "Home, sweet home.",\n      *   // ...\n      * }\n      */\n  }\n}'),r.a.createElement(l.i,null,"If the return object's ",r.a.createElement(l.f,null,"body")," property is a Vue component, we can render it using ",r.a.createElement(l.a,null,"Component :is"),"."),r.a.createElement(l.i,null,"We haven't actually defined components for our routes yet, so we should throw together some placeholders."),r.a.createElement(l.b,{lang:"bash"},"touch src/components/Home.vue src/components/Book.vue \\\n  src/components/Checkout.vue src/components/NotFound.vue"),r.a.createElement(l.b,{lang:"html"},"\x3c!-- src/components/Home.vue --\x3e\n<template>\n  <article>\n    <Paragraph>Home</Paragraph>\n  </article>\n</template>"),r.a.createElement(l.b,{lang:"html"},"\x3c!-- src/components/Book.vue --\x3e\n<template>\n  <article>\n    <Paragraph>Book</Paragraph>\n  </article>\n</template>"),r.a.createElement(l.b,{lang:"html"},"\x3c!-- src/components/Checkout.vue --\x3e\n<template>\n  <article>\n    <Paragraph>Checkout</Paragraph>\n  </article>\n</template>"),r.a.createElement(l.b,{lang:"html"},"\x3c!-- src/components/NotFound.vue --\x3e\n<template>\n  <article>\n    <Paragraph>Not Found</Paragraph>\n  </article>\n</template>"),r.a.createElement(l.i,null,"These components can be imported in ",r.a.createElement(l.f,null,"src/routes.js")," and attached to their respective routes."),r.a.createElement(l.b,{lang:"javascript","data-line":"4-7,14-18,23-27,32-36,41-45"},'// src/routes.js\nimport { prepareRoutes } from "@curi/router";\n\nimport Home from \'./components/Home\';\nimport Book from \'./components/Book\';\nimport Checkout from \'./components/Checkout\';\nimport NotFound from \'./components/NotFound\';\n\nexport default prepareRoutes([\n  {\n    name: "Home",\n    path: "",\n    respond() {\n      return {\n        body: Home\n      };\n    }\n  },\n  {\n    name: "Book",\n    path: "book/:id",\n    respond() {\n      return {\n        body: Book\n      };\n    }\n  },\n  {\n    name: "Checkout",\n    path: "checkout",\n    respond() {\n      return {\n        body: Checkout\n      };\n    }\n  },\n  {\n    name: "Catch All",\n    path: "(.*)",\n    respond() {\n      return {\n        body: NotFound\n      };\n    }\n  }\n]);'),r.a.createElement(l.i,null,"We can now update ",r.a.createElement(l.f,null,"App.vue")," to render"," ",r.a.createElement(l.f,null,"response.body")," as a component, which as mentioned above is available through ",r.a.createElement(l.f,null,"this.$curi"),"."),r.a.createElement(l.b,{lang:"html"},'\x3c!-- src/App.vue --\x3e\n<template>\n  <component :is="$curi.response.body" />\n</template>\n'),r.a.createElement(l.i,null,"We can also remove the ",r.a.createElement(l.f,null,"HelloWorld")," component."),r.a.createElement(l.b,{lang:"bash"},"rm src/components/HelloWorld.vue"),r.a.createElement(l.i,null,"At this point in time our app is rendering, but is isn't very interesting because we cannot navigate between locations.")),r.a.createElement(l.e,{meta:w,tag:"h2"},r.a.createElement(l.i,null,"The ",r.a.createElement(l.f,null,"CuriPlugin")," makes a ",r.a.createElement(l.f,null,"curi-link")," component available with the appliaction. We can use that to navigate between locations within our application."),r.a.createElement(l.d,{meta:b,tag:"h3"},r.a.createElement(l.i,null,"Navigation isn't done by manually typing the pathname of the location the link should navigate to. Instead, we specify the name of the route using the ",r.a.createElement(l.f,null,"name")," prop."),r.a.createElement(l.b,{lang:"html"},'\x3c!-- { name: "Home", path: "" } --\x3e\n<curi-link name="Home">Home</curi-link>\n\x3c!-- <a href="/">Home</a> --\x3e'),r.a.createElement(l.i,null,"If a route has params, we provide these to the ",r.a.createElement(l.f,null,"curi-link")," ","as a ",r.a.createElement(l.f,null,"params")," object. For a nested route, we would also need to provide params for any ancestor routes."),r.a.createElement(l.b,{lang:"html"},'\x3c!-- { name: "Book", path: "book/:id" } --\x3e\n<curi-link name="Book" :params="{ id: 7 }">The Dark Forest</curi-link>\n\x3c!-- <a href="/book/7">The Dark Forest</a> --\x3e'),r.a.createElement(l.i,null,"The ",r.a.createElement(l.f,null,"curi-link")," is only for in-app navigation. If you want to link to pages outside of the application, use an anchor."),r.a.createElement(l.b,{lang:"html"},'\x3c!-- in-app --\x3e\n<curi-link name="Some Route">Some Route</curi-link>\n\n\x3c!-- out of app --\x3e\n<a href="https://github.com">GitHub</a>'),r.a.createElement(l.i,null,"If you need to attach query or hash data to a ",r.a.createElement(l.f,null,"curi-link"),", use the ",r.a.createElement(l.f,null,"query")," and ",r.a.createElement(l.f,null,"hash")," props."),r.a.createElement(l.b,{lang:"html"},'\x3c!-- { name: "Checkout", path: "checkout" } --\x3e\n<curi-link name="Checkout" :query="a=123">Checkout</curi-link>\n\x3c!-- <a href="/checkout?a=123">Checkout</a> --\x3e')),r.a.createElement(l.e,{meta:g,tag:"h3"},r.a.createElement(l.i,null,"We will start with creating a navigation menu component with links to our home page and checkout page."),r.a.createElement(l.b,{lang:"bash"},"touch src/components/NavMenu.vue"),r.a.createElement(l.b,{lang:"html"},'\x3c!-- src/components/NavMenu.vue --\x3e\n<template>\n  <nav>\n    <ul>\n      <li>\n        <curi-link name="Home">Home</curi-link>\n      </li>\n      <li>\n        <curi-link name="Checkout">Checkout</curi-link>\n      </li>\n    </ul>\n  </nav>\n</template>'),r.a.createElement(l.i,null,"We can import that in our ",r.a.createElement(l.f,null,"App.vue")," file and add it to our template. This is a good opportunity to also add some structure to the elements in the template."),r.a.createElement(l.b,{lang:"html"},"\x3c!-- src/App.vue --\x3e\n<template>\n  <div>\n    <header>\n      <nav-menu />\n    </header>\n    <main>\n      <component :is=\"$curi.response.body\" />\n    </main>\n  </div>\n</template>\n\n<script type=\"src/javascript\">\n  import NavMenu from './components/NavMenu';\n\n  export default {\n    name: 'app',\n    components: {\n      'nav-menu': NavMenu\n    }\n  };\n<\/script>")),r.a.createElement(l.e,{meta:E,tag:"h3"},r.a.createElement(l.i,null,"We want to be able to link to individual books from the home page. First, we need data about the books. For now, we're going to hard-code the books in the ",r.a.createElement(l.f,null,"src/books.js")," module."),r.a.createElement(l.b,{lang:"bash"},"touch src/books.js"),r.a.createElement(l.i,null,"You can copy+paste or modify the data, but the structure of the provided data should stay the same."),r.a.createElement(l.b,{lang:"javascript"},"// src/books.js\nexport default [\n  {\n    id: 0,\n    title: 'The Name of the Wind',\n    author: 'Patrick Rothfuss',\n    published: '2007',\n    pages: 662\n  },\n  {\n    id: 1,\n    title: \"The Wise Man's Fear\",\n    author: 'Patrick Rothfuss',\n    published: '2011',\n    pages: 994\n  },\n  {\n    id: 2,\n    title: 'The Way of Kings',\n    author: 'Brandon Sanderson',\n    published: '2010',\n    pages: 1007\n  },\n  {\n    id: 3,\n    title: 'A Storm of Swords',\n    author: 'George R.R. Martin',\n    published: '2003',\n    pages: 1177\n  },\n  {\n    id: 78,\n    title: 'Words of Radiance',\n    author: 'Brandon Sanderson',\n    published: '2014',\n    pages: 1087\n  }\n];"),r.a.createElement(l.i,null,"The data can be imported in the ",r.a.createElement(l.f,null,"Home")," component. We will iterate over the books with a ",r.a.createElement(l.f,null,"curi-link")," to each one."),r.a.createElement(l.b,{lang:"html"},'\x3c!-- src/components/Home.vue --\x3e\n<template>\n  <article>\n    <ul>\n      <li v-for="b in books" :key="b.id">\n        <curi-link name="Book" :params="{ id: b.id }">\n          {{b.title}} by {{b.author}}\n        </curi-link>\n      </li>\n    </ul>\n  </article>\n</template>\n\n<script>\n  import books from \'../books\';\n\n  export default {\n    name: \'home\',\n    data() {\n      return { books };\n    }\n  }\n<\/script>'),r.a.createElement(l.i,null,"Now that we can navigate to the books, we should fill out the UI for the ",r.a.createElement(l.f,null,"Book")," component. We will once again import the"," ",r.a.createElement(l.f,null,"books.js")," data. We can use ",r.a.createElement(l.f,null,"params.id")," to select the correct book. ",r.a.createElement(l.f,null,"params.id")," is a string, so we will need to parse it into an integer. Sometimes there won't be a valid book for the ",r.a.createElement(l.f,null,"params.id"),". In that case, we will also want to display a message that the requested book could not be found."),r.a.createElement(l.b,{lang:"html"},"\x3c!-- src/components/Book.vue --\x3e\n<template>\n  <article v-if=\"book\">\n    <h1>{{book.title}}</h1>\n    <h2>by {{book.author}}</h2>\n    <Paragraph>Published in {{book.published}}</Paragraph>\n    <Paragraph>{{book.pages}} pages</Paragraph>\n  </article>\n  <article v-else>\n    <Paragraph>\n      The requested book could not be found\n    </Paragraph>\n  </article>\n</template>\n\n<script>\n  import books from '../books';\n\n  export default {\n    name: 'book',\n    computed: {\n      book() {\n        let id = parseInt(this.$curi.response.params.id, 10);\n        return books.find(b => b.id === id);\n      }\n    }\n  }\n<\/script>"))),r.a.createElement(l.e,{meta:v,tag:"h2"},r.a.createElement(l.i,null,"We want to be able to add books to our shopping cart. Since this is a play site, we will store the cart data in memory."),r.a.createElement(l.b,{lang:"bash"},"touch src/cart.js"),r.a.createElement(l.i,null,"The shopping cart implementation will be a JavaScript ",r.a.createElement(l.f,null,"Map"),". We can call its ",r.a.createElement(l.f,null,"set")," method to add books, its"," ",r.a.createElement(l.f,null,"clear")," method to reset the cart, and iterate over its"," ",r.a.createElement(l.f,null,"entries")," with a ",r.a.createElement(l.f,null,"for...of")," loop."),r.a.createElement(l.b,{lang:"javascript"},"// src/cart.js\nlet cart = new Map();\n\nexport default {\n  add(book, quantity) {\n    cart.set(book, quantity);\n  },\n  items() {\n    let books = [];\n    for (let [book, quantity] of cart.entries()) {\n      books.push({\n        title: book.title,\n        quantity\n      });\n    }\n    return books;\n  },\n  reset() {\n    cart.clear();\n    return [];\n  }\n};"),r.a.createElement(l.i,null,"As stated above, we can access our ",r.a.createElement(l.f,null,"router")," in the"," ",r.a.createElement(l.f,null,"Book")," component using ",r.a.createElement(l.f,null,"this.$router"),". The router's"," ",r.a.createElement(l.f,null,"navigate")," function can be used to navigate to a new location. This means that when the user clicks a button to add a book to their shopping cart, we can automatically navigate to the checkout page."),r.a.createElement(l.d,{meta:k,tag:"h3"},r.a.createElement(l.i,null,"The router has a ",r.a.createElement(l.f,null,"url")," method that is used to generate a URL string using the name of a route and an object of the route's params."),r.a.createElement(l.b,null,'let url = router.url({ name: "New" });'),r.a.createElement(l.i,null,"The router's ",r.a.createElement(l.f,null,"navigate")," method is used to navigate; it takes a URL (such as one defined using ",r.a.createElement(l.f,null,"router.url"),"). The function can also take a ",r.a.createElement(l.f,null,"method")," type for the navigation:"," ",r.a.createElement(l.f,null,"push"),", ",r.a.createElement(l.f,null,"replace"),", or ",r.a.createElement(l.f,null,"anchor"),"."),r.a.createElement(l.i,null,r.a.createElement(l.f,null,"push")," pushes a new location after the current index, removing any locations after the current location."),r.a.createElement(l.b,null,"// session = ['/one', '/two', '/three']\n// index = 1\n// current = '/two'\nrouter.navigate({ url: \"/new\", method: \"push\" });\n// session = ['/one', '/two', '/new']\n// index = 2\n// current = '/new'"),r.a.createElement(l.i,null,r.a.createElement(l.f,null,"replace")," replaces the location at the current index."),r.a.createElement(l.b,null,"// session = ['/one', '/two', '/three']\n// index = 1\n// current = '/two'\nrouter.navigate({ url: \"/replacement\", method: \"replace\" });\n// session = ['/one', '/replacement', '/three']\n// index = 1\n// current = '/replacement'"),r.a.createElement(l.i,null,r.a.createElement(l.f,null,"anchor")," is a mix between ",r.a.createElement(l.f,null,"push")," and"," ",r.a.createElement(l.f,null,"replace"),". It mimics the behavior of clicking on links, so if you navigate to the same location as the current one it will replace, and if you navigate to a new location it will push."),r.a.createElement(l.i,null,"If ",r.a.createElement(l.f,null,"method.navigate")," is called without a navigation"," ",r.a.createElement(l.f,null,"method"),", it will default to ",r.a.createElement(l.f,null,"anchor"),"."),r.a.createElement(l.b,null,"// session = ['/one', '/two', '/three']\n// index = 1\n// current = '/two'\nrouter.navigate({ url: \"/two\", method: \"anchor\" });\n// session = ['/one', '/two', '/three']\n// index = 1\n// current = '/two'\nrouter.navigate({ url: \"/new\", method: \"anchor\" });\n// session = ['/one', '/two', '/new']\n// index = 2\n// current = '/new'","`}")),r.a.createElement(l.i,null,"We also want to import our shopping cart API so that we can add a book to the cart."),r.a.createElement(l.b,{lang:"html","data-line":"8-10,19,29-35"},'\x3c!-- src/components/Book.vue --\x3e\n<template>\n  <article v-if="book">\n    <h1>{{book.title}}</h1>\n    <h2>by {{book.author}}</h2>\n    <Paragraph>Published in {{book.published}}</Paragraph>\n    <Paragraph>{{book.pages}} pages</Paragraph>\n    <button type="button" v-on:click="onClick">\n      Add to Cart\n    </button>\n  </article>\n  <article v-else>\n    <Paragraph>\n      The requested book could not be found\n    </Paragraph>\n  </article>\n</template>\n\n<script>\n  import books from \'../books\';\n  import cart from \'../cart\';\n\n  export default {\n    name: \'book\',\n    computed: {\n      book() {\n        let id = parseInt(this.$curi.response.params.id, 10);\n        return books.find(b => b.id === id);\n      }\n    },\n    methods: {\n      onClick: function() {\n        cart.add(this.book, 1);\n        let url = this.$router.url({ name: "Checkout "});\n        this.$router.navigate({ url });\n      }\n    }\n  }\n<\/script>'),r.a.createElement(l.i,null,"Finally, we can update our ",r.a.createElement(l.f,null,"Checkout")," component to display the books in the shopping cart. To do this, we will import our cart and books. Our cart only stores book ",r.a.createElement(l.f,null,"id"),"s, so we will need to merge the book data with the cart data."),r.a.createElement(l.i,null,'When a user "buys" the books in their shopping cart, we need to clear out the cart. We will also replace the current location with one whose'," ",r.a.createElement(l.f,null,"location.hash"),' is the string "thanks". When that is present in the URI, we can render a "Thanks for your purchase" message to "confirm" the purchase.'),r.a.createElement(l.b,{lang:"html"},'\x3c!-- src/components/Checkout.vue --\x3e\n<template>\n  <article v-if="books.length">\n    <h1>Checkout</h1>\n    <ScrollableTable>\n      <thead>\n        <tr>\n          <th>Title</th>\n          <th>Quantity</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for="book in books" :key="book.title">\n          <td>{{book.title}}</td>\n          <td>{{book.quantity}}</td>\n        </tr>\n      </tbody>\n    </ScrollableTable>\n    <button type="button" v-on:click="onClick">\n      Buy\n    </button>\n  </article>\n  <article v-else-if="$curi.response.location.hash === \'thanks\'">\n    <Paragraph>Thanks for your purchase!</Paragraph>\n  </article>\n  <article v-else>\n    <Paragraph>The cart is currently empty</Paragraph>\n  </article>\n</template>\n\n<script>\n  import cart from \'../cart\';\n\n  export default {\n    name: \'checkout\',\n    data() {\n      return {\n        books: cart.items()\n      };\n    },\n    methods: {\n      onClick: function() {\n        this.books = cart.reset();\n        let url = this.$router.url({\n          name: "Checkout",\n          hash: "thanks"\n        });\n        this.$router.navigate({ url, method: "replace" });\n      }\n    }\n  }\n<\/script>')),r.a.createElement(l.e,{meta:y,tag:"h2"},r.a.createElement(l.i,null,"We now have a functional website built with Vue and Curi. What should you do next? Build another site! You can also check out the"," ",r.a.createElement(o.a,{name:"Guides"},"guides")," for information on advanced techniques.")))}}}]);